(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var Ed={exports:{}},ba={},wd={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function Kw(){if(Rg)return Ce;Rg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function I(b){return b===null||typeof b!="object"?null:(b=T&&b[T]||b["@@iterator"],typeof b=="function"?b:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,W={};function U(b,G,fe){this.props=b,this.context=G,this.refs=W,this.updater=fe||x}U.prototype.isReactComponent={},U.prototype.setState=function(b,G){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,G,"setState")},U.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function H(){}H.prototype=U.prototype;function ne(b,G,fe){this.props=b,this.context=G,this.refs=W,this.updater=fe||x}var Z=ne.prototype=new H;Z.constructor=ne,O(Z,U.prototype),Z.isPureReactComponent=!0;var de=Array.isArray,Se=Object.prototype.hasOwnProperty,Te={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(b,G,fe){var Re,Ae={},De=null,Me=null;if(G!=null)for(Re in G.ref!==void 0&&(Me=G.ref),G.key!==void 0&&(De=""+G.key),G)Se.call(G,Re)&&!N.hasOwnProperty(Re)&&(Ae[Re]=G[Re]);var Fe=arguments.length-2;if(Fe===1)Ae.children=fe;else if(1<Fe){for(var $e=Array(Fe),_t=0;_t<Fe;_t++)$e[_t]=arguments[_t+2];Ae.children=$e}if(b&&b.defaultProps)for(Re in Fe=b.defaultProps,Fe)Ae[Re]===void 0&&(Ae[Re]=Fe[Re]);return{$$typeof:r,type:b,key:De,ref:Me,props:Ae,_owner:Te.current}}function A(b,G){return{$$typeof:r,type:b.type,key:G,ref:b.ref,props:b.props,_owner:b._owner}}function k(b){return typeof b=="object"&&b!==null&&b.$$typeof===r}function L(b){var G={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(fe){return G[fe]})}var M=/\/+/g;function C(b,G){return typeof b=="object"&&b!==null&&b.key!=null?L(""+b.key):G.toString(36)}function nt(b,G,fe,Re,Ae){var De=typeof b;(De==="undefined"||De==="boolean")&&(b=null);var Me=!1;if(b===null)Me=!0;else switch(De){case"string":case"number":Me=!0;break;case"object":switch(b.$$typeof){case r:case e:Me=!0}}if(Me)return Me=b,Ae=Ae(Me),b=Re===""?"."+C(Me,0):Re,de(Ae)?(fe="",b!=null&&(fe=b.replace(M,"$&/")+"/"),nt(Ae,G,fe,"",function(_t){return _t})):Ae!=null&&(k(Ae)&&(Ae=A(Ae,fe+(!Ae.key||Me&&Me.key===Ae.key?"":(""+Ae.key).replace(M,"$&/")+"/")+b)),G.push(Ae)),1;if(Me=0,Re=Re===""?".":Re+":",de(b))for(var Fe=0;Fe<b.length;Fe++){De=b[Fe];var $e=Re+C(De,Fe);Me+=nt(De,G,fe,$e,Ae)}else if($e=I(b),typeof $e=="function")for(b=$e.call(b),Fe=0;!(De=b.next()).done;)De=De.value,$e=Re+C(De,Fe++),Me+=nt(De,G,fe,$e,Ae);else if(De==="object")throw G=String(b),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Me}function Nt(b,G,fe){if(b==null)return b;var Re=[],Ae=0;return nt(b,Re,"","",function(De){return G.call(fe,De,Ae++)}),Re}function Dt(b){if(b._status===-1){var G=b._result;G=G(),G.then(function(fe){(b._status===0||b._status===-1)&&(b._status=1,b._result=fe)},function(fe){(b._status===0||b._status===-1)&&(b._status=2,b._result=fe)}),b._status===-1&&(b._status=0,b._result=G)}if(b._status===1)return b._result.default;throw b._result}var ze={current:null},re={transition:null},me={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:re,ReactCurrentOwner:Te};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Nt,forEach:function(b,G,fe){Nt(b,function(){G.apply(this,arguments)},fe)},count:function(b){var G=0;return Nt(b,function(){G++}),G},toArray:function(b){return Nt(b,function(G){return G})||[]},only:function(b){if(!k(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ce.Component=U,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=ne,Ce.StrictMode=i,Ce.Suspense=p,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ce.act=se,Ce.cloneElement=function(b,G,fe){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Re=O({},b.props),Ae=b.key,De=b.ref,Me=b._owner;if(G!=null){if(G.ref!==void 0&&(De=G.ref,Me=Te.current),G.key!==void 0&&(Ae=""+G.key),b.type&&b.type.defaultProps)var Fe=b.type.defaultProps;for($e in G)Se.call(G,$e)&&!N.hasOwnProperty($e)&&(Re[$e]=G[$e]===void 0&&Fe!==void 0?Fe[$e]:G[$e])}var $e=arguments.length-2;if($e===1)Re.children=fe;else if(1<$e){Fe=Array($e);for(var _t=0;_t<$e;_t++)Fe[_t]=arguments[_t+2];Re.children=Fe}return{$$typeof:r,type:b.type,key:Ae,ref:De,props:Re,_owner:Me}},Ce.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},Ce.createElement=S,Ce.createFactory=function(b){var G=S.bind(null,b);return G.type=b,G},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(b){return{$$typeof:d,render:b}},Ce.isValidElement=k,Ce.lazy=function(b){return{$$typeof:E,_payload:{_status:-1,_result:b},_init:Dt}},Ce.memo=function(b,G){return{$$typeof:y,type:b,compare:G===void 0?null:G}},Ce.startTransition=function(b){var G=re.transition;re.transition={};try{b()}finally{re.transition=G}},Ce.unstable_act=se,Ce.useCallback=function(b,G){return ze.current.useCallback(b,G)},Ce.useContext=function(b){return ze.current.useContext(b)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(b){return ze.current.useDeferredValue(b)},Ce.useEffect=function(b,G){return ze.current.useEffect(b,G)},Ce.useId=function(){return ze.current.useId()},Ce.useImperativeHandle=function(b,G,fe){return ze.current.useImperativeHandle(b,G,fe)},Ce.useInsertionEffect=function(b,G){return ze.current.useInsertionEffect(b,G)},Ce.useLayoutEffect=function(b,G){return ze.current.useLayoutEffect(b,G)},Ce.useMemo=function(b,G){return ze.current.useMemo(b,G)},Ce.useReducer=function(b,G,fe){return ze.current.useReducer(b,G,fe)},Ce.useRef=function(b){return ze.current.useRef(b)},Ce.useState=function(b){return ze.current.useState(b)},Ce.useSyncExternalStore=function(b,G,fe){return ze.current.useSyncExternalStore(b,G,fe)},Ce.useTransition=function(){return ze.current.useTransition()},Ce.version="18.3.1",Ce}var Ag;function _f(){return Ag||(Ag=1,wd.exports=Kw()),wd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function Gw(){if(Cg)return ba;Cg=1;var r=_f(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,p,y){var E,T={},I=null,x=null;y!==void 0&&(I=""+y),p.key!==void 0&&(I=""+p.key),p.ref!==void 0&&(x=p.ref);for(E in p)i.call(p,E)&&!l.hasOwnProperty(E)&&(T[E]=p[E]);if(d&&d.defaultProps)for(E in p=d.defaultProps,p)T[E]===void 0&&(T[E]=p[E]);return{$$typeof:e,type:d,key:I,ref:x,props:T,_owner:o.current}}return ba.Fragment=t,ba.jsx=h,ba.jsxs=h,ba}var Pg;function Qw(){return Pg||(Pg=1,Ed.exports=Gw()),Ed.exports}var D=Qw(),z=_f(),bu={},Td={exports:{}},Zt={},Id={exports:{}},Sd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function Yw(){return kg||(kg=1,function(r){function e(re,me){var se=re.length;re.push(me);e:for(;0<se;){var b=se-1>>>1,G=re[b];if(0<o(G,me))re[b]=me,re[se]=G,se=b;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var me=re[0],se=re.pop();if(se!==me){re[0]=se;e:for(var b=0,G=re.length,fe=G>>>1;b<fe;){var Re=2*(b+1)-1,Ae=re[Re],De=Re+1,Me=re[De];if(0>o(Ae,se))De<G&&0>o(Me,Ae)?(re[b]=Me,re[De]=se,b=De):(re[b]=Ae,re[Re]=se,b=Re);else if(De<G&&0>o(Me,se))re[b]=Me,re[De]=se,b=De;else break e}}return me}function o(re,me){var se=re.sortIndex-me.sortIndex;return se!==0?se:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var p=[],y=[],E=1,T=null,I=3,x=!1,O=!1,W=!1,U=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(re){for(var me=t(y);me!==null;){if(me.callback===null)i(y);else if(me.startTime<=re)i(y),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(y)}}function de(re){if(W=!1,Z(re),!O)if(t(p)!==null)O=!0,Dt(Se);else{var me=t(y);me!==null&&ze(de,me.startTime-re)}}function Se(re,me){O=!1,W&&(W=!1,H(S),S=-1),x=!0;var se=I;try{for(Z(me),T=t(p);T!==null&&(!(T.expirationTime>me)||re&&!L());){var b=T.callback;if(typeof b=="function"){T.callback=null,I=T.priorityLevel;var G=b(T.expirationTime<=me);me=r.unstable_now(),typeof G=="function"?T.callback=G:T===t(p)&&i(p),Z(me)}else i(p);T=t(p)}if(T!==null)var fe=!0;else{var Re=t(y);Re!==null&&ze(de,Re.startTime-me),fe=!1}return fe}finally{T=null,I=se,x=!1}}var Te=!1,N=null,S=-1,A=5,k=-1;function L(){return!(r.unstable_now()-k<A)}function M(){if(N!==null){var re=r.unstable_now();k=re;var me=!0;try{me=N(!0,re)}finally{me?C():(Te=!1,N=null)}}else Te=!1}var C;if(typeof ne=="function")C=function(){ne(M)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Nt=nt.port2;nt.port1.onmessage=M,C=function(){Nt.postMessage(null)}}else C=function(){U(M,0)};function Dt(re){N=re,Te||(Te=!0,C())}function ze(re,me){S=U(function(){re(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){O||x||(O=!0,Dt(Se))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(re){switch(I){case 1:case 2:case 3:var me=3;break;default:me=I}var se=I;I=me;try{return re()}finally{I=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=I;I=re;try{return me()}finally{I=se}},r.unstable_scheduleCallback=function(re,me,se){var b=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?b+se:b):se=b,re){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=se+G,re={id:E++,callback:me,priorityLevel:re,startTime:se,expirationTime:G,sortIndex:-1},se>b?(re.sortIndex=se,e(y,re),t(p)===null&&re===t(y)&&(W?(H(S),S=-1):W=!0,ze(de,se-b))):(re.sortIndex=G,e(p,re),O||x||(O=!0,Dt(Se))),re},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(re){var me=I;return function(){var se=I;I=me;try{return re.apply(this,arguments)}finally{I=se}}}}(Sd)),Sd}var xg;function Xw(){return xg||(xg=1,Id.exports=Yw()),Id.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function Jw(){if(Ng)return Zt;Ng=1;var r=_f(),e=Xw();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function I(n){return p.call(T,n)?!0:p.call(E,n)?!1:y.test(n)?T[n]=!0:(E[n]=!0,!1)}function x(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function O(n,s,a,c){if(s===null||typeof s>"u"||x(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function W(n,s,a,c,f,g,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=v}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];U[s]=new W(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function ne(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(H,ne);U[s]=new W(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(H,ne);U[s]=new W(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(H,ne);U[s]=new W(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function Z(n,s,a,c){var f=U.hasOwnProperty(s)?U[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(O(s,a,f,c)&&(a=null),c||f===null?I(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var de=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),Te=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),Nt=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),re=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,b;function G(n){if(b===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);b=s&&s[1]||""}return`
`+b+n}var fe=!1;function Re(n,s){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){c=$}n.call(s.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=c.stack.split(`
`),v=f.length-1,R=g.length-1;1<=v&&0<=R&&f[v]!==g[R];)R--;for(;1<=v&&0<=R;v--,R--)if(f[v]!==g[R]){if(v!==1||R!==1)do if(v--,R--,0>R||f[v]!==g[R]){var P=`
`+f[v].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=v&&0<=R);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function Ae(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case Te:return"Portal";case A:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case nt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case L:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case M:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Nt:return s=n.displayName||null,s!==null?s:De(n.type)||"Memo";case Dt:s=n._payload,n=n._init;try{return De(n(s))}catch{}}return null}function Me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _t(n){var s=$e(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){c=""+v,g.call(this,v)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ur(n){n._valueTracker||(n._valueTracker=_t(n))}function vs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=$e(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Ur(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Di(n,s){var a=s.checked;return se({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Es(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Fe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Bo(n,s){s=s.checked,s!=null&&Z(n,"checked",s,!1)}function $o(n,s){Bo(n,s);var a=Fe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?ws(n,s.type,a):s.hasOwnProperty("defaultValue")&&ws(n,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function wl(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ws(n,s,a){(s!=="number"||Ur(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var cr=Array.isArray;function hr(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function qo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ts(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(cr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Fe(a)}}function Is(n,s){var a=Fe(s.value),c=Fe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Wo(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function dt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?dt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dr,Ho=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=dr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function jr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Li=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(n){Li.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Vi[s]=Vi[n]})});function Ko(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Vi.hasOwnProperty(n)&&Vi[n]?(""+s).trim():s+"px"}function Go(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=Ko(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var Qo=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yo(n,s){if(s){if(Qo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Xo(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oi=null;function Ss(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Rs=null,hn=null,$n=null;function As(n){if(n=wa(n)){if(typeof Rs!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Xl(s),Rs(n.stateNode,n.type,s))}}function qn(n){hn?$n?$n.push(n):$n=[n]:hn=n}function Jo(){if(hn){var n=hn,s=$n;if($n=hn=null,As(n),s)for(n=0;n<s.length;n++)As(s[n])}}function bi(n,s){return n(s)}function Zo(){}var fr=!1;function ea(n,s,a){if(fr)return n(s,a);fr=!0;try{return bi(n,s,a)}finally{fr=!1,(hn!==null||$n!==null)&&(Zo(),Jo())}}function rt(n,s){var a=n.stateNode;if(a===null)return null;var c=Xl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Cs=!1;if(d)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){Cs=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{Cs=!1}function Mi(n,s,a,c,f,g,v,R,P){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(X){this.onError(X)}}var Fi=!1,Ps=null,Tn=!1,ta=null,Gc={onError:function(n){Fi=!0,Ps=n}};function ks(n,s,a,c,f,g,v,R,P){Fi=!1,Ps=null,Mi.apply(Gc,arguments)}function Tl(n,s,a,c,f,g,v,R,P){if(ks.apply(this,arguments),Fi){if(Fi){var $=Ps;Fi=!1,Ps=null}else throw Error(t(198));Tn||(Tn=!0,ta=$)}}function In(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Ui(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Sn(n){if(In(n)!==n)throw Error(t(188))}function Il(n){var s=n.alternate;if(!s){if(s=In(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Sn(f),n;if(g===c)return Sn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var v=!1,R=f.child;R;){if(R===a){v=!0,a=f,c=g;break}if(R===c){v=!0,c=f,a=g;break}R=R.sibling}if(!v){for(R=g.child;R;){if(R===a){v=!0,a=g,c=f;break}if(R===c){v=!0,c=g,a=f;break}R=R.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function na(n){return n=Il(n),n!==null?xs(n):null}function xs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=xs(n);if(s!==null)return s;n=n.sibling}return null}var Ns=e.unstable_scheduleCallback,ra=e.unstable_cancelCallback,Sl=e.unstable_shouldYield,Qc=e.unstable_requestPaint,qe=e.unstable_now,Rl=e.unstable_getCurrentPriorityLevel,ji=e.unstable_ImmediatePriority,zr=e.unstable_UserBlockingPriority,dn=e.unstable_NormalPriority,ia=e.unstable_LowPriority,Al=e.unstable_IdlePriority,zi=null,nn=null;function Cl(n){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(zi,n,void 0,(n.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:kl,sa=Math.log,Pl=Math.LN2;function kl(n){return n>>>=0,n===0?32:31-(sa(n)/Pl|0)|0}var Ds=64,Vs=4194304;function Br(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Bi(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,v=a&268435455;if(v!==0){var R=v&~f;R!==0?c=Br(R):(g&=v,g!==0&&(c=Br(g)))}else v=a&~f,v!==0?c=Br(v):g!==0&&(c=Br(g));if(c===0)return 0;if(s!==0&&s!==c&&!(s&f)&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if(c&4&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-zt(s),f=1<<a,c|=n[a],s&=~f;return c}function Yc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-zt(g),R=1<<v,P=f[v];P===-1?(!(R&a)||R&c)&&(f[v]=Yc(R,s)):P<=s&&(n.expiredLanes|=R),g&=~R}}function rn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function $i(){var n=Ds;return Ds<<=1,!(Ds&4194240)&&(Ds=64),n}function $r(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function qr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-zt(s),n[s]=a}function Be(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-zt(a),g=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function Wr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-zt(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var xe=0;function Hr(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var xl,Ls,Nl,Dl,Vl,oa=!1,Wn=[],St=null,Rn=null,An=null,Kr=new Map,fn=new Map,Hn=[],Xc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ll(n,s){switch(n){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Kr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(s.pointerId)}}function Ht(n,s,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=wa(s),s!==null&&Ls(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Jc(n,s,a,c,f){switch(s){case"focusin":return St=Ht(St,n,s,a,c,f),!0;case"dragenter":return Rn=Ht(Rn,n,s,a,c,f),!0;case"mouseover":return An=Ht(An,n,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return Kr.set(g,Ht(Kr.get(g)||null,n,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,fn.set(g,Ht(fn.get(g)||null,n,s,a,c,f)),!0}return!1}function Ol(n){var s=Gi(n.target);if(s!==null){var a=In(s);if(a!==null){if(s=a.tag,s===13){if(s=Ui(a),s!==null){n.blockedOn=s,Vl(n.priority,function(){Nl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Os(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Oi=c,a.target.dispatchEvent(c),Oi=null}else return s=wa(a),s!==null&&Ls(s),n.blockedOn=a,!1;s.shift()}return!0}function qi(n,s,a){mr(n)&&a.delete(s)}function bl(){oa=!1,St!==null&&mr(St)&&(St=null),Rn!==null&&mr(Rn)&&(Rn=null),An!==null&&mr(An)&&(An=null),Kr.forEach(qi),fn.forEach(qi)}function Cn(n,s){n.blockedOn===s&&(n.blockedOn=null,oa||(oa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bl)))}function Pn(n){function s(f){return Cn(f,n)}if(0<Wn.length){Cn(Wn[0],n);for(var a=1;a<Wn.length;a++){var c=Wn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(St!==null&&Cn(St,n),Rn!==null&&Cn(Rn,n),An!==null&&Cn(An,n),Kr.forEach(s),fn.forEach(s),a=0;a<Hn.length;a++)c=Hn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Hn.length&&(a=Hn[0],a.blockedOn===null);)Ol(a),a.blockedOn===null&&Hn.shift()}var gr=de.ReactCurrentBatchConfig,Gr=!0;function Qe(n,s,a,c){var f=xe,g=gr.transition;gr.transition=null;try{xe=1,aa(n,s,a,c)}finally{xe=f,gr.transition=g}}function Zc(n,s,a,c){var f=xe,g=gr.transition;gr.transition=null;try{xe=4,aa(n,s,a,c)}finally{xe=f,gr.transition=g}}function aa(n,s,a,c){if(Gr){var f=Os(n,s,a,c);if(f===null)ch(n,s,c,Wi,a),Ll(n,c);else if(Jc(f,n,s,a,c))c.stopPropagation();else if(Ll(n,c),s&4&&-1<Xc.indexOf(n)){for(;f!==null;){var g=wa(f);if(g!==null&&xl(g),g=Os(n,s,a,c),g===null&&ch(n,s,c,Wi,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else ch(n,s,c,null,a)}}var Wi=null;function Os(n,s,a,c){if(Wi=null,n=Ss(c),n=Gi(n),n!==null)if(s=In(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Ui(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Wi=n,null}function la(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rl()){case ji:return 1;case zr:return 4;case dn:case ia:return 16;case Al:return 536870912;default:return 16}default:return 16}}var sn=null,bs=null,Kt=null;function ua(){if(Kt)return Kt;var n,s=bs,a=s.length,c,f="value"in sn?sn.value:sn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var v=a-n;for(c=1;c<=v&&s[a-c]===f[g-c];c++);return Kt=f.slice(n,1<c?1-c:void 0)}function Ms(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Kn(){return!0}function ca(){return!1}function Rt(n){function s(a,c,f,g,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Kn:ca,this.isPropagationStopped=ca,this}return se(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Kn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Kn)},persist:function(){},isPersistent:Kn}),s}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fs=Rt(kn),Gn=se({},kn,{view:0,detail:0}),eh=Rt(Gn),Us,yr,Qr,Hi=se({},Gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qr&&(Qr&&n.type==="mousemove"?(Us=n.screenX-Qr.screenX,yr=n.screenY-Qr.screenY):yr=Us=0,Qr=n),Us)},movementY:function(n){return"movementY"in n?n.movementY:yr}}),js=Rt(Hi),ha=se({},Hi,{dataTransfer:0}),Ml=Rt(ha),zs=se({},Gn,{relatedTarget:0}),Bs=Rt(zs),Fl=se({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),_r=Rt(Fl),Ul=se({},kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),jl=Rt(Ul),zl=se({},kn,{data:0}),da=Rt(zl),$s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $l(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Bl[n])?!!s[n]:!1}function Qn(){return $l}var u=se({},Gn,{key:function(n){if(n.key){var s=$s[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ms(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Bt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qn,charCode:function(n){return n.type==="keypress"?Ms(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ms(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Rt(u),_=se({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=Rt(_),F=se({},Gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qn}),q=Rt(F),te=se({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=Rt(te),pt=se({},Hi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=Rt(pt),vt=[9,13,27,32],ot=d&&"CompositionEvent"in window,pn=null;d&&"documentMode"in document&&(pn=document.documentMode);var on=d&&"TextEvent"in window&&!pn,Ki=d&&(!ot||pn&&8<pn&&11>=pn),qs=" ",vp=!1;function Ep(n,s){switch(n){case"keyup":return vt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ws=!1;function qE(n,s){switch(n){case"compositionend":return wp(s);case"keypress":return s.which!==32?null:(vp=!0,qs);case"textInput":return n=s.data,n===qs&&vp?null:n;default:return null}}function WE(n,s){if(Ws)return n==="compositionend"||!ot&&Ep(n,s)?(n=ua(),Kt=bs=sn=null,Ws=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ki&&s.locale!=="ko"?null:s.data;default:return null}}var HE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!HE[n.type]:s==="textarea"}function Ip(n,s,a,c){qn(c),s=Gl(s,"onChange"),0<s.length&&(a=new Fs("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var fa=null,pa=null;function KE(n){zp(n,0)}function ql(n){var s=Ys(n);if(vs(s))return n}function GE(n,s){if(n==="change")return s}var Sp=!1;if(d){var th;if(d){var nh="oninput"in document;if(!nh){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),nh=typeof Rp.oninput=="function"}th=nh}else th=!1;Sp=th&&(!document.documentMode||9<document.documentMode)}function Ap(){fa&&(fa.detachEvent("onpropertychange",Cp),pa=fa=null)}function Cp(n){if(n.propertyName==="value"&&ql(pa)){var s=[];Ip(s,pa,n,Ss(n)),ea(KE,s)}}function QE(n,s,a){n==="focusin"?(Ap(),fa=s,pa=a,fa.attachEvent("onpropertychange",Cp)):n==="focusout"&&Ap()}function YE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ql(pa)}function XE(n,s){if(n==="click")return ql(s)}function JE(n,s){if(n==="input"||n==="change")return ql(s)}function ZE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var xn=typeof Object.is=="function"?Object.is:ZE;function ma(n,s){if(xn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!p.call(s,f)||!xn(n[f],s[f]))return!1}return!0}function Pp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kp(n,s){var a=Pp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pp(a)}}function xp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?xp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Np(){for(var n=window,s=Ur();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Ur(n.document)}return s}function rh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function ew(n){var s=Np(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&xp(a.ownerDocument.documentElement,a)){if(c!==null&&rh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=kp(a,g);var v=kp(a,c);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var tw=d&&"documentMode"in document&&11>=document.documentMode,Hs=null,ih=null,ga=null,sh=!1;function Dp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sh||Hs==null||Hs!==Ur(c)||(c=Hs,"selectionStart"in c&&rh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ga&&ma(ga,c)||(ga=c,c=Gl(ih,"onSelect"),0<c.length&&(s=new Fs("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Hs)))}function Wl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ks={animationend:Wl("Animation","AnimationEnd"),animationiteration:Wl("Animation","AnimationIteration"),animationstart:Wl("Animation","AnimationStart"),transitionend:Wl("Transition","TransitionEnd")},oh={},Vp={};d&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Hl(n){if(oh[n])return oh[n];if(!Ks[n])return n;var s=Ks[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Vp)return oh[n]=s[a];return n}var Lp=Hl("animationend"),Op=Hl("animationiteration"),bp=Hl("animationstart"),Mp=Hl("transitionend"),Fp=new Map,Up="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(n,s){Fp.set(n,s),l(s,[n])}for(var ah=0;ah<Up.length;ah++){var lh=Up[ah],nw=lh.toLowerCase(),rw=lh[0].toUpperCase()+lh.slice(1);Yr(nw,"on"+rw)}Yr(Lp,"onAnimationEnd"),Yr(Op,"onAnimationIteration"),Yr(bp,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(Mp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function jp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Tl(c,s,void 0,n),n.currentTarget=null}function zp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var v=c.length-1;0<=v;v--){var R=c[v],P=R.instance,$=R.currentTarget;if(R=R.listener,P!==g&&f.isPropagationStopped())break e;jp(f,R,$),g=P}else for(v=0;v<c.length;v++){if(R=c[v],P=R.instance,$=R.currentTarget,R=R.listener,P!==g&&f.isPropagationStopped())break e;jp(f,R,$),g=P}}}if(Tn)throw n=ta,Tn=!1,ta=null,n}function He(n,s){var a=s[gh];a===void 0&&(a=s[gh]=new Set);var c=n+"__bubble";a.has(c)||(Bp(s,n,2,!1),a.add(c))}function uh(n,s,a){var c=0;s&&(c|=4),Bp(a,n,c,s)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function _a(n){if(!n[Kl]){n[Kl]=!0,i.forEach(function(a){a!=="selectionchange"&&(iw.has(a)||uh(a,!1,n),uh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Kl]||(s[Kl]=!0,uh("selectionchange",!1,s))}}function Bp(n,s,a,c){switch(la(s)){case 1:var f=Qe;break;case 4:f=Zc;break;default:f=aa}a=f.bind(null,s,a,n),f=void 0,!Cs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function ch(n,s,a,c,f){var g=c;if(!(s&1)&&!(s&2)&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var R=c.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(v===4)for(v=c.return;v!==null;){var P=v.tag;if((P===3||P===4)&&(P=v.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;v=v.return}for(;R!==null;){if(v=Gi(R),v===null)return;if(P=v.tag,P===5||P===6){c=g=v;continue e}R=R.parentNode}}c=c.return}ea(function(){var $=g,X=Ss(a),J=[];e:{var Y=Fp.get(n);if(Y!==void 0){var ie=Fs,ue=n;switch(n){case"keypress":if(Ms(a)===0)break e;case"keydown":case"keyup":ie=m;break;case"focusin":ue="focus",ie=Bs;break;case"focusout":ue="blur",ie=Bs;break;case"beforeblur":case"afterblur":ie=Bs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=js;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Ml;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=q;break;case Lp:case Op:case bp:ie=_r;break;case Mp:ie=je;break;case"scroll":ie=eh;break;case"wheel":ie=Ve;break;case"copy":case"cut":case"paste":ie=jl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=w}var ce=(s&4)!==0,it=!ce&&n==="scroll",j=ce?Y!==null?Y+"Capture":null:Y;ce=[];for(var V=$,B;V!==null;){B=V;var ee=B.stateNode;if(B.tag===5&&ee!==null&&(B=ee,j!==null&&(ee=rt(V,j),ee!=null&&ce.push(va(V,ee,B)))),it)break;V=V.return}0<ce.length&&(Y=new ie(Y,ue,null,a,X),J.push({event:Y,listeners:ce}))}}if(!(s&7)){e:{if(Y=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",Y&&a!==Oi&&(ue=a.relatedTarget||a.fromElement)&&(Gi(ue)||ue[vr]))break e;if((ie||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,ie?(ue=a.relatedTarget||a.toElement,ie=$,ue=ue?Gi(ue):null,ue!==null&&(it=In(ue),ue!==it||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=$),ie!==ue)){if(ce=js,ee="onMouseLeave",j="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ce=w,ee="onPointerLeave",j="onPointerEnter",V="pointer"),it=ie==null?Y:Ys(ie),B=ue==null?Y:Ys(ue),Y=new ce(ee,V+"leave",ie,a,X),Y.target=it,Y.relatedTarget=B,ee=null,Gi(X)===$&&(ce=new ce(j,V+"enter",ue,a,X),ce.target=B,ce.relatedTarget=it,ee=ce),it=ee,ie&&ue)t:{for(ce=ie,j=ue,V=0,B=ce;B;B=Gs(B))V++;for(B=0,ee=j;ee;ee=Gs(ee))B++;for(;0<V-B;)ce=Gs(ce),V--;for(;0<B-V;)j=Gs(j),B--;for(;V--;){if(ce===j||j!==null&&ce===j.alternate)break t;ce=Gs(ce),j=Gs(j)}ce=null}else ce=null;ie!==null&&$p(J,Y,ie,ce,!1),ue!==null&&it!==null&&$p(J,it,ue,ce,!0)}}e:{if(Y=$?Ys($):window,ie=Y.nodeName&&Y.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Y.type==="file")var he=GE;else if(Tp(Y))if(Sp)he=JE;else{he=YE;var ge=QE}else(ie=Y.nodeName)&&ie.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(he=XE);if(he&&(he=he(n,$))){Ip(J,he,a,X);break e}ge&&ge(n,Y,$),n==="focusout"&&(ge=Y._wrapperState)&&ge.controlled&&Y.type==="number"&&ws(Y,"number",Y.value)}switch(ge=$?Ys($):window,n){case"focusin":(Tp(ge)||ge.contentEditable==="true")&&(Hs=ge,ih=$,ga=null);break;case"focusout":ga=ih=Hs=null;break;case"mousedown":sh=!0;break;case"contextmenu":case"mouseup":case"dragend":sh=!1,Dp(J,a,X);break;case"selectionchange":if(tw)break;case"keydown":case"keyup":Dp(J,a,X)}var ye;if(ot)e:{switch(n){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Ws?Ep(n,a)&&(ve="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(Ki&&a.locale!=="ko"&&(Ws||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Ws&&(ye=ua()):(sn=X,bs="value"in sn?sn.value:sn.textContent,Ws=!0)),ge=Gl($,ve),0<ge.length&&(ve=new da(ve,n,null,a,X),J.push({event:ve,listeners:ge}),ye?ve.data=ye:(ye=wp(a),ye!==null&&(ve.data=ye)))),(ye=on?qE(n,a):WE(n,a))&&($=Gl($,"onBeforeInput"),0<$.length&&(X=new da("onBeforeInput","beforeinput",null,a,X),J.push({event:X,listeners:$}),X.data=ye))}zp(J,s)})}function va(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Gl(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=rt(n,a),g!=null&&c.unshift(va(n,g,f)),g=rt(n,s),g!=null&&c.push(va(n,g,f))),n=n.return}return c}function Gs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $p(n,s,a,c,f){for(var g=s._reactName,v=[];a!==null&&a!==c;){var R=a,P=R.alternate,$=R.stateNode;if(P!==null&&P===c)break;R.tag===5&&$!==null&&(R=$,f?(P=rt(a,g),P!=null&&v.unshift(va(a,P,R))):f||(P=rt(a,g),P!=null&&v.push(va(a,P,R)))),a=a.return}v.length!==0&&n.push({event:s,listeners:v})}var sw=/\r\n?/g,ow=/\u0000|\uFFFD/g;function qp(n){return(typeof n=="string"?n:""+n).replace(sw,`
`).replace(ow,"")}function Ql(n,s,a){if(s=qp(s),qp(n)!==s&&a)throw Error(t(425))}function Yl(){}var hh=null,dh=null;function fh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ph=typeof setTimeout=="function"?setTimeout:void 0,aw=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,lw=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(n){return Wp.resolve(null).then(n).catch(uw)}:ph;function uw(n){setTimeout(function(){throw n})}function mh(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),Pn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Pn(s)}function Xr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Hp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Qs=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Qs,Ea="__reactProps$"+Qs,vr="__reactContainer$"+Qs,gh="__reactEvents$"+Qs,cw="__reactListeners$"+Qs,hw="__reactHandles$"+Qs;function Gi(n){var s=n[Yn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[vr]||a[Yn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Hp(n);n!==null;){if(a=n[Yn])return a;n=Hp(n)}return s}n=a,a=n.parentNode}return null}function wa(n){return n=n[Yn]||n[vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ys(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Xl(n){return n[Ea]||null}var yh=[],Xs=-1;function Jr(n){return{current:n}}function Ke(n){0>Xs||(n.current=yh[Xs],yh[Xs]=null,Xs--)}function We(n,s){Xs++,yh[Xs]=n.current,n.current=s}var Zr={},Vt=Jr(Zr),Gt=Jr(!1),Qi=Zr;function Js(n,s){var a=n.type.contextTypes;if(!a)return Zr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Qt(n){return n=n.childContextTypes,n!=null}function Jl(){Ke(Gt),Ke(Vt)}function Kp(n,s,a){if(Vt.current!==Zr)throw Error(t(168));We(Vt,s),We(Gt,a)}function Gp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,Me(n)||"Unknown",f));return se({},a,c)}function Zl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Zr,Qi=Vt.current,We(Vt,n),We(Gt,Gt.current),!0}function Qp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Gp(n,s,Qi),c.__reactInternalMemoizedMergedChildContext=n,Ke(Gt),Ke(Vt),We(Vt,n)):Ke(Gt),We(Gt,a)}var Er=null,eu=!1,_h=!1;function Yp(n){Er===null?Er=[n]:Er.push(n)}function dw(n){eu=!0,Yp(n)}function ei(){if(!_h&&Er!==null){_h=!0;var n=0,s=xe;try{var a=Er;for(xe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Er=null,eu=!1}catch(f){throw Er!==null&&(Er=Er.slice(n+1)),Ns(ji,ei),f}finally{xe=s,_h=!1}}return null}var Zs=[],eo=0,tu=null,nu=0,mn=[],gn=0,Yi=null,wr=1,Tr="";function Xi(n,s){Zs[eo++]=nu,Zs[eo++]=tu,tu=n,nu=s}function Xp(n,s,a){mn[gn++]=wr,mn[gn++]=Tr,mn[gn++]=Yi,Yi=n;var c=wr;n=Tr;var f=32-zt(c)-1;c&=~(1<<f),a+=1;var g=32-zt(s)+f;if(30<g){var v=f-f%5;g=(c&(1<<v)-1).toString(32),c>>=v,f-=v,wr=1<<32-zt(s)+f|a<<f|c,Tr=g+n}else wr=1<<g|a<<f|c,Tr=n}function vh(n){n.return!==null&&(Xi(n,1),Xp(n,1,0))}function Eh(n){for(;n===tu;)tu=Zs[--eo],Zs[eo]=null,nu=Zs[--eo],Zs[eo]=null;for(;n===Yi;)Yi=mn[--gn],mn[gn]=null,Tr=mn[--gn],mn[gn]=null,wr=mn[--gn],mn[gn]=null}var an=null,ln=null,Ye=!1,Nn=null;function Jp(n,s){var a=En(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Zp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,an=n,ln=Xr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,an=n,ln=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Yi!==null?{id:wr,overflow:Tr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=En(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,an=n,ln=null,!0):!1;default:return!1}}function wh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Th(n){if(Ye){var s=ln;if(s){var a=s;if(!Zp(n,s)){if(wh(n))throw Error(t(418));s=Xr(a.nextSibling);var c=an;s&&Zp(n,s)?Jp(c,a):(n.flags=n.flags&-4097|2,Ye=!1,an=n)}}else{if(wh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ye=!1,an=n}}}function em(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;an=n}function ru(n){if(n!==an)return!1;if(!Ye)return em(n),Ye=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!fh(n.type,n.memoizedProps)),s&&(s=ln)){if(wh(n))throw tm(),Error(t(418));for(;s;)Jp(n,s),s=Xr(s.nextSibling)}if(em(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){ln=Xr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}ln=null}}else ln=an?Xr(n.stateNode.nextSibling):null;return!0}function tm(){for(var n=ln;n;)n=Xr(n.nextSibling)}function to(){ln=an=null,Ye=!1}function Ih(n){Nn===null?Nn=[n]:Nn.push(n)}var fw=de.ReactCurrentBatchConfig;function Ta(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(v){var R=f.refs;v===null?delete R[g]:R[g]=v},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function iu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function nm(n){var s=n._init;return s(n._payload)}function rm(n){function s(j,V){if(n){var B=j.deletions;B===null?(j.deletions=[V],j.flags|=16):B.push(V)}}function a(j,V){if(!n)return null;for(;V!==null;)s(j,V),V=V.sibling;return null}function c(j,V){for(j=new Map;V!==null;)V.key!==null?j.set(V.key,V):j.set(V.index,V),V=V.sibling;return j}function f(j,V){return j=li(j,V),j.index=0,j.sibling=null,j}function g(j,V,B){return j.index=B,n?(B=j.alternate,B!==null?(B=B.index,B<V?(j.flags|=2,V):B):(j.flags|=2,V)):(j.flags|=1048576,V)}function v(j){return n&&j.alternate===null&&(j.flags|=2),j}function R(j,V,B,ee){return V===null||V.tag!==6?(V=pd(B,j.mode,ee),V.return=j,V):(V=f(V,B),V.return=j,V)}function P(j,V,B,ee){var he=B.type;return he===N?X(j,V,B.props.children,ee,B.key):V!==null&&(V.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Dt&&nm(he)===V.type)?(ee=f(V,B.props),ee.ref=Ta(j,V,B),ee.return=j,ee):(ee=Pu(B.type,B.key,B.props,null,j.mode,ee),ee.ref=Ta(j,V,B),ee.return=j,ee)}function $(j,V,B,ee){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=md(B,j.mode,ee),V.return=j,V):(V=f(V,B.children||[]),V.return=j,V)}function X(j,V,B,ee,he){return V===null||V.tag!==7?(V=ss(B,j.mode,ee,he),V.return=j,V):(V=f(V,B),V.return=j,V)}function J(j,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=pd(""+V,j.mode,B),V.return=j,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Se:return B=Pu(V.type,V.key,V.props,null,j.mode,B),B.ref=Ta(j,null,V),B.return=j,B;case Te:return V=md(V,j.mode,B),V.return=j,V;case Dt:var ee=V._init;return J(j,ee(V._payload),B)}if(cr(V)||me(V))return V=ss(V,j.mode,B,null),V.return=j,V;iu(j,V)}return null}function Y(j,V,B,ee){var he=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return he!==null?null:R(j,V,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Se:return B.key===he?P(j,V,B,ee):null;case Te:return B.key===he?$(j,V,B,ee):null;case Dt:return he=B._init,Y(j,V,he(B._payload),ee)}if(cr(B)||me(B))return he!==null?null:X(j,V,B,ee,null);iu(j,B)}return null}function ie(j,V,B,ee,he){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return j=j.get(B)||null,R(V,j,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Se:return j=j.get(ee.key===null?B:ee.key)||null,P(V,j,ee,he);case Te:return j=j.get(ee.key===null?B:ee.key)||null,$(V,j,ee,he);case Dt:var ge=ee._init;return ie(j,V,B,ge(ee._payload),he)}if(cr(ee)||me(ee))return j=j.get(B)||null,X(V,j,ee,he,null);iu(V,ee)}return null}function ue(j,V,B,ee){for(var he=null,ge=null,ye=V,ve=V=0,Tt=null;ye!==null&&ve<B.length;ve++){ye.index>ve?(Tt=ye,ye=null):Tt=ye.sibling;var be=Y(j,ye,B[ve],ee);if(be===null){ye===null&&(ye=Tt);break}n&&ye&&be.alternate===null&&s(j,ye),V=g(be,V,ve),ge===null?he=be:ge.sibling=be,ge=be,ye=Tt}if(ve===B.length)return a(j,ye),Ye&&Xi(j,ve),he;if(ye===null){for(;ve<B.length;ve++)ye=J(j,B[ve],ee),ye!==null&&(V=g(ye,V,ve),ge===null?he=ye:ge.sibling=ye,ge=ye);return Ye&&Xi(j,ve),he}for(ye=c(j,ye);ve<B.length;ve++)Tt=ie(ye,j,ve,B[ve],ee),Tt!==null&&(n&&Tt.alternate!==null&&ye.delete(Tt.key===null?ve:Tt.key),V=g(Tt,V,ve),ge===null?he=Tt:ge.sibling=Tt,ge=Tt);return n&&ye.forEach(function(ui){return s(j,ui)}),Ye&&Xi(j,ve),he}function ce(j,V,B,ee){var he=me(B);if(typeof he!="function")throw Error(t(150));if(B=he.call(B),B==null)throw Error(t(151));for(var ge=he=null,ye=V,ve=V=0,Tt=null,be=B.next();ye!==null&&!be.done;ve++,be=B.next()){ye.index>ve?(Tt=ye,ye=null):Tt=ye.sibling;var ui=Y(j,ye,be.value,ee);if(ui===null){ye===null&&(ye=Tt);break}n&&ye&&ui.alternate===null&&s(j,ye),V=g(ui,V,ve),ge===null?he=ui:ge.sibling=ui,ge=ui,ye=Tt}if(be.done)return a(j,ye),Ye&&Xi(j,ve),he;if(ye===null){for(;!be.done;ve++,be=B.next())be=J(j,be.value,ee),be!==null&&(V=g(be,V,ve),ge===null?he=be:ge.sibling=be,ge=be);return Ye&&Xi(j,ve),he}for(ye=c(j,ye);!be.done;ve++,be=B.next())be=ie(ye,j,ve,be.value,ee),be!==null&&(n&&be.alternate!==null&&ye.delete(be.key===null?ve:be.key),V=g(be,V,ve),ge===null?he=be:ge.sibling=be,ge=be);return n&&ye.forEach(function(Hw){return s(j,Hw)}),Ye&&Xi(j,ve),he}function it(j,V,B,ee){if(typeof B=="object"&&B!==null&&B.type===N&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Se:e:{for(var he=B.key,ge=V;ge!==null;){if(ge.key===he){if(he=B.type,he===N){if(ge.tag===7){a(j,ge.sibling),V=f(ge,B.props.children),V.return=j,j=V;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Dt&&nm(he)===ge.type){a(j,ge.sibling),V=f(ge,B.props),V.ref=Ta(j,ge,B),V.return=j,j=V;break e}a(j,ge);break}else s(j,ge);ge=ge.sibling}B.type===N?(V=ss(B.props.children,j.mode,ee,B.key),V.return=j,j=V):(ee=Pu(B.type,B.key,B.props,null,j.mode,ee),ee.ref=Ta(j,V,B),ee.return=j,j=ee)}return v(j);case Te:e:{for(ge=B.key;V!==null;){if(V.key===ge)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(j,V.sibling),V=f(V,B.children||[]),V.return=j,j=V;break e}else{a(j,V);break}else s(j,V);V=V.sibling}V=md(B,j.mode,ee),V.return=j,j=V}return v(j);case Dt:return ge=B._init,it(j,V,ge(B._payload),ee)}if(cr(B))return ue(j,V,B,ee);if(me(B))return ce(j,V,B,ee);iu(j,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(a(j,V.sibling),V=f(V,B),V.return=j,j=V):(a(j,V),V=pd(B,j.mode,ee),V.return=j,j=V),v(j)):a(j,V)}return it}var no=rm(!0),im=rm(!1),su=Jr(null),ou=null,ro=null,Sh=null;function Rh(){Sh=ro=ou=null}function Ah(n){var s=su.current;Ke(su),n._currentValue=s}function Ch(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function io(n,s){ou=n,Sh=ro=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Yt=!0),n.firstContext=null)}function yn(n){var s=n._currentValue;if(Sh!==n)if(n={context:n,memoizedValue:s,next:null},ro===null){if(ou===null)throw Error(t(308));ro=n,ou.dependencies={lanes:0,firstContext:n}}else ro=ro.next=n;return s}var Ji=null;function Ph(n){Ji===null?Ji=[n]:Ji.push(n)}function sm(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Ph(s)):(a.next=f.next,f.next=a),s.interleaved=a,Ir(n,c)}function Ir(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ti=!1;function kh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Sr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ni(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,Oe&2){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Ir(n,a)}return f=c.interleaved,f===null?(s.next=s,Ph(c)):(s.next=f.next,f.next=s),c.interleaved=s,Ir(n,a)}function au(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Wr(n,a)}}function am(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function lu(n,s,a,c){var f=n.updateQueue;ti=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var P=R,$=P.next;P.next=null,v===null?g=$:v.next=$,v=P;var X=n.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==v&&(R===null?X.firstBaseUpdate=$:R.next=$,X.lastBaseUpdate=P))}if(g!==null){var J=f.baseState;v=0,X=$=P=null,R=g;do{var Y=R.lane,ie=R.eventTime;if((c&Y)===Y){X!==null&&(X=X.next={eventTime:ie,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ue=n,ce=R;switch(Y=s,ie=a,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){J=ue.call(ie,J,Y);break e}J=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,Y=typeof ue=="function"?ue.call(ie,J,Y):ue,Y==null)break e;J=se({},J,Y);break e;case 2:ti=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,Y=f.effects,Y===null?f.effects=[R]:Y.push(R))}else ie={eventTime:ie,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?($=X=ie,P=J):X=X.next=ie,v|=Y;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(X===null&&(P=J),f.baseState=P,f.firstBaseUpdate=$,f.lastBaseUpdate=X,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);ts|=v,n.lanes=v,n.memoizedState=J}}function lm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Ia={},Xn=Jr(Ia),Sa=Jr(Ia),Ra=Jr(Ia);function Zi(n){if(n===Ia)throw Error(t(174));return n}function xh(n,s){switch(We(Ra,s),We(Sa,n),We(Xn,Ia),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ft(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ft(s,n)}Ke(Xn),We(Xn,s)}function so(){Ke(Xn),Ke(Sa),Ke(Ra)}function um(n){Zi(Ra.current);var s=Zi(Xn.current),a=ft(s,n.type);s!==a&&(We(Sa,n),We(Xn,a))}function Nh(n){Sa.current===n&&(Ke(Xn),Ke(Sa))}var Je=Jr(0);function uu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Vh(){for(var n=0;n<Dh.length;n++)Dh[n]._workInProgressVersionPrimary=null;Dh.length=0}var cu=de.ReactCurrentDispatcher,Lh=de.ReactCurrentBatchConfig,es=0,Ze=null,mt=null,Et=null,hu=!1,Aa=!1,Ca=0,pw=0;function Lt(){throw Error(t(321))}function Oh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!xn(n[a],s[a]))return!1;return!0}function bh(n,s,a,c,f,g){if(es=g,Ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,cu.current=n===null||n.memoizedState===null?_w:vw,n=a(c,f),Aa){g=0;do{if(Aa=!1,Ca=0,25<=g)throw Error(t(301));g+=1,Et=mt=null,s.updateQueue=null,cu.current=Ew,n=a(c,f)}while(Aa)}if(cu.current=pu,s=mt!==null&&mt.next!==null,es=0,Et=mt=Ze=null,hu=!1,s)throw Error(t(300));return n}function Mh(){var n=Ca!==0;return Ca=0,n}function Jn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ze.memoizedState=Et=n:Et=Et.next=n,Et}function _n(){if(mt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=mt.next;var s=Et===null?Ze.memoizedState:Et.next;if(s!==null)Et=s,mt=n;else{if(n===null)throw Error(t(310));mt=n,n={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Et===null?Ze.memoizedState=Et=n:Et=Et.next=n}return Et}function Pa(n,s){return typeof s=="function"?s(n):s}function Fh(n){var s=_n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=mt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var R=v=null,P=null,$=g;do{var X=$.lane;if((es&X)===X)P!==null&&(P=P.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var J={lane:X,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};P===null?(R=P=J,v=c):P=P.next=J,Ze.lanes|=X,ts|=X}$=$.next}while($!==null&&$!==g);P===null?v=c:P.next=R,xn(c,s.memoizedState)||(Yt=!0),s.memoizedState=c,s.baseState=v,s.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,Ze.lanes|=g,ts|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Uh(n){var s=_n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);xn(g,s.memoizedState)||(Yt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function cm(){}function hm(n,s){var a=Ze,c=_n(),f=s(),g=!xn(c.memoizedState,f);if(g&&(c.memoizedState=f,Yt=!0),c=c.queue,jh(pm.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||Et!==null&&Et.memoizedState.tag&1){if(a.flags|=2048,ka(9,fm.bind(null,a,c,f,s),void 0,null),wt===null)throw Error(t(349));es&30||dm(a,s,f)}return f}function dm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function fm(n,s,a,c){s.value=a,s.getSnapshot=c,mm(s)&&gm(n)}function pm(n,s,a){return a(function(){mm(s)&&gm(n)})}function mm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!xn(n,a)}catch{return!0}}function gm(n){var s=Ir(n,1);s!==null&&On(s,n,1,-1)}function ym(n){var s=Jn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:n},s.queue=n,n=n.dispatch=yw.bind(null,Ze,n),[s.memoizedState,n]}function ka(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function _m(){return _n().memoizedState}function du(n,s,a,c){var f=Jn();Ze.flags|=n,f.memoizedState=ka(1|s,a,void 0,c===void 0?null:c)}function fu(n,s,a,c){var f=_n();c=c===void 0?null:c;var g=void 0;if(mt!==null){var v=mt.memoizedState;if(g=v.destroy,c!==null&&Oh(c,v.deps)){f.memoizedState=ka(s,a,g,c);return}}Ze.flags|=n,f.memoizedState=ka(1|s,a,g,c)}function vm(n,s){return du(8390656,8,n,s)}function jh(n,s){return fu(2048,8,n,s)}function Em(n,s){return fu(4,2,n,s)}function wm(n,s){return fu(4,4,n,s)}function Tm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Im(n,s,a){return a=a!=null?a.concat([n]):null,fu(4,4,Tm.bind(null,s,n),a)}function zh(){}function Sm(n,s){var a=_n();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Oh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Rm(n,s){var a=_n();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Oh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Am(n,s,a){return es&21?(xn(a,s)||(a=$i(),Ze.lanes|=a,ts|=a,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Yt=!0),n.memoizedState=a)}function mw(n,s){var a=xe;xe=a!==0&&4>a?a:4,n(!0);var c=Lh.transition;Lh.transition={};try{n(!1),s()}finally{xe=a,Lh.transition=c}}function Cm(){return _n().memoizedState}function gw(n,s,a){var c=oi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Pm(n))km(s,a);else if(a=sm(n,s,a,c),a!==null){var f=qt();On(a,n,c,f),xm(a,s,c)}}function yw(n,s,a){var c=oi(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pm(n))km(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,R=g(v,a);if(f.hasEagerState=!0,f.eagerState=R,xn(R,v)){var P=s.interleaved;P===null?(f.next=f,Ph(s)):(f.next=P.next,P.next=f),s.interleaved=f;return}}catch{}finally{}a=sm(n,s,f,c),a!==null&&(f=qt(),On(a,n,c,f),xm(a,s,c))}}function Pm(n){var s=n.alternate;return n===Ze||s!==null&&s===Ze}function km(n,s){Aa=hu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function xm(n,s,a){if(a&4194240){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Wr(n,a)}}var pu={readContext:yn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},_w={readContext:yn,useCallback:function(n,s){return Jn().memoizedState=[n,s===void 0?null:s],n},useContext:yn,useEffect:vm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,du(4194308,4,Tm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return du(4194308,4,n,s)},useInsertionEffect:function(n,s){return du(4,2,n,s)},useMemo:function(n,s){var a=Jn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Jn();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=gw.bind(null,Ze,n),[c.memoizedState,n]},useRef:function(n){var s=Jn();return n={current:n},s.memoizedState=n},useState:ym,useDebugValue:zh,useDeferredValue:function(n){return Jn().memoizedState=n},useTransition:function(){var n=ym(!1),s=n[0];return n=mw.bind(null,n[1]),Jn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=Ze,f=Jn();if(Ye){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),wt===null)throw Error(t(349));es&30||dm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,vm(pm.bind(null,c,g,n),[n]),c.flags|=2048,ka(9,fm.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=Jn(),s=wt.identifierPrefix;if(Ye){var a=Tr,c=wr;a=(c&~(1<<32-zt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ca++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=pw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},vw={readContext:yn,useCallback:Sm,useContext:yn,useEffect:jh,useImperativeHandle:Im,useInsertionEffect:Em,useLayoutEffect:wm,useMemo:Rm,useReducer:Fh,useRef:_m,useState:function(){return Fh(Pa)},useDebugValue:zh,useDeferredValue:function(n){var s=_n();return Am(s,mt.memoizedState,n)},useTransition:function(){var n=Fh(Pa)[0],s=_n().memoizedState;return[n,s]},useMutableSource:cm,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1},Ew={readContext:yn,useCallback:Sm,useContext:yn,useEffect:jh,useImperativeHandle:Im,useInsertionEffect:Em,useLayoutEffect:wm,useMemo:Rm,useReducer:Uh,useRef:_m,useState:function(){return Uh(Pa)},useDebugValue:zh,useDeferredValue:function(n){var s=_n();return mt===null?s.memoizedState=n:Am(s,mt.memoizedState,n)},useTransition:function(){var n=Uh(Pa)[0],s=_n().memoizedState;return[n,s]},useMutableSource:cm,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1};function Dn(n,s){if(n&&n.defaultProps){s=se({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Bh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:se({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var mu={isMounted:function(n){return(n=n._reactInternals)?In(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=qt(),f=oi(n),g=Sr(c,f);g.payload=s,a!=null&&(g.callback=a),s=ni(n,g,f),s!==null&&(On(s,n,f,c),au(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=qt(),f=oi(n),g=Sr(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ni(n,g,f),s!==null&&(On(s,n,f,c),au(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=qt(),c=oi(n),f=Sr(a,c);f.tag=2,s!=null&&(f.callback=s),s=ni(n,f,c),s!==null&&(On(s,n,c,a),au(s,n,c))}};function Nm(n,s,a,c,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):s.prototype&&s.prototype.isPureReactComponent?!ma(a,c)||!ma(f,g):!0}function Dm(n,s,a){var c=!1,f=Zr,g=s.contextType;return typeof g=="object"&&g!==null?g=yn(g):(f=Qt(s)?Qi:Vt.current,c=s.contextTypes,g=(c=c!=null)?Js(n,f):Zr),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=mu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Vm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&mu.enqueueReplaceState(s,s.state,null)}function $h(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},kh(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=yn(g):(g=Qt(s)?Qi:Vt.current,f.context=Js(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Bh(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&mu.enqueueReplaceState(f,f.state,null),lu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function oo(n,s){try{var a="",c=s;do a+=Ae(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function qh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Wh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var ww=typeof WeakMap=="function"?WeakMap:Map;function Lm(n,s,a){a=Sr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Tu||(Tu=!0,od=c),Wh(n,s)},a}function Om(n,s,a){a=Sr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){Wh(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Wh(n,s),typeof c!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function bm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new ww;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=Ow.bind(null,n,s,a),s.then(n,n))}function Mm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Fm(n,s,a,c,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Sr(-1,1),s.tag=2,ni(a,s,1))),a.lanes|=1),n)}var Tw=de.ReactCurrentOwner,Yt=!1;function $t(n,s,a,c){s.child=n===null?im(s,null,a,c):no(s,n.child,a,c)}function Um(n,s,a,c,f){a=a.render;var g=s.ref;return io(s,f),c=bh(n,s,a,c,g,f),a=Mh(),n!==null&&!Yt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Rr(n,s,f)):(Ye&&a&&vh(s),s.flags|=1,$t(n,s,c,f),s.child)}function jm(n,s,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!fd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,zm(n,s,g,c,f)):(n=Pu(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!(n.lanes&f)){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:ma,a(v,c)&&n.ref===s.ref)return Rr(n,s,f)}return s.flags|=1,n=li(g,c),n.ref=s.ref,n.return=s,s.child=n}function zm(n,s,a,c,f){if(n!==null){var g=n.memoizedProps;if(ma(g,c)&&n.ref===s.ref)if(Yt=!1,s.pendingProps=c=g,(n.lanes&f)!==0)n.flags&131072&&(Yt=!0);else return s.lanes=n.lanes,Rr(n,s,f)}return Hh(n,s,a,c,f)}function Bm(n,s,a){var c=s.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(lo,un),un|=a;else{if(!(a&1073741824))return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,We(lo,un),un|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,We(lo,un),un|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,We(lo,un),un|=c;return $t(n,s,f,a),s.child}function $m(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Hh(n,s,a,c,f){var g=Qt(a)?Qi:Vt.current;return g=Js(s,g),io(s,f),a=bh(n,s,a,c,g,f),c=Mh(),n!==null&&!Yt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Rr(n,s,f)):(Ye&&c&&vh(s),s.flags|=1,$t(n,s,a,f),s.child)}function qm(n,s,a,c,f){if(Qt(a)){var g=!0;Zl(s)}else g=!1;if(io(s,f),s.stateNode===null)yu(n,s),Dm(s,a,c),$h(s,a,c,f),c=!0;else if(n===null){var v=s.stateNode,R=s.memoizedProps;v.props=R;var P=v.context,$=a.contextType;typeof $=="object"&&$!==null?$=yn($):($=Qt(a)?Qi:Vt.current,$=Js(s,$));var X=a.getDerivedStateFromProps,J=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function";J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==c||P!==$)&&Vm(s,v,c,$),ti=!1;var Y=s.memoizedState;v.state=Y,lu(s,c,v,f),P=s.memoizedState,R!==c||Y!==P||Gt.current||ti?(typeof X=="function"&&(Bh(s,a,X,c),P=s.memoizedState),(R=ti||Nm(s,a,R,c,Y,P,$))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=P),v.props=c,v.state=P,v.context=$,c=R):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,om(n,s),R=s.memoizedProps,$=s.type===s.elementType?R:Dn(s.type,R),v.props=$,J=s.pendingProps,Y=v.context,P=a.contextType,typeof P=="object"&&P!==null?P=yn(P):(P=Qt(a)?Qi:Vt.current,P=Js(s,P));var ie=a.getDerivedStateFromProps;(X=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==J||Y!==P)&&Vm(s,v,c,P),ti=!1,Y=s.memoizedState,v.state=Y,lu(s,c,v,f);var ue=s.memoizedState;R!==J||Y!==ue||Gt.current||ti?(typeof ie=="function"&&(Bh(s,a,ie,c),ue=s.memoizedState),($=ti||Nm(s,a,$,c,Y,ue,P)||!1)?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ue,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ue,P)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ue),v.props=c,v.state=ue,v.context=P,c=$):(typeof v.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),c=!1)}return Kh(n,s,a,c,g,f)}function Kh(n,s,a,c,f,g){$m(n,s);var v=(s.flags&128)!==0;if(!c&&!v)return f&&Qp(s,a,!1),Rr(n,s,g);c=s.stateNode,Tw.current=s;var R=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&v?(s.child=no(s,n.child,null,g),s.child=no(s,null,R,g)):$t(n,s,R,g),s.memoizedState=c.state,f&&Qp(s,a,!0),s.child}function Wm(n){var s=n.stateNode;s.pendingContext?Kp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Kp(n,s.context,!1),xh(n,s.containerInfo)}function Hm(n,s,a,c,f){return to(),Ih(f),s.flags|=256,$t(n,s,a,c),s.child}var Gh={dehydrated:null,treeContext:null,retryLane:0};function Qh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Km(n,s,a){var c=s.pendingProps,f=Je.current,g=!1,v=(s.flags&128)!==0,R;if((R=v)||(R=n!==null&&n.memoizedState===null?!1:(f&2)!==0),R?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),We(Je,f&1),n===null)return Th(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(v=c.children,n=c.fallback,g?(c=s.mode,g=s.child,v={mode:"hidden",children:v},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=v):g=ku(v,c,0,null),n=ss(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Qh(a),s.memoizedState=Gh,n):Yh(s,v));if(f=n.memoizedState,f!==null&&(R=f.dehydrated,R!==null))return Iw(n,s,v,c,R,f,a);if(g){g=c.fallback,v=s.mode,f=n.child,R=f.sibling;var P={mode:"hidden",children:c.children};return!(v&1)&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=P,s.deletions=null):(c=li(f,P),c.subtreeFlags=f.subtreeFlags&14680064),R!==null?g=li(R,g):(g=ss(g,v,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,v=n.child.memoizedState,v=v===null?Qh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~a,s.memoizedState=Gh,c}return g=n.child,n=g.sibling,c=li(g,{mode:"visible",children:c.children}),!(s.mode&1)&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Yh(n,s){return s=ku({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function gu(n,s,a,c){return c!==null&&Ih(c),no(s,n.child,null,a),n=Yh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Iw(n,s,a,c,f,g,v){if(a)return s.flags&256?(s.flags&=-257,c=qh(Error(t(422))),gu(n,s,v,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=ku({mode:"visible",children:c.children},f,0,null),g=ss(g,f,v,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,s.mode&1&&no(s,n.child,null,v),s.child.memoizedState=Qh(v),s.memoizedState=Gh,g);if(!(s.mode&1))return gu(n,s,v,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var R=c.dgst;return c=R,g=Error(t(419)),c=qh(g,c,void 0),gu(n,s,v,c)}if(R=(v&n.childLanes)!==0,Yt||R){if(c=wt,c!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(c.suspendedLanes|v)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Ir(n,f),On(c,n,f,-1))}return dd(),c=qh(Error(t(421))),gu(n,s,v,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=bw.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,ln=Xr(f.nextSibling),an=s,Ye=!0,Nn=null,n!==null&&(mn[gn++]=wr,mn[gn++]=Tr,mn[gn++]=Yi,wr=n.id,Tr=n.overflow,Yi=s),s=Yh(s,c.children),s.flags|=4096,s)}function Gm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ch(n.return,s,a)}function Xh(n,s,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Qm(n,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if($t(n,s,c.children,a),c=Je.current,c&2)c=c&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gm(n,a,s);else if(n.tag===19)Gm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(We(Je,c),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&uu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Xh(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&uu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Xh(s,!0,a,null,g);break;case"together":Xh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function yu(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Rr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ts|=s.lanes,!(a&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=li(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=li(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Sw(n,s,a){switch(s.tag){case 3:Wm(s),to();break;case 5:um(s);break;case 1:Qt(s.type)&&Zl(s);break;case 4:xh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;We(su,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(We(Je,Je.current&1),s.flags|=128,null):a&s.child.childLanes?Km(n,s,a):(We(Je,Je.current&1),n=Rr(n,s,a),n!==null?n.sibling:null);We(Je,Je.current&1);break;case 19:if(c=(a&s.childLanes)!==0,n.flags&128){if(c)return Qm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(Je,Je.current),c)break;return null;case 22:case 23:return s.lanes=0,Bm(n,s,a)}return Rr(n,s,a)}var Ym,Jh,Xm,Jm;Ym=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Jh=function(){},Xm=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Zi(Xn.current);var g=null;switch(a){case"input":f=Di(n,f),c=Di(n,c),g=[];break;case"select":f=se({},f,{value:void 0}),c=se({},c,{value:void 0}),g=[];break;case"textarea":f=qo(n,f),c=qo(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Yl)}Yo(a,c);var v;a=null;for($ in f)if(!c.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var R=f[$];for(v in R)R.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in c){var P=c[$];if(R=f!=null?f[$]:void 0,c.hasOwnProperty($)&&P!==R&&(P!=null||R!=null))if($==="style")if(R){for(v in R)!R.hasOwnProperty(v)||P&&P.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in P)P.hasOwnProperty(v)&&R[v]!==P[v]&&(a||(a={}),a[v]=P[v])}else a||(g||(g=[]),g.push($,a)),a=P;else $==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,R=R?R.__html:void 0,P!=null&&R!==P&&(g=g||[]).push($,P)):$==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push($,""+P):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(P!=null&&$==="onScroll"&&He("scroll",n),g||R===P||(g=[])):(g=g||[]).push($,P))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},Jm=function(n,s,a,c){a!==c&&(s.flags|=4)};function xa(n,s){if(!Ye)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Rw(n,s,a){var c=s.pendingProps;switch(Eh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(s),null;case 1:return Qt(s.type)&&Jl(),Ot(s),null;case 3:return c=s.stateNode,so(),Ke(Gt),Ke(Vt),Vh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(ru(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Nn!==null&&(ud(Nn),Nn=null))),Jh(n,s),Ot(s),null;case 5:Nh(s);var f=Zi(Ra.current);if(a=s.type,n!==null&&s.stateNode!=null)Xm(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ot(s),null}if(n=Zi(Xn.current),ru(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[Yn]=s,c[Ea]=g,n=(s.mode&1)!==0,a){case"dialog":He("cancel",c),He("close",c);break;case"iframe":case"object":case"embed":He("load",c);break;case"video":case"audio":for(f=0;f<ya.length;f++)He(ya[f],c);break;case"source":He("error",c);break;case"img":case"image":case"link":He("error",c),He("load",c);break;case"details":He("toggle",c);break;case"input":Es(c,g),He("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},He("invalid",c);break;case"textarea":Ts(c,g),He("invalid",c)}Yo(a,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var R=g[v];v==="children"?typeof R=="string"?c.textContent!==R&&(g.suppressHydrationWarning!==!0&&Ql(c.textContent,R,n),f=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&Ql(c.textContent,R,n),f=["children",""+R]):o.hasOwnProperty(v)&&R!=null&&v==="onScroll"&&He("scroll",c)}switch(a){case"input":ur(c),wl(c,g,!0);break;case"textarea":ur(c),Wo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Yl)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=dt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Yn]=s,n[Ea]=c,Ym(n,s,!1,!1),s.stateNode=n;e:{switch(v=Xo(a,c),a){case"dialog":He("cancel",n),He("close",n),f=c;break;case"iframe":case"object":case"embed":He("load",n),f=c;break;case"video":case"audio":for(f=0;f<ya.length;f++)He(ya[f],n);f=c;break;case"source":He("error",n),f=c;break;case"img":case"image":case"link":He("error",n),He("load",n),f=c;break;case"details":He("toggle",n),f=c;break;case"input":Es(n,c),f=Di(n,c),He("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=se({},c,{value:void 0}),He("invalid",n);break;case"textarea":Ts(n,c),f=qo(n,c),He("invalid",n);break;default:f=c}Yo(a,f),R=f;for(g in R)if(R.hasOwnProperty(g)){var P=R[g];g==="style"?Go(n,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Ho(n,P)):g==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&jr(n,P):typeof P=="number"&&jr(n,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?P!=null&&g==="onScroll"&&He("scroll",n):P!=null&&Z(n,g,P,v))}switch(a){case"input":ur(n),wl(n,c,!1);break;case"textarea":ur(n),Wo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?hr(n,!!c.multiple,g,!1):c.defaultValue!=null&&hr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Yl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ot(s),null;case 6:if(n&&s.stateNode!=null)Jm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Zi(Ra.current),Zi(Xn.current),ru(s)){if(c=s.stateNode,a=s.memoizedProps,c[Yn]=s,(g=c.nodeValue!==a)&&(n=an,n!==null))switch(n.tag){case 3:Ql(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ql(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Yn]=s,s.stateNode=c}return Ot(s),null;case 13:if(Ke(Je),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&ln!==null&&s.mode&1&&!(s.flags&128))tm(),to(),s.flags|=98560,g=!1;else if(g=ru(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Yn]=s}else to(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ot(s),g=!1}else Nn!==null&&(ud(Nn),Nn=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,s.mode&1&&(n===null||Je.current&1?gt===0&&(gt=3):dd())),s.updateQueue!==null&&(s.flags|=4),Ot(s),null);case 4:return so(),Jh(n,s),n===null&&_a(s.stateNode.containerInfo),Ot(s),null;case 10:return Ah(s.type._context),Ot(s),null;case 17:return Qt(s.type)&&Jl(),Ot(s),null;case 19:if(Ke(Je),g=s.memoizedState,g===null)return Ot(s),null;if(c=(s.flags&128)!==0,v=g.rendering,v===null)if(c)xa(g,!1);else{if(gt!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(v=uu(n),v!==null){for(s.flags|=128,xa(g,!1),c=v.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(Je,Je.current&1|2),s.child}n=n.sibling}g.tail!==null&&qe()>uo&&(s.flags|=128,c=!0,xa(g,!1),s.lanes=4194304)}else{if(!c)if(n=uu(v),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),xa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Ye)return Ot(s),null}else 2*qe()-g.renderingStartTime>uo&&a!==1073741824&&(s.flags|=128,c=!0,xa(g,!1),s.lanes=4194304);g.isBackwards?(v.sibling=s.child,s.child=v):(a=g.last,a!==null?a.sibling=v:s.child=v,g.last=v)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=qe(),s.sibling=null,a=Je.current,We(Je,c?a&1|2:a&1),s):(Ot(s),null);case 22:case 23:return hd(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&s.mode&1?un&1073741824&&(Ot(s),s.subtreeFlags&6&&(s.flags|=8192)):Ot(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Aw(n,s){switch(Eh(s),s.tag){case 1:return Qt(s.type)&&Jl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return so(),Ke(Gt),Ke(Vt),Vh(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Nh(s),null;case 13:if(Ke(Je),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));to()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ke(Je),null;case 4:return so(),null;case 10:return Ah(s.type._context),null;case 22:case 23:return hd(),null;case 24:return null;default:return null}}var _u=!1,bt=!1,Cw=typeof WeakSet=="function"?WeakSet:Set,le=null;function ao(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){tt(n,s,c)}else a.current=null}function Zh(n,s,a){try{a()}catch(c){tt(n,s,c)}}var Zm=!1;function Pw(n,s){if(hh=Gr,n=Np(),rh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var v=0,R=-1,P=-1,$=0,X=0,J=n,Y=null;t:for(;;){for(var ie;J!==a||f!==0&&J.nodeType!==3||(R=v+f),J!==g||c!==0&&J.nodeType!==3||(P=v+c),J.nodeType===3&&(v+=J.nodeValue.length),(ie=J.firstChild)!==null;)Y=J,J=ie;for(;;){if(J===n)break t;if(Y===a&&++$===f&&(R=v),Y===g&&++X===c&&(P=v),(ie=J.nextSibling)!==null)break;J=Y,Y=J.parentNode}J=ie}a=R===-1||P===-1?null:{start:R,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(dh={focusedElem:n,selectionRange:a},Gr=!1,le=s;le!==null;)if(s=le,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,le=n;else for(;le!==null;){s=le;try{var ue=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,it=ue.memoizedState,j=s.stateNode,V=j.getSnapshotBeforeUpdate(s.elementType===s.type?ce:Dn(s.type,ce),it);j.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){tt(s,s.return,ee)}if(n=s.sibling,n!==null){n.return=s.return,le=n;break}le=s.return}return ue=Zm,Zm=!1,ue}function Na(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&Zh(s,a,g)}f=f.next}while(f!==c)}}function vu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function ed(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function eg(n){var s=n.alternate;s!==null&&(n.alternate=null,eg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Yn],delete s[Ea],delete s[gh],delete s[cw],delete s[hw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function tg(n){return n.tag===5||n.tag===3||n.tag===4}function ng(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function td(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Yl));else if(c!==4&&(n=n.child,n!==null))for(td(n,s,a),n=n.sibling;n!==null;)td(n,s,a),n=n.sibling}function nd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(nd(n,s,a),n=n.sibling;n!==null;)nd(n,s,a),n=n.sibling}var At=null,Vn=!1;function ri(n,s,a){for(a=a.child;a!==null;)rg(n,s,a),a=a.sibling}function rg(n,s,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(zi,a)}catch{}switch(a.tag){case 5:bt||ao(a,s);case 6:var c=At,f=Vn;At=null,ri(n,s,a),At=c,Vn=f,At!==null&&(Vn?(n=At,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):At.removeChild(a.stateNode));break;case 18:At!==null&&(Vn?(n=At,a=a.stateNode,n.nodeType===8?mh(n.parentNode,a):n.nodeType===1&&mh(n,a),Pn(n)):mh(At,a.stateNode));break;case 4:c=At,f=Vn,At=a.stateNode.containerInfo,Vn=!0,ri(n,s,a),At=c,Vn=f;break;case 0:case 11:case 14:case 15:if(!bt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&(g&2||g&4)&&Zh(a,s,v),f=f.next}while(f!==c)}ri(n,s,a);break;case 1:if(!bt&&(ao(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){tt(a,s,R)}ri(n,s,a);break;case 21:ri(n,s,a);break;case 22:a.mode&1?(bt=(c=bt)||a.memoizedState!==null,ri(n,s,a),bt=c):ri(n,s,a);break;default:ri(n,s,a)}}function ig(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Cw),s.forEach(function(c){var f=Mw.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Ln(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,v=s,R=v;e:for(;R!==null;){switch(R.tag){case 5:At=R.stateNode,Vn=!1;break e;case 3:At=R.stateNode.containerInfo,Vn=!0;break e;case 4:At=R.stateNode.containerInfo,Vn=!0;break e}R=R.return}if(At===null)throw Error(t(160));rg(g,v,f),At=null,Vn=!1;var P=f.alternate;P!==null&&(P.return=null),f.return=null}catch($){tt(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)sg(s,n),s=s.sibling}function sg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ln(s,n),Zn(n),c&4){try{Na(3,n,n.return),vu(3,n)}catch(ce){tt(n,n.return,ce)}try{Na(5,n,n.return)}catch(ce){tt(n,n.return,ce)}}break;case 1:Ln(s,n),Zn(n),c&512&&a!==null&&ao(a,a.return);break;case 5:if(Ln(s,n),Zn(n),c&512&&a!==null&&ao(a,a.return),n.flags&32){var f=n.stateNode;try{jr(f,"")}catch(ce){tt(n,n.return,ce)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,v=a!==null?a.memoizedProps:g,R=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&Bo(f,g),Xo(R,v);var $=Xo(R,g);for(v=0;v<P.length;v+=2){var X=P[v],J=P[v+1];X==="style"?Go(f,J):X==="dangerouslySetInnerHTML"?Ho(f,J):X==="children"?jr(f,J):Z(f,X,J,$)}switch(R){case"input":$o(f,g);break;case"textarea":Is(f,g);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ie=g.value;ie!=null?hr(f,!!g.multiple,ie,!1):Y!==!!g.multiple&&(g.defaultValue!=null?hr(f,!!g.multiple,g.defaultValue,!0):hr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ea]=g}catch(ce){tt(n,n.return,ce)}}break;case 6:if(Ln(s,n),Zn(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ce){tt(n,n.return,ce)}}break;case 3:if(Ln(s,n),Zn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Pn(s.containerInfo)}catch(ce){tt(n,n.return,ce)}break;case 4:Ln(s,n),Zn(n);break;case 13:Ln(s,n),Zn(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(sd=qe())),c&4&&ig(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(bt=($=bt)||X,Ln(s,n),bt=$):Ln(s,n),Zn(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!X&&n.mode&1)for(le=n,X=n.child;X!==null;){for(J=le=X;le!==null;){switch(Y=le,ie=Y.child,Y.tag){case 0:case 11:case 14:case 15:Na(4,Y,Y.return);break;case 1:ao(Y,Y.return);var ue=Y.stateNode;if(typeof ue.componentWillUnmount=="function"){c=Y,a=Y.return;try{s=c,ue.props=s.memoizedProps,ue.state=s.memoizedState,ue.componentWillUnmount()}catch(ce){tt(c,a,ce)}}break;case 5:ao(Y,Y.return);break;case 22:if(Y.memoizedState!==null){lg(J);continue}}ie!==null?(ie.return=Y,le=ie):lg(J)}X=X.sibling}e:for(X=null,J=n;;){if(J.tag===5){if(X===null){X=J;try{f=J.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=J.stateNode,P=J.memoizedProps.style,v=P!=null&&P.hasOwnProperty("display")?P.display:null,R.style.display=Ko("display",v))}catch(ce){tt(n,n.return,ce)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=$?"":J.memoizedProps}catch(ce){tt(n,n.return,ce)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Ln(s,n),Zn(n),c&4&&ig(n);break;case 21:break;default:Ln(s,n),Zn(n)}}function Zn(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(tg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(jr(f,""),c.flags&=-33);var g=ng(n);nd(n,g,f);break;case 3:case 4:var v=c.stateNode.containerInfo,R=ng(n);td(n,R,v);break;default:throw Error(t(161))}}catch(P){tt(n,n.return,P)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function kw(n,s,a){le=n,og(n)}function og(n,s,a){for(var c=(n.mode&1)!==0;le!==null;){var f=le,g=f.child;if(f.tag===22&&c){var v=f.memoizedState!==null||_u;if(!v){var R=f.alternate,P=R!==null&&R.memoizedState!==null||bt;R=_u;var $=bt;if(_u=v,(bt=P)&&!$)for(le=f;le!==null;)v=le,P=v.child,v.tag===22&&v.memoizedState!==null?ug(f):P!==null?(P.return=v,le=P):ug(f);for(;g!==null;)le=g,og(g),g=g.sibling;le=f,_u=R,bt=$}ag(n)}else f.subtreeFlags&8772&&g!==null?(g.return=f,le=g):ag(n)}}function ag(n){for(;le!==null;){var s=le;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:bt||vu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!bt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Dn(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&lm(s,g,c);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}lm(s,v,a)}break;case 5:var R=s.stateNode;if(a===null&&s.flags&4){a=R;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var X=$.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&Pn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bt||s.flags&512&&ed(s)}catch(Y){tt(s,s.return,Y)}}if(s===n){le=null;break}if(a=s.sibling,a!==null){a.return=s.return,le=a;break}le=s.return}}function lg(n){for(;le!==null;){var s=le;if(s===n){le=null;break}var a=s.sibling;if(a!==null){a.return=s.return,le=a;break}le=s.return}}function ug(n){for(;le!==null;){var s=le;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{vu(4,s)}catch(P){tt(s,a,P)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(P){tt(s,f,P)}}var g=s.return;try{ed(s)}catch(P){tt(s,g,P)}break;case 5:var v=s.return;try{ed(s)}catch(P){tt(s,v,P)}}}catch(P){tt(s,s.return,P)}if(s===n){le=null;break}var R=s.sibling;if(R!==null){R.return=s.return,le=R;break}le=s.return}}var xw=Math.ceil,Eu=de.ReactCurrentDispatcher,rd=de.ReactCurrentOwner,vn=de.ReactCurrentBatchConfig,Oe=0,wt=null,at=null,Ct=0,un=0,lo=Jr(0),gt=0,Da=null,ts=0,wu=0,id=0,Va=null,Xt=null,sd=0,uo=1/0,Ar=null,Tu=!1,od=null,ii=null,Iu=!1,si=null,Su=0,La=0,ad=null,Ru=-1,Au=0;function qt(){return Oe&6?qe():Ru!==-1?Ru:Ru=qe()}function oi(n){return n.mode&1?Oe&2&&Ct!==0?Ct&-Ct:fw.transition!==null?(Au===0&&(Au=$i()),Au):(n=xe,n!==0||(n=window.event,n=n===void 0?16:la(n.type)),n):1}function On(n,s,a,c){if(50<La)throw La=0,ad=null,Error(t(185));qr(n,a,c),(!(Oe&2)||n!==wt)&&(n===wt&&(!(Oe&2)&&(wu|=a),gt===4&&ai(n,Ct)),Jt(n,c),a===1&&Oe===0&&!(s.mode&1)&&(uo=qe()+500,eu&&ei()))}function Jt(n,s){var a=n.callbackNode;pr(n,s);var c=Bi(n,n===wt?Ct:0);if(c===0)a!==null&&ra(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&ra(a),s===1)n.tag===0?dw(hg.bind(null,n)):Yp(hg.bind(null,n)),lw(function(){!(Oe&6)&&ei()}),a=null;else{switch(Hr(c)){case 1:a=ji;break;case 4:a=zr;break;case 16:a=dn;break;case 536870912:a=Al;break;default:a=dn}a=vg(a,cg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function cg(n,s){if(Ru=-1,Au=0,Oe&6)throw Error(t(327));var a=n.callbackNode;if(co()&&n.callbackNode!==a)return null;var c=Bi(n,n===wt?Ct:0);if(c===0)return null;if(c&30||c&n.expiredLanes||s)s=Cu(n,c);else{s=c;var f=Oe;Oe|=2;var g=fg();(wt!==n||Ct!==s)&&(Ar=null,uo=qe()+500,rs(n,s));do try{Vw();break}catch(R){dg(n,R)}while(!0);Rh(),Eu.current=g,Oe=f,at!==null?s=0:(wt=null,Ct=0,s=gt)}if(s!==0){if(s===2&&(f=rn(n),f!==0&&(c=f,s=ld(n,f))),s===1)throw a=Da,rs(n,0),ai(n,c),Jt(n,qe()),a;if(s===6)ai(n,c);else{if(f=n.current.alternate,!(c&30)&&!Nw(f)&&(s=Cu(n,c),s===2&&(g=rn(n),g!==0&&(c=g,s=ld(n,g))),s===1))throw a=Da,rs(n,0),ai(n,c),Jt(n,qe()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:is(n,Xt,Ar);break;case 3:if(ai(n,c),(c&130023424)===c&&(s=sd+500-qe(),10<s)){if(Bi(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){qt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=ph(is.bind(null,n,Xt,Ar),s);break}is(n,Xt,Ar);break;case 4:if(ai(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var v=31-zt(c);g=1<<v,v=s[v],v>f&&(f=v),c&=~g}if(c=f,c=qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*xw(c/1960))-c,10<c){n.timeoutHandle=ph(is.bind(null,n,Xt,Ar),c);break}is(n,Xt,Ar);break;case 5:is(n,Xt,Ar);break;default:throw Error(t(329))}}}return Jt(n,qe()),n.callbackNode===a?cg.bind(null,n):null}function ld(n,s){var a=Va;return n.current.memoizedState.isDehydrated&&(rs(n,s).flags|=256),n=Cu(n,s),n!==2&&(s=Xt,Xt=a,s!==null&&ud(s)),n}function ud(n){Xt===null?Xt=n:Xt.push.apply(Xt,n)}function Nw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!xn(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ai(n,s){for(s&=~id,s&=~wu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-zt(s),c=1<<a;n[a]=-1,s&=~c}}function hg(n){if(Oe&6)throw Error(t(327));co();var s=Bi(n,0);if(!(s&1))return Jt(n,qe()),null;var a=Cu(n,s);if(n.tag!==0&&a===2){var c=rn(n);c!==0&&(s=c,a=ld(n,c))}if(a===1)throw a=Da,rs(n,0),ai(n,s),Jt(n,qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,is(n,Xt,Ar),Jt(n,qe()),null}function cd(n,s){var a=Oe;Oe|=1;try{return n(s)}finally{Oe=a,Oe===0&&(uo=qe()+500,eu&&ei())}}function ns(n){si!==null&&si.tag===0&&!(Oe&6)&&co();var s=Oe;Oe|=1;var a=vn.transition,c=xe;try{if(vn.transition=null,xe=1,n)return n()}finally{xe=c,vn.transition=a,Oe=s,!(Oe&6)&&ei()}}function hd(){un=lo.current,Ke(lo)}function rs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,aw(a)),at!==null)for(a=at.return;a!==null;){var c=a;switch(Eh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Jl();break;case 3:so(),Ke(Gt),Ke(Vt),Vh();break;case 5:Nh(c);break;case 4:so();break;case 13:Ke(Je);break;case 19:Ke(Je);break;case 10:Ah(c.type._context);break;case 22:case 23:hd()}a=a.return}if(wt=n,at=n=li(n.current,null),Ct=un=s,gt=0,Da=null,id=wu=ts=0,Xt=Va=null,Ji!==null){for(s=0;s<Ji.length;s++)if(a=Ji[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var v=g.next;g.next=f,c.next=v}a.pending=c}Ji=null}return n}function dg(n,s){do{var a=at;try{if(Rh(),cu.current=pu,hu){for(var c=Ze.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}hu=!1}if(es=0,Et=mt=Ze=null,Aa=!1,Ca=0,rd.current=null,a===null||a.return===null){gt=1,Da=s,at=null;break}e:{var g=n,v=a.return,R=a,P=s;if(s=Ct,R.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var $=P,X=R,J=X.tag;if(!(X.mode&1)&&(J===0||J===11||J===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var ie=Mm(v);if(ie!==null){ie.flags&=-257,Fm(ie,v,R,g,s),ie.mode&1&&bm(g,$,s),s=ie,P=$;var ue=s.updateQueue;if(ue===null){var ce=new Set;ce.add(P),s.updateQueue=ce}else ue.add(P);break e}else{if(!(s&1)){bm(g,$,s),dd();break e}P=Error(t(426))}}else if(Ye&&R.mode&1){var it=Mm(v);if(it!==null){!(it.flags&65536)&&(it.flags|=256),Fm(it,v,R,g,s),Ih(oo(P,R));break e}}g=P=oo(P,R),gt!==4&&(gt=2),Va===null?Va=[g]:Va.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var j=Lm(g,P,s);am(g,j);break e;case 1:R=P;var V=g.type,B=g.stateNode;if(!(g.flags&128)&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(ii===null||!ii.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var ee=Om(g,R,s);am(g,ee);break e}}g=g.return}while(g!==null)}mg(a)}catch(he){s=he,at===a&&a!==null&&(at=a=a.return);continue}break}while(!0)}function fg(){var n=Eu.current;return Eu.current=pu,n===null?pu:n}function dd(){(gt===0||gt===3||gt===2)&&(gt=4),wt===null||!(ts&268435455)&&!(wu&268435455)||ai(wt,Ct)}function Cu(n,s){var a=Oe;Oe|=2;var c=fg();(wt!==n||Ct!==s)&&(Ar=null,rs(n,s));do try{Dw();break}catch(f){dg(n,f)}while(!0);if(Rh(),Oe=a,Eu.current=c,at!==null)throw Error(t(261));return wt=null,Ct=0,gt}function Dw(){for(;at!==null;)pg(at)}function Vw(){for(;at!==null&&!Sl();)pg(at)}function pg(n){var s=_g(n.alternate,n,un);n.memoizedProps=n.pendingProps,s===null?mg(n):at=s,rd.current=null}function mg(n){var s=n;do{var a=s.alternate;if(n=s.return,s.flags&32768){if(a=Aw(a,s),a!==null){a.flags&=32767,at=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{gt=6,at=null;return}}else if(a=Rw(a,s,un),a!==null){at=a;return}if(s=s.sibling,s!==null){at=s;return}at=s=n}while(s!==null);gt===0&&(gt=5)}function is(n,s,a){var c=xe,f=vn.transition;try{vn.transition=null,xe=1,Lw(n,s,a,c)}finally{vn.transition=f,xe=c}return null}function Lw(n,s,a,c){do co();while(si!==null);if(Oe&6)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(Be(n,g),n===wt&&(at=wt=null,Ct=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Iu||(Iu=!0,vg(dn,function(){return co(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=vn.transition,vn.transition=null;var v=xe;xe=1;var R=Oe;Oe|=4,rd.current=null,Pw(n,a),sg(a,n),ew(dh),Gr=!!hh,dh=hh=null,n.current=a,kw(a),Qc(),Oe=R,xe=v,vn.transition=g}else n.current=a;if(Iu&&(Iu=!1,si=n,Su=f),g=n.pendingLanes,g===0&&(ii=null),Cl(a.stateNode),Jt(n,qe()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Tu)throw Tu=!1,n=od,od=null,n;return Su&1&&n.tag!==0&&co(),g=n.pendingLanes,g&1?n===ad?La++:(La=0,ad=n):La=0,ei(),null}function co(){if(si!==null){var n=Hr(Su),s=vn.transition,a=xe;try{if(vn.transition=null,xe=16>n?16:n,si===null)var c=!1;else{if(n=si,si=null,Su=0,Oe&6)throw Error(t(331));var f=Oe;for(Oe|=4,le=n.current;le!==null;){var g=le,v=g.child;if(le.flags&16){var R=g.deletions;if(R!==null){for(var P=0;P<R.length;P++){var $=R[P];for(le=$;le!==null;){var X=le;switch(X.tag){case 0:case 11:case 15:Na(8,X,g)}var J=X.child;if(J!==null)J.return=X,le=J;else for(;le!==null;){X=le;var Y=X.sibling,ie=X.return;if(eg(X),X===$){le=null;break}if(Y!==null){Y.return=ie,le=Y;break}le=ie}}}var ue=g.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var it=ce.sibling;ce.sibling=null,ce=it}while(ce!==null)}}le=g}}if(g.subtreeFlags&2064&&v!==null)v.return=g,le=v;else e:for(;le!==null;){if(g=le,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Na(9,g,g.return)}var j=g.sibling;if(j!==null){j.return=g.return,le=j;break e}le=g.return}}var V=n.current;for(le=V;le!==null;){v=le;var B=v.child;if(v.subtreeFlags&2064&&B!==null)B.return=v,le=B;else e:for(v=V;le!==null;){if(R=le,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:vu(9,R)}}catch(he){tt(R,R.return,he)}if(R===v){le=null;break e}var ee=R.sibling;if(ee!==null){ee.return=R.return,le=ee;break e}le=R.return}}if(Oe=f,ei(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(zi,n)}catch{}c=!0}return c}finally{xe=a,vn.transition=s}}return!1}function gg(n,s,a){s=oo(a,s),s=Lm(n,s,1),n=ni(n,s,1),s=qt(),n!==null&&(qr(n,1,s),Jt(n,s))}function tt(n,s,a){if(n.tag===3)gg(n,n,a);else for(;s!==null;){if(s.tag===3){gg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ii===null||!ii.has(c))){n=oo(a,n),n=Om(s,n,1),s=ni(s,n,1),n=qt(),s!==null&&(qr(s,1,n),Jt(s,n));break}}s=s.return}}function Ow(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=qt(),n.pingedLanes|=n.suspendedLanes&a,wt===n&&(Ct&a)===a&&(gt===4||gt===3&&(Ct&130023424)===Ct&&500>qe()-sd?rs(n,0):id|=a),Jt(n,s)}function yg(n,s){s===0&&(n.mode&1?(s=Vs,Vs<<=1,!(Vs&130023424)&&(Vs=4194304)):s=1);var a=qt();n=Ir(n,s),n!==null&&(qr(n,s,a),Jt(n,a))}function bw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),yg(n,a)}function Mw(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),yg(n,a)}var _g;_g=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Gt.current)Yt=!0;else{if(!(n.lanes&a)&&!(s.flags&128))return Yt=!1,Sw(n,s,a);Yt=!!(n.flags&131072)}else Yt=!1,Ye&&s.flags&1048576&&Xp(s,nu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;yu(n,s),n=s.pendingProps;var f=Js(s,Vt.current);io(s,a),f=bh(null,s,c,n,f,a);var g=Mh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Qt(c)?(g=!0,Zl(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,kh(s),f.updater=mu,s.stateNode=f,f._reactInternals=s,$h(s,c,n,a),s=Kh(null,s,c,!0,g,a)):(s.tag=0,Ye&&g&&vh(s),$t(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(yu(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=Uw(c),n=Dn(c,n),f){case 0:s=Hh(null,s,c,n,a);break e;case 1:s=qm(null,s,c,n,a);break e;case 11:s=Um(null,s,c,n,a);break e;case 14:s=jm(null,s,c,Dn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Dn(c,f),Hh(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Dn(c,f),qm(n,s,c,f,a);case 3:e:{if(Wm(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,om(n,s),lu(s,c,null,a);var v=s.memoizedState;if(c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=oo(Error(t(423)),s),s=Hm(n,s,c,a,f);break e}else if(c!==f){f=oo(Error(t(424)),s),s=Hm(n,s,c,a,f);break e}else for(ln=Xr(s.stateNode.containerInfo.firstChild),an=s,Ye=!0,Nn=null,a=im(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(to(),c===f){s=Rr(n,s,a);break e}$t(n,s,c,a)}s=s.child}return s;case 5:return um(s),n===null&&Th(s),c=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,v=f.children,fh(c,f)?v=null:g!==null&&fh(c,g)&&(s.flags|=32),$m(n,s),$t(n,s,v,a),s.child;case 6:return n===null&&Th(s),null;case 13:return Km(n,s,a);case 4:return xh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=no(s,null,c,a):$t(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Dn(c,f),Um(n,s,c,f,a);case 7:return $t(n,s,s.pendingProps,a),s.child;case 8:return $t(n,s,s.pendingProps.children,a),s.child;case 12:return $t(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,v=f.value,We(su,c._currentValue),c._currentValue=v,g!==null)if(xn(g.value,v)){if(g.children===f.children&&!Gt.current){s=Rr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var R=g.dependencies;if(R!==null){v=g.child;for(var P=R.firstContext;P!==null;){if(P.context===c){if(g.tag===1){P=Sr(-1,a&-a),P.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var X=$.pending;X===null?P.next=P:(P.next=X.next,X.next=P),$.pending=P}}g.lanes|=a,P=g.alternate,P!==null&&(P.lanes|=a),Ch(g.return,a,s),R.lanes|=a;break}P=P.next}}else if(g.tag===10)v=g.type===s.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=a,R=v.alternate,R!==null&&(R.lanes|=a),Ch(v,a,s),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===s){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}$t(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,io(s,a),f=yn(f),c=c(f),s.flags|=1,$t(n,s,c,a),s.child;case 14:return c=s.type,f=Dn(c,s.pendingProps),f=Dn(c.type,f),jm(n,s,c,f,a);case 15:return zm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Dn(c,f),yu(n,s),s.tag=1,Qt(c)?(n=!0,Zl(s)):n=!1,io(s,a),Dm(s,c,f),$h(s,c,f,a),Kh(null,s,c,!0,n,a);case 19:return Qm(n,s,a);case 22:return Bm(n,s,a)}throw Error(t(156,s.tag))};function vg(n,s){return Ns(n,s)}function Fw(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(n,s,a,c){return new Fw(n,s,a,c)}function fd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Uw(n){if(typeof n=="function")return fd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===Nt)return 14}return 2}function li(n,s){var a=n.alternate;return a===null?(a=En(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Pu(n,s,a,c,f,g){var v=2;if(c=n,typeof n=="function")fd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case N:return ss(a.children,f,g,s);case S:v=8,f|=8;break;case A:return n=En(12,a,s,f|2),n.elementType=A,n.lanes=g,n;case C:return n=En(13,a,s,f),n.elementType=C,n.lanes=g,n;case nt:return n=En(19,a,s,f),n.elementType=nt,n.lanes=g,n;case ze:return ku(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:v=10;break e;case L:v=9;break e;case M:v=11;break e;case Nt:v=14;break e;case Dt:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=En(v,a,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function ss(n,s,a,c){return n=En(7,n,c,s),n.lanes=a,n}function ku(n,s,a,c){return n=En(22,n,c,s),n.elementType=ze,n.lanes=a,n.stateNode={isHidden:!1},n}function pd(n,s,a){return n=En(6,n,null,s),n.lanes=a,n}function md(n,s,a){return s=En(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function jw(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$r(0),this.expirationTimes=$r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function gd(n,s,a,c,f,g,v,R,P){return n=new jw(n,s,a,R,P),s===1?(s=1,g===!0&&(s|=8)):s=0,g=En(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(g),n}function zw(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Eg(n){if(!n)return Zr;n=n._reactInternals;e:{if(In(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Qt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Qt(a))return Gp(n,a,s)}return s}function wg(n,s,a,c,f,g,v,R,P){return n=gd(a,c,!0,n,f,g,v,R,P),n.context=Eg(null),a=n.current,c=qt(),f=oi(a),g=Sr(c,f),g.callback=s??null,ni(a,g,f),n.current.lanes=f,qr(n,f,c),Jt(n,c),n}function xu(n,s,a,c){var f=s.current,g=qt(),v=oi(f);return a=Eg(a),s.context===null?s.context=a:s.pendingContext=a,s=Sr(g,v),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ni(f,s,v),n!==null&&(On(n,f,v,g),au(n,f,v)),v}function Nu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Tg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function yd(n,s){Tg(n,s),(n=n.alternate)&&Tg(n,s)}function Bw(){return null}var Ig=typeof reportError=="function"?reportError:function(n){console.error(n)};function _d(n){this._internalRoot=n}Du.prototype.render=_d.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));xu(n,s,null,null)},Du.prototype.unmount=_d.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ns(function(){xu(null,n,null,null)}),s[vr]=null}};function Du(n){this._internalRoot=n}Du.prototype.unstable_scheduleHydration=function(n){if(n){var s=Dl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Hn.length&&s!==0&&s<Hn[a].priority;a++);Hn.splice(a,0,n),a===0&&Ol(n)}};function vd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Vu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Sg(){}function $w(n,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var $=Nu(v);g.call($)}}var v=wg(s,c,n,0,null,!1,!1,"",Sg);return n._reactRootContainer=v,n[vr]=v.current,_a(n.nodeType===8?n.parentNode:n),ns(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var R=c;c=function(){var $=Nu(P);R.call($)}}var P=gd(n,0,!1,null,null,!1,!1,"",Sg);return n._reactRootContainer=P,n[vr]=P.current,_a(n.nodeType===8?n.parentNode:n),ns(function(){xu(s,P,a,c)}),P}function Lu(n,s,a,c,f){var g=a._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var R=f;f=function(){var P=Nu(v);R.call(P)}}xu(s,v,n,f)}else v=$w(a,s,n,f,c);return Nu(v)}xl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Br(s.pendingLanes);a!==0&&(Wr(s,a|1),Jt(s,qe()),!(Oe&6)&&(uo=qe()+500,ei()))}break;case 13:ns(function(){var c=Ir(n,1);if(c!==null){var f=qt();On(c,n,1,f)}}),yd(n,1)}},Ls=function(n){if(n.tag===13){var s=Ir(n,134217728);if(s!==null){var a=qt();On(s,n,134217728,a)}yd(n,134217728)}},Nl=function(n){if(n.tag===13){var s=oi(n),a=Ir(n,s);if(a!==null){var c=qt();On(a,n,s,c)}yd(n,s)}},Dl=function(){return xe},Vl=function(n,s){var a=xe;try{return xe=n,s()}finally{xe=a}},Rs=function(n,s,a){switch(s){case"input":if($o(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=Xl(c);if(!f)throw Error(t(90));vs(c),$o(c,f)}}}break;case"textarea":Is(n,a);break;case"select":s=a.value,s!=null&&hr(n,!!a.multiple,s,!1)}},bi=cd,Zo=ns;var qw={usingClientEntryPoint:!1,Events:[wa,Ys,Xl,qn,Jo,cd]},Oa={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ww={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=na(n),n===null?null:n.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance||Bw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{zi=Ou.inject(Ww),nn=Ou}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qw,Zt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(s))throw Error(t(200));return zw(n,s,null,a)},Zt.createRoot=function(n,s){if(!vd(n))throw Error(t(299));var a=!1,c="",f=Ig;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=gd(n,1,!1,null,null,a,!1,c,f),n[vr]=s.current,_a(n.nodeType===8?n.parentNode:n),new _d(s)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=na(s),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return ns(n)},Zt.hydrate=function(n,s,a){if(!Vu(s))throw Error(t(200));return Lu(null,n,s,!0,a)},Zt.hydrateRoot=function(n,s,a){if(!vd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",v=Ig;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=wg(s,null,n,1,a??null,f,!1,g,v),n[vr]=s.current,_a(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Du(s)},Zt.render=function(n,s,a){if(!Vu(s))throw Error(t(200));return Lu(null,n,s,!1,a)},Zt.unmountComponentAtNode=function(n){if(!Vu(n))throw Error(t(40));return n._reactRootContainer?(ns(function(){Lu(null,null,n,!1,function(){n._reactRootContainer=null,n[vr]=null})}),!0):!1},Zt.unstable_batchedUpdates=cd,Zt.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Vu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Lu(n,s,a,!1,c)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Dg;function Zw(){if(Dg)return Td.exports;Dg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Td.exports=Jw(),Td.exports}var Vg;function eT(){if(Vg)return bu;Vg=1;var r=Zw();return bu.createRoot=r.createRoot,bu.hydrateRoot=r.hydrateRoot,bu}var tT=eT(),Lg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},nT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],d=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},a_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,d=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,E=l>>2,T=(l&3)<<4|d>>4;let I=(d&15)<<2|y>>6,x=y&63;p||(x=64,h||(I=64)),i.push(t[E],t[T],t[I],t[x])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(o_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):nT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||d==null||y==null||T==null)throw new rT;const I=l<<2|d>>4;if(i.push(I),y!==64){const x=d<<4&240|y>>2;if(i.push(x),T!==64){const O=y<<6&192|T;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class rT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iT=function(r){const e=o_(r);return a_.encodeByteArray(e,!0)},rc=function(r){return iT(r).replace(/\./g,"")},l_=function(r){try{return a_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=()=>sT().__FIREBASE_DEFAULTS__,aT=()=>{if(typeof process>"u"||typeof Lg>"u")return;const r=Lg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},lT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&l_(r[1]);return e&&JSON.parse(e)},wc=()=>{try{return oT()||aT()||lT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},u_=r=>{var e,t;return(t=(e=wc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},uT=r=>{const e=u_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},c_=()=>{var r;return(r=wc())===null||r===void 0?void 0:r.config},h_=r=>{var e;return(e=wc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[rc(JSON.stringify(t)),rc(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function fT(){var r;const e=(r=wc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function gT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yT(){const r=jt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function _T(){return!fT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vT(){try{return typeof indexedDB=="object"}catch{return!1}}function ET(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="FirebaseError";class br extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=wT,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?TT(l,i):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new br(o,d,i)}}function TT(r,e){return r.replace(IT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const IT=/\{\$([^}]+)}/g;function ST(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ic(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Og(l)&&Og(h)){if(!ic(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Og(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function za(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ba(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function RT(r,e){const t=new AT(r,e);return t.subscribe.bind(t)}class AT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");CT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Rd),o.error===void 0&&(o.error=Rd),o.complete===void 0&&(o.complete=Rd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Rd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(r){return r&&r._delegate?r._delegate:r}class cs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new cT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xT(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kT(r){return r===ls?void 0:r}function xT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new PT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const DT={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},VT=Pe.INFO,LT={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},OT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=LT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vf{constructor(e){this.name=e,this._logLevel=VT,this._logHandler=OT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const bT=(r,e)=>e.some(t=>r instanceof t);let bg,Mg;function MT(){return bg||(bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FT(){return Mg||(Mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d_=new WeakMap,$d=new WeakMap,f_=new WeakMap,Ad=new WeakMap,Ef=new WeakMap;function UT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(yi(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&d_.set(t,r)}).catch(()=>{}),Ef.set(e,r),e}function jT(r){if($d.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});$d.set(r,e)}let qd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return $d.get(r);if(e==="objectStoreNames")return r.objectStoreNames||f_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function zT(r){qd=r(qd)}function BT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Cd(this),e,...t);return f_.set(i,e.sort?e.sort():[e]),yi(i)}:FT().includes(r)?function(...e){return r.apply(Cd(this),e),yi(d_.get(this))}:function(...e){return yi(r.apply(Cd(this),e))}}function $T(r){return typeof r=="function"?BT(r):(r instanceof IDBTransaction&&jT(r),bT(r,MT())?new Proxy(r,qd):r)}function yi(r){if(r instanceof IDBRequest)return UT(r);if(Ad.has(r))return Ad.get(r);const e=$T(r);return e!==r&&(Ad.set(r,e),Ef.set(e,r)),e}const Cd=r=>Ef.get(r);function qT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),d=yi(h);return i&&h.addEventListener("upgradeneeded",p=>{i(yi(h.result),p.oldVersion,p.newVersion,yi(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const WT=["get","getKey","getAll","getAllKeys","count"],HT=["put","add","delete","clear"],Pd=new Map;function Fg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pd.get(e))return Pd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=HT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||WT.includes(t)))return;const l=async function(h,...d){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return Pd.set(e,l),l}zT(r=>({...r,get:(e,t,i)=>Fg(e,t)||r.get(e,t,i),has:(e,t)=>!!Fg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function GT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",Ug="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new vf("@firebase/app"),QT="@firebase/app-compat",YT="@firebase/analytics-compat",XT="@firebase/analytics",JT="@firebase/app-check-compat",ZT="@firebase/app-check",eI="@firebase/auth",tI="@firebase/auth-compat",nI="@firebase/database",rI="@firebase/data-connect",iI="@firebase/database-compat",sI="@firebase/functions",oI="@firebase/functions-compat",aI="@firebase/installations",lI="@firebase/installations-compat",uI="@firebase/messaging",cI="@firebase/messaging-compat",hI="@firebase/performance",dI="@firebase/performance-compat",fI="@firebase/remote-config",pI="@firebase/remote-config-compat",mI="@firebase/storage",gI="@firebase/storage-compat",yI="@firebase/firestore",_I="@firebase/vertexai",vI="@firebase/firestore-compat",EI="firebase",wI="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="[DEFAULT]",TI={[Wd]:"fire-core",[QT]:"fire-core-compat",[XT]:"fire-analytics",[YT]:"fire-analytics-compat",[ZT]:"fire-app-check",[JT]:"fire-app-check-compat",[eI]:"fire-auth",[tI]:"fire-auth-compat",[nI]:"fire-rtdb",[rI]:"fire-data-connect",[iI]:"fire-rtdb-compat",[sI]:"fire-fn",[oI]:"fire-fn-compat",[aI]:"fire-iid",[lI]:"fire-iid-compat",[uI]:"fire-fcm",[cI]:"fire-fcm-compat",[hI]:"fire-perf",[dI]:"fire-perf-compat",[fI]:"fire-rc",[pI]:"fire-rc-compat",[mI]:"fire-gcs",[gI]:"fire-gcs-compat",[yI]:"fire-fst",[vI]:"fire-fst-compat",[_I]:"fire-vertex","fire-js":"fire-js",[EI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Map,II=new Map,Kd=new Map;function jg(r,e){try{r.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function To(r){const e=r.name;if(Kd.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;Kd.set(e,r);for(const t of sc.values())jg(t,r);for(const t of II.values())jg(t,r);return!0}function wf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function nr(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new al("app","Firebase",SI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=wI;function p_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Hd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw _i.create("bad-app-name",{appName:String(o)});if(t||(t=c_()),!t)throw _i.create("no-options");const l=sc.get(o);if(l){if(ic(t,l.options)&&ic(i,l.config))return l;throw _i.create("duplicate-app",{appName:o})}const h=new NT(o);for(const p of Kd.values())h.addComponent(p);const d=new RI(t,i,h);return sc.set(o,d),d}function m_(r=Hd){const e=sc.get(r);if(!e&&r===Hd&&c_())return p_();if(!e)throw _i.create("no-app",{appName:r});return e}function vi(r,e,t){var i;let o=(i=TI[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(d.join(" "));return}To(new cs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="firebase-heartbeat-database",CI=1,Ja="firebase-heartbeat-store";let kd=null;function g_(){return kd||(kd=qT(AI,CI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ja)}catch(t){console.warn(t)}}}}).catch(r=>{throw _i.create("idb-open",{originalErrorMessage:r.message})})),kd}async function PI(r){try{const t=(await g_()).transaction(Ja),i=await t.objectStore(Ja).get(y_(r));return await t.done,i}catch(e){if(e instanceof br)Dr.warn(e.message);else{const t=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(t.message)}}}async function zg(r,e){try{const i=(await g_()).transaction(Ja,"readwrite");await i.objectStore(Ja).put(e,y_(r)),await i.done}catch(t){if(t instanceof br)Dr.warn(t.message);else{const i=_i.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dr.warn(i.message)}}}function y_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=1024,xI=30*24*60*60*1e3;class NI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Bg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const d=new Date(h.date).valueOf();return Date.now()-d<=xI}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Dr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bg(),{heartbeatsToSend:i,unsentEntries:o}=DI(this._heartbeatsCache.heartbeats),l=rc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Dr.warn(t),""}}}function Bg(){return new Date().toISOString().substring(0,10)}function DI(r,e=kI){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),$g(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),$g(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class VI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vT()?ET().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await PI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return zg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return zg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function $g(r){return rc(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(r){To(new cs("platform-logger",e=>new KT(e),"PRIVATE")),To(new cs("heartbeat",e=>new NI(e),"PRIVATE")),vi(Wd,Ug,r),vi(Wd,Ug,"esm2017"),vi("fire-js","")}LI("");function Tf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function __(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OI=__,v_=new al("auth","Firebase",__());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new vf("@firebase/auth");function bI(r,...e){oc.logLevel<=Pe.WARN&&oc.warn(`Auth (${No}): ${r}`,...e)}function Wu(r,...e){oc.logLevel<=Pe.ERROR&&oc.error(`Auth (${No}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(r,...e){throw If(r,...e)}function rr(r,...e){return If(r,...e)}function E_(r,e,t){const i=Object.assign(Object.assign({},OI()),{[e]:t});return new al("auth","Firebase",i).create(e,{appName:r.name})}function xr(r){return E_(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function If(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return v_.create(r,...e)}function _e(r,e,...t){if(!r)throw If(e,...t)}function Cr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Wu(e),new Error(e)}function Vr(r,e){r||Cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function MI(){return qg()==="http:"||qg()==="https:"}function qg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MI()||mT()||"connection"in navigator)?navigator.onLine:!0}function UI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vr(t>e,"Short delay should be less than long delay!"),this.isMobile=dT()||gT()}get(){return FI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(r,e){Vr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=new ul(3e4,6e4);function ki(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Mr(r,e,t,i,o={}){return T_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const d=ll(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},l);return pT()||(y.referrerPolicy="no-referrer"),w_.fetch()(I_(r,r.config.apiHost,t,d),y)})}async function T_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},jI),e);try{const o=new $I(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Mu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const d=l.ok?h.errorMessage:h.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Mu(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Mu(r,"user-disabled",h);const E=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw E_(r,E,y);Fn(r,E)}}catch(o){if(o instanceof br)throw o;Fn(r,"network-request-failed",{message:String(o)})}}async function cl(r,e,t,i,o={}){const l=await Mr(r,e,t,i,o);return"mfaPendingCredential"in l&&Fn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function I_(r,e,t,i){const o=`${e}${t}?${i}`;return r.config.emulator?Sf(r.config,o):`${r.config.apiScheme}://${o}`}function BI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $I{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(rr(this.auth,"network-request-failed")),zI.get())})}}function Mu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=rr(r,e,i);return o.customData._tokenResponse=t,o}function Wg(r){return r!==void 0&&r.enterprise!==void 0}class qI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WI(r,e){return Mr(r,"GET","/v2/recaptchaConfig",ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HI(r,e){return Mr(r,"POST","/v1/accounts:delete",e)}async function S_(r,e){return Mr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KI(r,e=!1){const t=ht(r),i=await t.getIdToken(e),o=Rf(i);_e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ka(xd(o.auth_time)),issuedAtTime:Ka(xd(o.iat)),expirationTime:Ka(xd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function xd(r){return Number(r)*1e3}function Rf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{const o=l_(t);return o?JSON.parse(o):(Wu("Failed to decode base64 JWT payload"),null)}catch(o){return Wu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Hg(r){const e=Rf(r);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof br&&GI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function GI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(r){var e;const t=r.auth,i=await r.getIdToken(),o=await Io(r,S_(t,{idToken:i}));_e(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?R_(l.providerUserInfo):[],d=XI(r.providerData,h),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),E=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Qd(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,T)}async function YI(r){const e=ht(r);await ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function R_(r){return r.map(e=>{var{providerId:t}=e,i=Tf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(r,e){const t=await T_(r,{},async()=>{const i=ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=I_(r,o,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",w_.fetch()(h,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZI(r,e){return Mr(r,"POST","/v2/accounts:revokeToken",ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=Hg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await JI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new _o;return i&&(_e(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(_e(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(_e(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return Cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(r,e){_e(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Pr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Tf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Qd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Io(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KI(this,e)}reload(){return YI(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ac(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await Io(this,HI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,d,p,y,E;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,x=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,O=(h=t.photoURL)!==null&&h!==void 0?h:void 0,W=(d=t.tenantId)!==null&&d!==void 0?d:void 0,U=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,H=(y=t.createdAt)!==null&&y!==void 0?y:void 0,ne=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:Z,emailVerified:de,isAnonymous:Se,providerData:Te,stsTokenManager:N}=t;_e(Z&&N,e,"internal-error");const S=_o.fromJSON(this.name,N);_e(typeof Z=="string",e,"internal-error"),ci(T,e.name),ci(I,e.name),_e(typeof de=="boolean",e,"internal-error"),_e(typeof Se=="boolean",e,"internal-error"),ci(x,e.name),ci(O,e.name),ci(W,e.name),ci(U,e.name),ci(H,e.name),ci(ne,e.name);const A=new Pr({uid:Z,auth:e,email:I,emailVerified:de,displayName:T,isAnonymous:Se,photoURL:O,phoneNumber:x,tenantId:W,stsTokenManager:S,createdAt:H,lastLoginAt:ne});return Te&&Array.isArray(Te)&&(A.providerData=Te.map(k=>Object.assign({},k))),U&&(A._redirectEventId=U),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new _o;o.updateFromServerResponse(t);const l=new Pr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ac(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];_e(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?R_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new _o;d.updateFromIdToken(i);const p=new Pr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Qd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=new Map;function kr(r){Vr(r instanceof Function,"Expected a class definition");let e=Kg.get(r);return e?(Vr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Kg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A_.type="NONE";const Gg=A_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(r,e,t){return`firebase:${r}:${e}:${t}`}class vo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Hu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Hu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new vo(kr(Gg),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||kr(Gg);const h=Hu(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const E=await y._get(h);if(E){const T=Pr._fromJSON(e,E);y!==l&&(d=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new vo(l,e,i):(l=p[0],d&&await l._set(h,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new vo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(D_(e))return"Blackberry";if(V_(e))return"Webos";if(P_(e))return"Safari";if((e.includes("chrome/")||k_(e))&&!e.includes("edge/"))return"Chrome";if(N_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function C_(r=jt()){return/firefox\//i.test(r)}function P_(r=jt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function k_(r=jt()){return/crios\//i.test(r)}function x_(r=jt()){return/iemobile/i.test(r)}function N_(r=jt()){return/android/i.test(r)}function D_(r=jt()){return/blackberry/i.test(r)}function V_(r=jt()){return/webos/i.test(r)}function Af(r=jt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eS(r=jt()){var e;return Af(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tS(){return yT()&&document.documentMode===10}function L_(r=jt()){return Af(r)||N_(r)||V_(r)||D_(r)||/windows phone/i.test(r)||x_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(r,e=[]){let t;switch(r){case"Browser":t=Qg(jt());break;case"Worker":t=`${Qg(jt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${No}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,d)=>{try{const p=e(l);h(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(r,e={}){return Mr(r,"GET","/v2/passwordPolicy",ki(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=6;class sS{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:iS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yg(this),this.idTokenSubscription=new Yg(this),this.beforeStateQueue=new nS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await S_(this,{idToken:e}),i=await Pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ac(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(xr(this));const t=e?ht(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rS(this),t=new sS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new al("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&kr(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(d,this,"internal-error"),d.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&bI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ms(r){return ht(r)}class Yg{constructor(e){this.auth=e,this.observer=null,this.addObserver=RT(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aS(r){Tc=r}function b_(r){return Tc.loadJS(r)}function lS(){return Tc.recaptchaEnterpriseScript}function uS(){return Tc.gapiScript}function cS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class hS{constructor(){this.enterprise=new dS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class dS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fS="recaptcha-enterprise",M_="NO_RECAPTCHA";class pS{constructor(e){this.type=fS,this.auth=ms(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,d)=>{WI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new qI(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{d(p)})})}function o(l,h,d){const p=window.grecaptcha;Wg(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(M_)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(d=>{if(!t&&Wg(window.grecaptcha))o(d,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=lS();p.length!==0&&(p+=d),b_(p).then(()=>{o(d,l,h)}).catch(y=>{h(y)})}}).catch(d=>{h(d)})})}}async function Xg(r,e,t,i=!1,o=!1){const l=new pS(r);let h;if(o)h=M_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:h}):Object.assign(d,{captchaResponse:h}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Yd(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Xg(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Xg(r,e,t,t==="getOobCode");return i(r,d)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(r,e){const t=wf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ic(l,e??{}))return o;Fn(o,"already-initialized")}return t.initialize({options:e})}function gS(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(kr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function yS(r,e,t){const i=ms(r);_e(i._canInitEmulator,i,"emulator-config-failed"),_e(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=F_(e),{host:h,port:d}=_S(e),p=d===null?"":`:${d}`;i.config.emulator={url:`${l}//${h}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),vS()}function F_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _S(r){const e=F_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Jg(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Jg(h)}}}function Jg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function vS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cr("not implemented")}_getIdTokenResponse(e){return Cr("not implemented")}_linkToIdToken(e,t){return Cr("not implemented")}_getReauthenticationResolver(e){return Cr("not implemented")}}async function ES(r,e){return Mr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(r,e){return cl(r,"POST","/v1/accounts:signInWithPassword",ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(r,e){return cl(r,"POST","/v1/accounts:signInWithEmailLink",ki(r,e))}async function IS(r,e){return cl(r,"POST","/v1/accounts:signInWithEmailLink",ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends Cf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Za(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Za(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yd(e,t,"signInWithPassword",wS);case"emailLink":return TS(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yd(e,i,"signUpPassword",ES);case"emailLink":return IS(e,{idToken:t,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r,e){return cl(r,"POST","/v1/accounts:signInWithIdp",ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="http://localhost";class hs extends Cf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Tf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new hs(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Eo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Eo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eo(e,t)}buildRequest(){const e={requestUri:SS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ll(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AS(r){const e=za(Ba(r)).link,t=e?za(Ba(e)).deep_link_id:null,i=za(Ba(r)).deep_link_id;return(i?za(Ba(i)).link:null)||i||t||e||r}class Pf{constructor(e){var t,i,o,l,h,d;const p=za(Ba(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,E=(i=p.oobCode)!==null&&i!==void 0?i:null,T=RS((o=p.mode)!==null&&o!==void 0?o:null);_e(y&&E&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=E,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=AS(e);try{return new Pf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(e,t){return Za._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Pf.parseLink(t);return _e(i,"argument-error"),Za._fromEmailAndCode(e,i.code,i.tenantId)}}Do.PROVIDER_ID="password";Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends U_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends hl{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com";di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hs._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return fi.credential(t,i)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends hl{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends hl{constructor(){super("twitter.com")}static credential(e,t){return hs._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return mi.credential(t,i)}catch{return null}}}mi.TWITTER_SIGN_IN_METHOD="twitter.com";mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(r,e){return cl(r,"POST","/v1/accounts:signUp",ki(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Pr._fromIdTokenResponse(e,i,o),h=Zg(i);return new ds({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Zg(i);return new ds({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Zg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends br{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,lc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new lc(e,t,i,o)}}function j_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?lc._fromErrorAndOperation(r,l,e,i):l})}async function PS(r,e,t=!1){const i=await Io(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ds._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(r,e,t=!1){const{auth:i}=r;if(nr(i.app))return Promise.reject(xr(i));const o="reauthenticate";try{const l=await Io(r,j_(i,o,e,r),t);_e(l.idToken,i,"internal-error");const h=Rf(l.idToken);_e(h,i,"internal-error");const{sub:d}=h;return _e(r.uid===d,i,"user-mismatch"),ds._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Fn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z_(r,e,t=!1){if(nr(r.app))return Promise.reject(xr(r));const i="signIn",o=await j_(r,i,e),l=await ds._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function xS(r,e){return z_(ms(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B_(r){const e=ms(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NS(r,e,t){if(nr(r.app))return Promise.reject(xr(r));const i=ms(r),h=await Yd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CS).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&B_(r),p}),d=await ds._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(d.user),d}function DS(r,e,t){return nr(r.app)?Promise.reject(xr(r)):xS(ht(r),Do.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&B_(r),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(r,e){return Mr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=ht(r),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await Io(i,VS(i.auth,l));i.displayName=h.displayName||null,i.photoURL=h.photoUrl||null;const d=i.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(h)}function OS(r,e,t,i){return ht(r).onIdTokenChanged(e,t,i)}function bS(r,e,t){return ht(r).beforeAuthStateChanged(e,t)}function MS(r,e,t,i){return ht(r).onAuthStateChanged(e,t,i)}function FS(r){return ht(r).signOut()}const uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=1e3,jS=10;class q_ extends $_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=L_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);tS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,jS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},US)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}q_.type="LOCAL";const zS=q_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_ extends $_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}W_.type="SESSION";const H_=W_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Ic(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(h).map(async y=>y(t.origin,l)),p=await BS(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ic.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((d,p)=>{const y=kf("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(I.data.response);break;default:clearTimeout(E),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function qS(r){ir().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function WS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function KS(){return K_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="firebaseLocalStorageDb",GS=1,cc="firebaseLocalStorage",Q_="fbase_key";class dl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sc(r,e){return r.transaction([cc],e?"readwrite":"readonly").objectStore(cc)}function QS(){const r=indexedDB.deleteDatabase(G_);return new dl(r).toPromise()}function Xd(){const r=indexedDB.open(G_,GS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(cc,{keyPath:Q_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(cc)?e(i):(i.close(),await QS(),e(await Xd()))})})}async function ey(r,e,t){const i=Sc(r,!0).put({[Q_]:e,value:t});return new dl(i).toPromise()}async function YS(r,e){const t=Sc(r,!1).get(e),i=await new dl(t).toPromise();return i===void 0?null:i.value}function ty(r,e){const t=Sc(r,!0).delete(e);return new dl(t).toPromise()}const XS=800,JS=3;class Y_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>JS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ic._getInstance(KS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await WS(),!this.activeServiceWorker)return;this.sender=new $S(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xd();return await ey(e,uc,"1"),await ty(e,uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ey(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>YS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ty(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Sc(o,!1).getAll();return new dl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y_.type="LOCAL";const ZS=Y_;new ul(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(r,e){return e?kr(e):(_e(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends Cf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tR(r){return z_(r.auth,new xf(r),r.bypassAuthState)}function nR(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),kS(t,new xf(r),r.bypassAuthState)}async function rR(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),PS(t,new xf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:d}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tR;case"linkViaPopup":case"linkViaRedirect":return rR;case"reauthViaPopup":case"reauthViaRedirect":return nR;default:Fn(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new ul(2e3,1e4);class yo extends X_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=kf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iR.get())};e()}}yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="pendingRedirect",Ku=new Map;class oR extends X_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ku.get(this.auth._key());if(!e){try{const i=await aR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ku.set(this.auth._key(),e)}return this.bypassAuthState||Ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aR(r,e){const t=cR(e),i=uR(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function lR(r,e){Ku.set(r._key(),e)}function uR(r){return kr(r._redirectPersistence)}function cR(r){return Hu(sR,r.config.apiKey,r.name)}async function hR(r,e,t=!1){if(nr(r.app))return Promise.reject(xr(r));const i=ms(r),o=eR(i,e),h=await new oR(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=10*60*1e3;class fR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!J_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(rr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ny(e))}saveEventToCache(e){this.cachedEventUids.add(ny(e)),this.lastProcessedEventTime=Date.now()}}function ny(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function J_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(r,e={}){return Mr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yR=/^https?/;async function _R(r){if(r.config.emulator)return;const{authorizedDomains:e}=await mR(r);for(const t of e)try{if(vR(t))return}catch{}Fn(r,"unauthorized-domain")}function vR(r){const e=Gd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!yR.test(t))return!1;if(gR.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new ul(3e4,6e4);function ry(){const r=ir().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function wR(r){return new Promise((e,t)=>{var i,o,l;function h(){ry(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ry(),t(rr(r,"network-request-failed"))},timeout:ER.get()})}if(!((o=(i=ir().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ir().gapi)===null||l===void 0)&&l.load)h();else{const d=cS("iframefcb");return ir()[d]=()=>{gapi.load?h():t(rr(r,"network-request-failed"))},b_(`${uS()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Gu=null,e})}let Gu=null;function TR(r){return Gu=Gu||wR(r),Gu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new ul(5e3,15e3),SR="__/auth/iframe",RR="emulator/auth/iframe",AR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PR(r){const e=r.config;_e(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Sf(e,RR):`https://${r.config.authDomain}/${SR}`,i={apiKey:e.apiKey,appName:r.name,v:No},o=CR.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ll(i).slice(1)}`}async function kR(r){const e=await TR(r),t=ir().gapi;return _e(t,r,"internal-error"),e.open({where:document.body,url:PR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AR,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=rr(r,"network-request-failed"),d=ir().setTimeout(()=>{l(h)},IR.get());function p(){ir().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NR=500,DR=600,VR="_blank",LR="http://localhost";class iy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OR(r,e,t,i=NR,o=DR){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},xR),{width:i.toString(),height:o.toString(),top:l,left:h}),y=jt().toLowerCase();t&&(d=k_(y)?VR:t),C_(y)&&(e=e||LR,p.scrollbars="yes");const E=Object.entries(p).reduce((I,[x,O])=>`${I}${x}=${O},`,"");if(eS(y)&&d!=="_self")return bR(e||"",d),new iy(null);const T=window.open(e||"",d,E);_e(T,r,"popup-blocked");try{T.focus()}catch{}return new iy(T)}function bR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="__/auth/handler",FR="emulator/auth/handler",UR=encodeURIComponent("fac");async function sy(r,e,t,i,o,l){_e(r.config.authDomain,r,"auth-domain-config-required"),_e(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:No,eventId:o};if(e instanceof U_){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",ST(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof hl){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const d=h;for(const E of Object.keys(d))d[E]===void 0&&delete d[E];const p=await r._getAppCheckToken(),y=p?`#${UR}=${encodeURIComponent(p)}`:"";return`${jR(r)}?${ll(d).slice(1)}${y}`}function jR({config:r}){return r.emulator?Sf(r,FR):`https://${r.authDomain}/${MR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="webStorageSupport";class zR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H_,this._completeRedirectFn=hR,this._overrideRedirectResult=lR}async _openPopup(e,t,i,o){var l;Vr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await sy(e,t,i,Gd(),o);return OR(e,h,kf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await sy(e,t,i,Gd(),o);return qS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Vr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await kR(e),i=new fR(e);return t.register("authEvent",o=>(_e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nd,{type:Nd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Nd];h!==void 0&&t(!!h),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_R(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return L_()||P_()||Af()}}const BR=zR;var oy="@firebase/auth",ay="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WR(r){To(new cs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=i.options;_e(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O_(r)},y=new oS(i,o,l,p);return gS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),To(new cs("auth-internal",e=>{const t=ms(e.getProvider("auth").getImmediate());return(i=>new $R(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(oy,ay,qR(r)),vi(oy,ay,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=5*60,KR=h_("authIdTokenMaxAge")||HR;let ly=null;const GR=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>KR)return;const o=t==null?void 0:t.token;ly!==o&&(ly=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function QR(r=m_()){const e=wf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=mS(r,{popupRedirectResolver:BR,persistence:[ZS,zS,H_]}),i=h_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=GR(l.toString());bS(t,h,()=>h(t.currentUser)),OS(t,d=>h(d))}}const o=u_("auth");return o&&yS(t,`http://${o}`),t}function YR(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}aS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=rr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",YR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WR("Browser");var Ma={},uy;function XR(){if(uy)return Ma;uy=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.parse=h,Ma.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function h(I,x){const O=new l,W=I.length;if(W<2)return O;const U=(x==null?void 0:x.decode)||E;let H=0;do{const ne=I.indexOf("=",H);if(ne===-1)break;const Z=I.indexOf(";",H),de=Z===-1?W:Z;if(ne>de){H=I.lastIndexOf(";",ne-1)+1;continue}const Se=d(I,H,ne),Te=p(I,ne,Se),N=I.slice(Se,Te);if(O[N]===void 0){let S=d(I,ne+1,de),A=p(I,de,S);const k=U(I.slice(S,A));O[N]=k}H=de+1}while(H<W);return O}function d(I,x,O){do{const W=I.charCodeAt(x);if(W!==32&&W!==9)return x}while(++x<O);return O}function p(I,x,O){for(;x>O;){const W=I.charCodeAt(--x);if(W!==32&&W!==9)return x+1}return O}function y(I,x,O){const W=(O==null?void 0:O.encode)||encodeURIComponent;if(!r.test(I))throw new TypeError(`argument name is invalid: ${I}`);const U=W(x);if(!e.test(U))throw new TypeError(`argument val is invalid: ${x}`);let H=I+"="+U;if(!O)return H;if(O.maxAge!==void 0){if(!Number.isInteger(O.maxAge))throw new TypeError(`option maxAge is invalid: ${O.maxAge}`);H+="; Max-Age="+O.maxAge}if(O.domain){if(!t.test(O.domain))throw new TypeError(`option domain is invalid: ${O.domain}`);H+="; Domain="+O.domain}if(O.path){if(!i.test(O.path))throw new TypeError(`option path is invalid: ${O.path}`);H+="; Path="+O.path}if(O.expires){if(!T(O.expires)||!Number.isFinite(O.expires.valueOf()))throw new TypeError(`option expires is invalid: ${O.expires}`);H+="; Expires="+O.expires.toUTCString()}if(O.httpOnly&&(H+="; HttpOnly"),O.secure&&(H+="; Secure"),O.partitioned&&(H+="; Partitioned"),O.priority)switch(typeof O.priority=="string"?O.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${O.priority}`)}if(O.sameSite)switch(typeof O.sameSite=="string"?O.sameSite.toLowerCase():O.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${O.sameSite}`)}return H}function E(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function T(I){return o.call(I)==="[object Date]"}return Ma}XR();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cy="popstate";function JR(r={}){function e(i,o){let{pathname:l,search:h,hash:d}=i.location;return Jd("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:el(o)}return e0(e,t,null,r)}function Xe(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Un(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZR(){return Math.random().toString(36).substring(2,10)}function hy(r,e){return{usr:r.state,key:r.key,idx:e}}function Jd(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Vo(e):e,state:t,key:e&&e.key||i||ZR()}}function el({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Vo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function e0(r,e,t,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,d="POP",p=null,y=E();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function E(){return(h.state||{idx:null}).idx}function T(){d="POP";let U=E(),H=U==null?null:U-y;y=U,p&&p({action:d,location:W.location,delta:H})}function I(U,H){d="PUSH";let ne=Jd(W.location,U,H);y=E()+1;let Z=hy(ne,y),de=W.createHref(ne);try{h.pushState(Z,"",de)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;o.location.assign(de)}l&&p&&p({action:d,location:W.location,delta:1})}function x(U,H){d="REPLACE";let ne=Jd(W.location,U,H);y=E();let Z=hy(ne,y),de=W.createHref(ne);h.replaceState(Z,"",de),l&&p&&p({action:d,location:W.location,delta:0})}function O(U){let H=o.location.origin!=="null"?o.location.origin:o.location.href,ne=typeof U=="string"?U:el(U);return ne=ne.replace(/ $/,"%20"),Xe(H,`No window.location.(origin|href) available to create URL for href: ${ne}`),new URL(ne,H)}let W={get action(){return d},get location(){return r(o,h)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(cy,T),p=U,()=>{o.removeEventListener(cy,T),p=null}},createHref(U){return e(o,U)},createURL:O,encodeLocation(U){let H=O(U);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:I,replace:x,go(U){return h.go(U)}};return W}function Z_(r,e,t="/"){return t0(r,e,t,!1)}function t0(r,e,t,i){let o=typeof e=="string"?Vo(e):e,l=Ii(o.pathname||"/",t);if(l==null)return null;let h=ev(r);n0(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let y=f0(l);d=h0(h[p],y,i)}return d}function ev(r,e=[],t=[],i=""){let o=(l,h,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(Xe(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let y=Nr([i,p.relativePath]),E=t.concat(p);l.children&&l.children.length>0&&(Xe(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),ev(l.children,e,E,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:u0(y,l.index),routesMeta:E})};return r.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,h);else for(let p of tv(l.path))o(l,h,p)}),e}function tv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=tv(i.join("/")),d=[];return d.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...h),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function n0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:c0(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var r0=/^:[\w-]+$/,i0=3,s0=2,o0=1,a0=10,l0=-2,dy=r=>r==="*";function u0(r,e){let t=r.split("/"),i=t.length;return t.some(dy)&&(i+=l0),e&&(i+=s0),t.filter(o=>!dy(o)).reduce((o,l)=>o+(r0.test(l)?i0:l===""?o0:a0),i)}function c0(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function h0(r,e,t=!1){let{routesMeta:i}=r,o={},l="/",h=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",T=hc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},E),I=p.route;if(!T&&y&&t&&!i[i.length-1].route.index&&(T=hc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Nr([l,T.pathname]),pathnameBase:y0(Nr([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=Nr([l,T.pathnameBase]))}return h}function hc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=d0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,{paramName:E,isOptional:T},I)=>{if(E==="*"){let O=d[I]||"";h=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const x=d[I];return T&&!x?y[E]=void 0:y[E]=(x||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function d0(r,e=!1,t=!0){Un(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function f0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Un(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ii(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function p0(r,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?Vo(r):r;return{pathname:t?t.startsWith("/")?t:m0(t,e):e,search:_0(i),hash:v0(o)}}function m0(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Dd(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function g0(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Nf(r){let e=g0(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Df(r,e,t,i=!1){let o;typeof r=="string"?o=Vo(r):(o={...r},Xe(!o.pathname||!o.pathname.includes("?"),Dd("?","pathname","search",o)),Xe(!o.pathname||!o.pathname.includes("#"),Dd("#","pathname","hash",o)),Xe(!o.search||!o.search.includes("#"),Dd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,d;if(h==null)d=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),T-=1;o.pathname=I.join("/")}d=T>=0?e[T]:"/"}let p=p0(o,d),y=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||E)&&(p.pathname+="/"),p}var Nr=r=>r.join("/").replace(/\/\/+/g,"/"),y0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),_0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,v0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function E0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var nv=["POST","PUT","PATCH","DELETE"];new Set(nv);var w0=["GET",...nv];new Set(w0);var Lo=z.createContext(null);Lo.displayName="DataRouter";var Rc=z.createContext(null);Rc.displayName="DataRouterState";var rv=z.createContext({isTransitioning:!1});rv.displayName="ViewTransition";var T0=z.createContext(new Map);T0.displayName="Fetchers";var I0=z.createContext(null);I0.displayName="Await";var zn=z.createContext(null);zn.displayName="Navigation";var fl=z.createContext(null);fl.displayName="Location";var Bn=z.createContext({outlet:null,matches:[],isDataRoute:!1});Bn.displayName="Route";var Vf=z.createContext(null);Vf.displayName="RouteError";function S0(r,{relative:e}={}){Xe(Oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(zn),{hash:o,pathname:l,search:h}=pl(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Nr([t,l])),i.createHref({pathname:d,search:h,hash:o})}function Oo(){return z.useContext(fl)!=null}function Fr(){return Xe(Oo(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(fl).location}var iv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sv(r){z.useContext(zn).static||z.useLayoutEffect(r)}function bo(){let{isDataRoute:r}=z.useContext(Bn);return r?M0():R0()}function R0(){Xe(Oo(),"useNavigate() may be used only in the context of a <Router> component.");let r=z.useContext(Lo),{basename:e,navigator:t}=z.useContext(zn),{matches:i}=z.useContext(Bn),{pathname:o}=Fr(),l=JSON.stringify(Nf(i)),h=z.useRef(!1);return sv(()=>{h.current=!0}),z.useCallback((p,y={})=>{if(Un(h.current,iv),!h.current)return;if(typeof p=="number"){t.go(p);return}let E=Df(p,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Nr([e,E.pathname])),(y.replace?t.replace:t.push)(E,y.state,y)},[e,t,l,o,r])}z.createContext(null);function ov(){let{matches:r}=z.useContext(Bn),e=r[r.length-1];return e?e.params:{}}function pl(r,{relative:e}={}){let{matches:t}=z.useContext(Bn),{pathname:i}=Fr(),o=JSON.stringify(Nf(t));return z.useMemo(()=>Df(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function A0(r,e){return av(r,e)}function av(r,e,t,i){var ne;Xe(Oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:l}=z.useContext(zn),{matches:h}=z.useContext(Bn),d=h[h.length-1],p=d?d.params:{},y=d?d.pathname:"/",E=d?d.pathnameBase:"/",T=d&&d.route;{let Z=T&&T.path||"";lv(y,!T||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let I=Fr(),x;if(e){let Z=typeof e=="string"?Vo(e):e;Xe(E==="/"||((ne=Z.pathname)==null?void 0:ne.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),x=Z}else x=I;let O=x.pathname||"/",W=O;if(E!=="/"){let Z=E.replace(/^\//,"").split("/");W="/"+O.replace(/^\//,"").split("/").slice(Z.length).join("/")}let U=!l&&t&&t.matches&&t.matches.length>0?t.matches:Z_(r,{pathname:W});Un(T||U!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Un(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=N0(U&&U.map(Z=>Object.assign({},Z,{params:Object.assign({},p,Z.params),pathname:Nr([E,o.encodeLocation?o.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?E:Nr([E,o.encodeLocation?o.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),h,t,i);return e&&H?z.createElement(fl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},H):H}function C0(){let r=b0(),e=E0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:o},t):null,h)}var P0=z.createElement(C0,null),k0=class extends z.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?z.createElement(Bn.Provider,{value:this.props.routeContext},z.createElement(Vf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function x0({routeContext:r,match:e,children:t}){let i=z.useContext(Lo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Bn.Provider,{value:r},t)}function N0(r,e=[],t=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);Xe(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=p),y.route.id){let{loaderData:E,errors:T}=t,I=y.route.loader&&!E.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||I){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,y,E)=>{let T,I=!1,x=null,O=null;t&&(T=l&&y.route.id?l[y.route.id]:void 0,x=y.route.errorElement||P0,h&&(d<0&&E===0?(lv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,O=null):d===E&&(I=!0,O=y.route.hydrateFallbackElement||null)));let W=e.concat(o.slice(0,E+1)),U=()=>{let H;return T?H=x:I?H=O:y.route.Component?H=z.createElement(y.route.Component,null):y.route.element?H=y.route.element:H=p,z.createElement(x0,{match:y,routeContext:{outlet:p,matches:W,isDataRoute:t!=null},children:H})};return t&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?z.createElement(k0,{location:t.location,revalidation:t.revalidation,component:x,error:T,children:U(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):U()},null)}function Lf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D0(r){let e=z.useContext(Lo);return Xe(e,Lf(r)),e}function V0(r){let e=z.useContext(Rc);return Xe(e,Lf(r)),e}function L0(r){let e=z.useContext(Bn);return Xe(e,Lf(r)),e}function Of(r){let e=L0(r),t=e.matches[e.matches.length-1];return Xe(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function O0(){return Of("useRouteId")}function b0(){var i;let r=z.useContext(Vf),e=V0("useRouteError"),t=Of("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[t]}function M0(){let{router:r}=D0("useNavigate"),e=Of("useNavigate"),t=z.useRef(!1);return sv(()=>{t.current=!0}),z.useCallback(async(o,l={})=>{Un(t.current,iv),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var fy={};function lv(r,e,t){!e&&!fy[r]&&(fy[r]=!0,Un(!1,t))}z.memo(F0);function F0({routes:r,future:e,state:t}){return av(r,void 0,t,e)}function Fa({to:r,replace:e,state:t,relative:i}){Xe(Oo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=z.useContext(zn);Un(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=z.useContext(Bn),{pathname:h}=Fr(),d=bo(),p=Df(r,Nf(l),h,i==="path"),y=JSON.stringify(p);return z.useEffect(()=>{d(JSON.parse(y),{replace:e,state:t,relative:i})},[d,y,i,e,t]),null}function er(r){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function U0({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:l=!1}){Xe(!Oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),d=z.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=Vo(t));let{pathname:p="/",search:y="",hash:E="",state:T=null,key:I="default"}=t,x=z.useMemo(()=>{let O=Ii(p,h);return O==null?null:{location:{pathname:O,search:y,hash:E,state:T,key:I},navigationType:i}},[h,p,y,E,T,I,i]);return Un(x!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:z.createElement(zn.Provider,{value:d},z.createElement(fl.Provider,{children:e,value:x}))}function j0({children:r,location:e}){return A0(Zd(r),e)}function Zd(r,e=[]){let t=[];return z.Children.forEach(r,(i,o)=>{if(!z.isValidElement(i))return;let l=[...e,o];if(i.type===z.Fragment){t.push.apply(t,Zd(i.props.children,l));return}Xe(i.type===er,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Zd(i.props.children,l)),t.push(h)}),t}var Qu="get",Yu="application/x-www-form-urlencoded";function Ac(r){return r!=null&&typeof r.tagName=="string"}function z0(r){return Ac(r)&&r.tagName.toLowerCase()==="button"}function B0(r){return Ac(r)&&r.tagName.toLowerCase()==="form"}function $0(r){return Ac(r)&&r.tagName.toLowerCase()==="input"}function q0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function W0(r,e){return r.button===0&&(!e||e==="_self")&&!q0(r)}var Fu=null;function H0(){if(Fu===null)try{new FormData(document.createElement("form"),0),Fu=!1}catch{Fu=!0}return Fu}var K0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vd(r){return r!=null&&!K0.has(r)?(Un(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yu}"`),null):r}function G0(r,e){let t,i,o,l,h;if(B0(r)){let d=r.getAttribute("action");i=d?Ii(d,e):null,t=r.getAttribute("method")||Qu,o=Vd(r.getAttribute("enctype"))||Yu,l=new FormData(r)}else if(z0(r)||$0(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||d.getAttribute("action");if(i=p?Ii(p,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||Qu,o=Vd(r.getAttribute("formenctype"))||Vd(d.getAttribute("enctype"))||Yu,l=new FormData(d,r),!H0()){let{name:y,type:E,value:T}=r;if(E==="image"){let I=y?`${y}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else y&&l.append(y,T)}}else{if(Ac(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qu,i=null,o=Yu,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:l,body:h}}function bf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function Q0(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Y0(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function X0(r,e,t){let i=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await Q0(l,t);return h.links?h.links():[]}return[]}));return tA(i.flat(1).filter(Y0).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function py(r,e,t,i,o,l){let h=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,d=(p,y)=>{var E;return t[y].pathname!==p.pathname||((E=t[y].route.path)==null?void 0:E.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>h(p,y)||d(p,y)):l==="data"?e.filter((p,y)=>{var T;let E=i.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(h(p,y)||d(p,y))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function J0(r,e){return Z0(r.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let o=[i.module];return i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function Z0(r){return[...new Set(r)]}function eA(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function tA(r,e){let t=new Set;return new Set(e),r.reduce((i,o)=>{let l=JSON.stringify(eA(o));return t.has(l)||(t.add(l),i.push({key:l,link:o})),i},[])}function nA(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function rA(){let r=z.useContext(Lo);return bf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function iA(){let r=z.useContext(Rc);return bf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Mf=z.createContext(void 0);Mf.displayName="FrameworkContext";function uv(){let r=z.useContext(Mf);return bf(r,"You must render this element inside a <HydratedRouter> element"),r}function sA(r,e){let t=z.useContext(Mf),[i,o]=z.useState(!1),[l,h]=z.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:y,onMouseLeave:E,onTouchStart:T}=e,I=z.useRef(null);z.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let W=H=>{H.forEach(ne=>{h(ne.isIntersecting)})},U=new IntersectionObserver(W,{threshold:.5});return I.current&&U.observe(I.current),()=>{U.disconnect()}}},[r]),z.useEffect(()=>{if(i){let W=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(W)}}},[i]);let x=()=>{o(!0)},O=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,I,{}]:[l,I,{onFocus:Ua(d,x),onBlur:Ua(p,O),onMouseEnter:Ua(y,x),onMouseLeave:Ua(E,O),onTouchStart:Ua(T,x)}]:[!1,I,{}]}function Ua(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function oA({page:r,...e}){let{router:t}=rA(),i=z.useMemo(()=>Z_(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?z.createElement(lA,{page:r,matches:i,...e}):null}function aA(r){let{manifest:e,routeModules:t}=uv(),[i,o]=z.useState([]);return z.useEffect(()=>{let l=!1;return X0(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),i}function lA({page:r,matches:e,...t}){let i=Fr(),{manifest:o,routeModules:l}=uv(),{loaderData:h,matches:d}=iA(),p=z.useMemo(()=>py(r,e,d,o,i,"data"),[r,e,d,o,i]),y=z.useMemo(()=>py(r,e,d,o,i,"assets"),[r,e,d,o,i]),E=z.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let x=new Set,O=!1;if(e.forEach(U=>{var ne;let H=o.routes[U.route.id];!H||!H.hasLoader||(!p.some(Z=>Z.route.id===U.route.id)&&U.route.id in h&&((ne=l[U.route.id])!=null&&ne.shouldRevalidate)||H.hasClientLoader?O=!0:x.add(U.route.id))}),x.size===0)return[];let W=nA(r);return O&&x.size>0&&W.searchParams.set("_routes",e.filter(U=>x.has(U.route.id)).map(U=>U.route.id).join(",")),[W.pathname+W.search]},[h,i,o,p,e,r,l]),T=z.useMemo(()=>J0(y,o),[y,o]),I=aA(y);return z.createElement(z.Fragment,null,E.map(x=>z.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),T.map(x=>z.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),I.map(({key:x,link:O})=>z.createElement("link",{key:x,...O})))}function uA(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var cv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cv&&(window.__reactRouterVersion="7.1.5")}catch{}function cA({basename:r,children:e,window:t}){let i=z.useRef();i.current==null&&(i.current=JR({window:t,v5Compat:!0}));let o=i.current,[l,h]=z.useState({action:o.action,location:o.location}),d=z.useCallback(p=>{z.startTransition(()=>h(p))},[h]);return z.useLayoutEffect(()=>o.listen(d),[o,d]),z.createElement(U0,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var hv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bn=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:l,replace:h,state:d,target:p,to:y,preventScrollReset:E,viewTransition:T,...I},x){let{basename:O}=z.useContext(zn),W=typeof y=="string"&&hv.test(y),U,H=!1;if(typeof y=="string"&&W&&(U=y,cv))try{let A=new URL(window.location.href),k=y.startsWith("//")?new URL(A.protocol+y):new URL(y),L=Ii(k.pathname,O);k.origin===A.origin&&L!=null?y=L+k.search+k.hash:H=!0}catch{Un(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ne=S0(y,{relative:o}),[Z,de,Se]=sA(i,I),Te=fA(y,{replace:h,state:d,target:p,preventScrollReset:E,relative:o,viewTransition:T});function N(A){e&&e(A),A.defaultPrevented||Te(A)}let S=z.createElement("a",{...I,...Se,href:U||ne,onClick:H||l?e:N,ref:uA(x,de),target:p,"data-discover":!W&&t==="render"?"true":void 0});return Z&&!W?z.createElement(z.Fragment,null,S,z.createElement(oA,{page:ne})):S});bn.displayName="Link";var hi=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:l,to:h,viewTransition:d,children:p,...y},E){let T=pl(h,{relative:y.relative}),I=Fr(),x=z.useContext(Rc),{navigator:O,basename:W}=z.useContext(zn),U=x!=null&&_A(T)&&d===!0,H=O.encodeLocation?O.encodeLocation(T).pathname:T.pathname,ne=I.pathname,Z=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(ne=ne.toLowerCase(),Z=Z?Z.toLowerCase():null,H=H.toLowerCase()),Z&&W&&(Z=Ii(Z,W)||Z);const de=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let Se=ne===H||!o&&ne.startsWith(H)&&ne.charAt(de)==="/",Te=Z!=null&&(Z===H||!o&&Z.startsWith(H)&&Z.charAt(H.length)==="/"),N={isActive:Se,isPending:Te,isTransitioning:U},S=Se?e:void 0,A;typeof i=="function"?A=i(N):A=[i,Se?"active":null,Te?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(N):l;return z.createElement(bn,{...y,"aria-current":S,className:A,ref:E,style:k,to:h,viewTransition:d},typeof p=="function"?p(N):p)});hi.displayName="NavLink";var hA=z.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:l,method:h=Qu,action:d,onSubmit:p,relative:y,preventScrollReset:E,viewTransition:T,...I},x)=>{let O=gA(),W=yA(d,{relative:y}),U=h.toLowerCase()==="get"?"get":"post",H=typeof d=="string"&&hv.test(d),ne=Z=>{if(p&&p(Z),Z.defaultPrevented)return;Z.preventDefault();let de=Z.nativeEvent.submitter,Se=(de==null?void 0:de.getAttribute("formmethod"))||h;O(de||Z.currentTarget,{fetcherKey:e,method:Se,navigate:t,replace:o,state:l,relative:y,preventScrollReset:E,viewTransition:T})};return z.createElement("form",{ref:x,method:U,action:W,onSubmit:i?p:ne,...I,"data-discover":!H&&r==="render"?"true":void 0})});hA.displayName="Form";function dA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dv(r){let e=z.useContext(Lo);return Xe(e,dA(r)),e}function fA(r,{target:e,replace:t,state:i,preventScrollReset:o,relative:l,viewTransition:h}={}){let d=bo(),p=Fr(),y=pl(r,{relative:l});return z.useCallback(E=>{if(W0(E,e)){E.preventDefault();let T=t!==void 0?t:el(p)===el(y);d(r,{replace:T,state:i,preventScrollReset:o,relative:l,viewTransition:h})}},[p,d,y,t,i,e,r,o,l,h])}var pA=0,mA=()=>`__${String(++pA)}__`;function gA(){let{router:r}=dv("useSubmit"),{basename:e}=z.useContext(zn),t=O0();return z.useCallback(async(i,o={})=>{let{action:l,method:h,encType:d,formData:p,body:y}=G0(i,e);if(o.navigate===!1){let E=o.fetcherKey||mA();await r.fetch(E,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||d,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function yA(r,{relative:e}={}){let{basename:t}=z.useContext(zn),i=z.useContext(Bn);Xe(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...pl(r||".",{relative:e})},h=Fr();if(r==null){l.search=h.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(E=>E==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let E=d.toString();l.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Nr([t,l.pathname])),el(l)}function _A(r,e={}){let t=z.useContext(rv);Xe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=dv("useViewTransitionState"),o=pl(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ii(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=Ii(t.nextLocation.pathname,i)||t.nextLocation.pathname;return hc(o.pathname,h)!=null||hc(o.pathname,l)!=null}new TextEncoder;var vA="firebase",EA="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(vA,EA,"app");var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ei,fv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function A(){}A.prototype=S.prototype,N.D=S.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(k,L,M){for(var C=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)C[nt-2]=arguments[nt];return S.prototype[L].apply(k,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,S,A){A||(A=0);var k=Array(16);if(typeof S=="string")for(var L=0;16>L;++L)k[L]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(L=0;16>L;++L)k[L]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=N.g[0],A=N.g[1],L=N.g[2];var M=N.g[3],C=S+(M^A&(L^M))+k[0]+3614090360&4294967295;S=A+(C<<7&4294967295|C>>>25),C=M+(L^S&(A^L))+k[1]+3905402710&4294967295,M=S+(C<<12&4294967295|C>>>20),C=L+(A^M&(S^A))+k[2]+606105819&4294967295,L=M+(C<<17&4294967295|C>>>15),C=A+(S^L&(M^S))+k[3]+3250441966&4294967295,A=L+(C<<22&4294967295|C>>>10),C=S+(M^A&(L^M))+k[4]+4118548399&4294967295,S=A+(C<<7&4294967295|C>>>25),C=M+(L^S&(A^L))+k[5]+1200080426&4294967295,M=S+(C<<12&4294967295|C>>>20),C=L+(A^M&(S^A))+k[6]+2821735955&4294967295,L=M+(C<<17&4294967295|C>>>15),C=A+(S^L&(M^S))+k[7]+4249261313&4294967295,A=L+(C<<22&4294967295|C>>>10),C=S+(M^A&(L^M))+k[8]+1770035416&4294967295,S=A+(C<<7&4294967295|C>>>25),C=M+(L^S&(A^L))+k[9]+2336552879&4294967295,M=S+(C<<12&4294967295|C>>>20),C=L+(A^M&(S^A))+k[10]+4294925233&4294967295,L=M+(C<<17&4294967295|C>>>15),C=A+(S^L&(M^S))+k[11]+2304563134&4294967295,A=L+(C<<22&4294967295|C>>>10),C=S+(M^A&(L^M))+k[12]+1804603682&4294967295,S=A+(C<<7&4294967295|C>>>25),C=M+(L^S&(A^L))+k[13]+4254626195&4294967295,M=S+(C<<12&4294967295|C>>>20),C=L+(A^M&(S^A))+k[14]+2792965006&4294967295,L=M+(C<<17&4294967295|C>>>15),C=A+(S^L&(M^S))+k[15]+1236535329&4294967295,A=L+(C<<22&4294967295|C>>>10),C=S+(L^M&(A^L))+k[1]+4129170786&4294967295,S=A+(C<<5&4294967295|C>>>27),C=M+(A^L&(S^A))+k[6]+3225465664&4294967295,M=S+(C<<9&4294967295|C>>>23),C=L+(S^A&(M^S))+k[11]+643717713&4294967295,L=M+(C<<14&4294967295|C>>>18),C=A+(M^S&(L^M))+k[0]+3921069994&4294967295,A=L+(C<<20&4294967295|C>>>12),C=S+(L^M&(A^L))+k[5]+3593408605&4294967295,S=A+(C<<5&4294967295|C>>>27),C=M+(A^L&(S^A))+k[10]+38016083&4294967295,M=S+(C<<9&4294967295|C>>>23),C=L+(S^A&(M^S))+k[15]+3634488961&4294967295,L=M+(C<<14&4294967295|C>>>18),C=A+(M^S&(L^M))+k[4]+3889429448&4294967295,A=L+(C<<20&4294967295|C>>>12),C=S+(L^M&(A^L))+k[9]+568446438&4294967295,S=A+(C<<5&4294967295|C>>>27),C=M+(A^L&(S^A))+k[14]+3275163606&4294967295,M=S+(C<<9&4294967295|C>>>23),C=L+(S^A&(M^S))+k[3]+4107603335&4294967295,L=M+(C<<14&4294967295|C>>>18),C=A+(M^S&(L^M))+k[8]+1163531501&4294967295,A=L+(C<<20&4294967295|C>>>12),C=S+(L^M&(A^L))+k[13]+2850285829&4294967295,S=A+(C<<5&4294967295|C>>>27),C=M+(A^L&(S^A))+k[2]+4243563512&4294967295,M=S+(C<<9&4294967295|C>>>23),C=L+(S^A&(M^S))+k[7]+1735328473&4294967295,L=M+(C<<14&4294967295|C>>>18),C=A+(M^S&(L^M))+k[12]+2368359562&4294967295,A=L+(C<<20&4294967295|C>>>12),C=S+(A^L^M)+k[5]+4294588738&4294967295,S=A+(C<<4&4294967295|C>>>28),C=M+(S^A^L)+k[8]+2272392833&4294967295,M=S+(C<<11&4294967295|C>>>21),C=L+(M^S^A)+k[11]+1839030562&4294967295,L=M+(C<<16&4294967295|C>>>16),C=A+(L^M^S)+k[14]+4259657740&4294967295,A=L+(C<<23&4294967295|C>>>9),C=S+(A^L^M)+k[1]+2763975236&4294967295,S=A+(C<<4&4294967295|C>>>28),C=M+(S^A^L)+k[4]+1272893353&4294967295,M=S+(C<<11&4294967295|C>>>21),C=L+(M^S^A)+k[7]+4139469664&4294967295,L=M+(C<<16&4294967295|C>>>16),C=A+(L^M^S)+k[10]+3200236656&4294967295,A=L+(C<<23&4294967295|C>>>9),C=S+(A^L^M)+k[13]+681279174&4294967295,S=A+(C<<4&4294967295|C>>>28),C=M+(S^A^L)+k[0]+3936430074&4294967295,M=S+(C<<11&4294967295|C>>>21),C=L+(M^S^A)+k[3]+3572445317&4294967295,L=M+(C<<16&4294967295|C>>>16),C=A+(L^M^S)+k[6]+76029189&4294967295,A=L+(C<<23&4294967295|C>>>9),C=S+(A^L^M)+k[9]+3654602809&4294967295,S=A+(C<<4&4294967295|C>>>28),C=M+(S^A^L)+k[12]+3873151461&4294967295,M=S+(C<<11&4294967295|C>>>21),C=L+(M^S^A)+k[15]+530742520&4294967295,L=M+(C<<16&4294967295|C>>>16),C=A+(L^M^S)+k[2]+3299628645&4294967295,A=L+(C<<23&4294967295|C>>>9),C=S+(L^(A|~M))+k[0]+4096336452&4294967295,S=A+(C<<6&4294967295|C>>>26),C=M+(A^(S|~L))+k[7]+1126891415&4294967295,M=S+(C<<10&4294967295|C>>>22),C=L+(S^(M|~A))+k[14]+2878612391&4294967295,L=M+(C<<15&4294967295|C>>>17),C=A+(M^(L|~S))+k[5]+4237533241&4294967295,A=L+(C<<21&4294967295|C>>>11),C=S+(L^(A|~M))+k[12]+1700485571&4294967295,S=A+(C<<6&4294967295|C>>>26),C=M+(A^(S|~L))+k[3]+2399980690&4294967295,M=S+(C<<10&4294967295|C>>>22),C=L+(S^(M|~A))+k[10]+4293915773&4294967295,L=M+(C<<15&4294967295|C>>>17),C=A+(M^(L|~S))+k[1]+2240044497&4294967295,A=L+(C<<21&4294967295|C>>>11),C=S+(L^(A|~M))+k[8]+1873313359&4294967295,S=A+(C<<6&4294967295|C>>>26),C=M+(A^(S|~L))+k[15]+4264355552&4294967295,M=S+(C<<10&4294967295|C>>>22),C=L+(S^(M|~A))+k[6]+2734768916&4294967295,L=M+(C<<15&4294967295|C>>>17),C=A+(M^(L|~S))+k[13]+1309151649&4294967295,A=L+(C<<21&4294967295|C>>>11),C=S+(L^(A|~M))+k[4]+4149444226&4294967295,S=A+(C<<6&4294967295|C>>>26),C=M+(A^(S|~L))+k[11]+3174756917&4294967295,M=S+(C<<10&4294967295|C>>>22),C=L+(S^(M|~A))+k[2]+718787259&4294967295,L=M+(C<<15&4294967295|C>>>17),C=A+(M^(L|~S))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+L&4294967295,N.g[3]=N.g[3]+M&4294967295}i.prototype.u=function(N,S){S===void 0&&(S=N.length);for(var A=S-this.blockSize,k=this.B,L=this.h,M=0;M<S;){if(L==0)for(;M<=A;)o(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<S;)if(k[L++]=N.charCodeAt(M++),L==this.blockSize){o(this,k),L=0;break}}else for(;M<S;)if(k[L++]=N[M++],L==this.blockSize){o(this,k),L=0;break}}this.h=L,this.o+=S},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;var A=8*this.o;for(S=N.length-8;S<N.length;++S)N[S]=A&255,A/=256;for(this.u(N),N=Array(16),S=A=0;4>S;++S)for(var k=0;32>k;k+=8)N[A++]=this.g[S]>>>k&255;return N};function l(N,S){var A=d;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=S(N)}function h(N,S){this.h=S;for(var A=[],k=!0,L=N.length-1;0<=L;L--){var M=N[L]|0;k&&M==S||(A[L]=M,k=!1)}this.g=A}var d={};function p(N){return-128<=N&&128>N?l(N,function(S){return new h([S|0],0>S?-1:0)}):new h([N|0],0>N?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return T;if(0>N)return U(y(-N));for(var S=[],A=1,k=0;N>=A;k++)S[k]=N/A|0,A*=4294967296;return new h(S,0)}function E(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return U(E(N.substring(1),S));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(S,8)),k=T,L=0;L<N.length;L+=8){var M=Math.min(8,N.length-L),C=parseInt(N.substring(L,L+M),S);8>M?(M=y(Math.pow(S,M)),k=k.j(M).add(y(C))):(k=k.j(A),k=k.add(y(C)))}return k}var T=p(0),I=p(1),x=p(16777216);r=h.prototype,r.m=function(){if(W(this))return-U(this).m();for(var N=0,S=1,A=0;A<this.g.length;A++){var k=this.i(A);N+=(0<=k?k:4294967296+k)*S,S*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(O(this))return"0";if(W(this))return"-"+U(this).toString(N);for(var S=y(Math.pow(N,6)),A=this,k="";;){var L=de(A,S).g;A=H(A,L.j(S));var M=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=L,O(A))return M+k;for(;6>M.length;)M="0"+M;k=M+k}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function O(N){if(N.h!=0)return!1;for(var S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function W(N){return N.h==-1}r.l=function(N){return N=H(this,N),W(N)?-1:O(N)?0:1};function U(N){for(var S=N.g.length,A=[],k=0;k<S;k++)A[k]=~N.g[k];return new h(A,~N.h).add(I)}r.abs=function(){return W(this)?U(this):this},r.add=function(N){for(var S=Math.max(this.g.length,N.g.length),A=[],k=0,L=0;L<=S;L++){var M=k+(this.i(L)&65535)+(N.i(L)&65535),C=(M>>>16)+(this.i(L)>>>16)+(N.i(L)>>>16);k=C>>>16,M&=65535,C&=65535,A[L]=C<<16|M}return new h(A,A[A.length-1]&-2147483648?-1:0)};function H(N,S){return N.add(U(S))}r.j=function(N){if(O(this)||O(N))return T;if(W(this))return W(N)?U(this).j(U(N)):U(U(this).j(N));if(W(N))return U(this.j(U(N)));if(0>this.l(x)&&0>N.l(x))return y(this.m()*N.m());for(var S=this.g.length+N.g.length,A=[],k=0;k<2*S;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<N.g.length;L++){var M=this.i(k)>>>16,C=this.i(k)&65535,nt=N.i(L)>>>16,Nt=N.i(L)&65535;A[2*k+2*L]+=C*Nt,ne(A,2*k+2*L),A[2*k+2*L+1]+=M*Nt,ne(A,2*k+2*L+1),A[2*k+2*L+1]+=C*nt,ne(A,2*k+2*L+1),A[2*k+2*L+2]+=M*nt,ne(A,2*k+2*L+2)}for(k=0;k<S;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=S;k<2*S;k++)A[k]=0;return new h(A,0)};function ne(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function Z(N,S){this.g=N,this.h=S}function de(N,S){if(O(S))throw Error("division by zero");if(O(N))return new Z(T,T);if(W(N))return S=de(U(N),S),new Z(U(S.g),U(S.h));if(W(S))return S=de(N,U(S)),new Z(U(S.g),S.h);if(30<N.g.length){if(W(N)||W(S))throw Error("slowDivide_ only works with positive integers.");for(var A=I,k=S;0>=k.l(N);)A=Se(A),k=Se(k);var L=Te(A,1),M=Te(k,1);for(k=Te(k,2),A=Te(A,2);!O(k);){var C=M.add(k);0>=C.l(N)&&(L=L.add(A),M=C),k=Te(k,1),A=Te(A,1)}return S=H(N,L.j(S)),new Z(L,S)}for(L=T;0<=N.l(S);){for(A=Math.max(1,Math.floor(N.m()/S.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),M=y(A),C=M.j(S);W(C)||0<C.l(N);)A-=k,M=y(A),C=M.j(S);O(M)&&(M=I),L=L.add(M),N=H(N,C)}return new Z(L,N)}r.A=function(N){return de(this,N).h},r.and=function(N){for(var S=Math.max(this.g.length,N.g.length),A=[],k=0;k<S;k++)A[k]=this.i(k)&N.i(k);return new h(A,this.h&N.h)},r.or=function(N){for(var S=Math.max(this.g.length,N.g.length),A=[],k=0;k<S;k++)A[k]=this.i(k)|N.i(k);return new h(A,this.h|N.h)},r.xor=function(N){for(var S=Math.max(this.g.length,N.g.length),A=[],k=0;k<S;k++)A[k]=this.i(k)^N.i(k);return new h(A,this.h^N.h)};function Se(N){for(var S=N.g.length+1,A=[],k=0;k<S;k++)A[k]=N.i(k)<<1|N.i(k-1)>>>31;return new h(A,N.h)}function Te(N,S){var A=S>>5;S%=32;for(var k=N.g.length-A,L=[],M=0;M<k;M++)L[M]=0<S?N.i(M+A)>>>S|N.i(M+A+1)<<32-S:N.i(M+A);return new h(L,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,fv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,Ei=h}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pv,$a,mv,Xu,ef,gv,yv,_v;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var w=0;w<u.length-1;w++){var F=u[w];if(!(F in _))break e;_=_[F]}u=u[u.length-1],w=_[u],m=m(w),m!=w&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,w=!1,F={next:function(){if(!w&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function T(u,m,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,w),u.apply(m,F)}}return function(){return u.apply(m,arguments)}}function I(u,m,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,I.apply(null,arguments)}function x(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function O(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,F,q){for(var te=Array(arguments.length-2),je=2;je<arguments.length;je++)te[je-2]=arguments[je];return m.prototype[F].apply(w,te)}}function W(u){const m=u.length;if(0<m){const _=Array(m);for(let w=0;w<m;w++)_[w]=u[w];return _}return[]}function U(u,m){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const F=u.length||0,q=w.length||0;u.length=F+q;for(let te=0;te<q;te++)u[F+te]=w[te]}else u.push(w)}}class H{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ne(u){return/^[\s\xa0]*$/.test(u)}function Z(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function de(u){return de[" "](u),u}de[" "]=function(){};var Se=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function Te(u,m,_){for(const w in u)m.call(_,u[w],w,u)}function N(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let _,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(_ in w)u[_]=w[_];for(let q=0;q<A.length;q++)_=A[q],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function L(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function M(u){d.setTimeout(()=>{throw u},0)}function C(){var u=me;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class nt{constructor(){this.h=this.g=null}add(m,_){const w=Nt.get();w.set(m,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Nt=new H(()=>new Dt,u=>u.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,re=!1,me=new nt,se=()=>{const u=d.Promise.resolve(void 0);ze=()=>{u.then(b)}};var b=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){M(_)}var m=Nt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}re=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return u}();function Ae(u,m){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Se){e:{try{de(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ae.aa.h.call(this)}}O(Ae,fe);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function $e(u,m,_,w,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!w,this.ha=F,this.key=++Fe,this.da=this.fa=!1}function _t(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ur(u){this.src=u,this.g={},this.h=0}ur.prototype.add=function(u,m,_,w,F){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var te=Ur(u,m,w,F);return-1<te?(m=u[te],_||(m.fa=!1)):(m=new $e(m,this.src,q,!!w,F),m.fa=_,u.push(m)),m};function vs(u,m){var _=m.type;if(_ in u.g){var w=u.g[_],F=Array.prototype.indexOf.call(w,m,void 0),q;(q=0<=F)&&Array.prototype.splice.call(w,F,1),q&&(_t(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ur(u,m,_,w){for(var F=0;F<u.length;++F){var q=u[F];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==w)return F}return-1}var Di="closure_lm_"+(1e6*Math.random()|0),Es={};function Bo(u,m,_,w,F){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Bo(u,m[q],_,w,F);return null}return _=Wo(_),u&&u[Me]?u.K(m,_,y(w)?!!w.capture:!1,F):$o(u,m,_,!1,w,F)}function $o(u,m,_,w,F,q){if(!m)throw Error("Invalid event type");var te=y(F)?!!F.capture:!!F,je=Ts(u);if(je||(u[Di]=je=new ur(u)),_=je.add(m,_,w,te,q),_.proxy)return _;if(w=wl(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)Re||(F=te),F===void 0&&(F=!1),u.addEventListener(m.toString(),w,F);else if(u.attachEvent)u.attachEvent(hr(m.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function wl(){function u(_){return m.call(u.src,u.listener,_)}const m=qo;return u}function ws(u,m,_,w,F){if(Array.isArray(m))for(var q=0;q<m.length;q++)ws(u,m[q],_,w,F);else w=y(w)?!!w.capture:!!w,_=Wo(_),u&&u[Me]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=Ur(q,_,w,F),-1<_&&(_t(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ts(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ur(m,_,w,F)),(_=-1<u?m[u]:null)&&cr(_))}function cr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Me])vs(m.i,u);else{var _=u.type,w=u.proxy;m.removeEventListener?m.removeEventListener(_,w,u.capture):m.detachEvent?m.detachEvent(hr(_),w):m.addListener&&m.removeListener&&m.removeListener(w),(_=Ts(m))?(vs(_,u),_.h==0&&(_.src=null,m[Di]=null)):_t(u)}}}function hr(u){return u in Es?Es[u]:Es[u]="on"+u}function qo(u,m){if(u.da)u=!0;else{m=new Ae(m,this);var _=u.listener,w=u.ha||u.src;u.fa&&cr(u),u=_.call(w,m)}return u}function Ts(u){return u=u[Di],u instanceof ur?u:null}var Is="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wo(u){return typeof u=="function"?u:(u[Is]||(u[Is]=function(m){return u.handleEvent(m)}),u[Is])}function dt(){G.call(this),this.i=new ur(this),this.M=this,this.F=null}O(dt,G),dt.prototype[Me]=!0,dt.prototype.removeEventListener=function(u,m,_,w){ws(this,u,m,_,w)};function ft(u,m){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=m.type||m,typeof m=="string")m=new fe(m,u);else if(m instanceof fe)m.target=m.target||u;else{var F=m;m=new fe(w,u),k(m,F)}if(F=!0,_)for(var q=_.length-1;0<=q;q--){var te=m.g=_[q];F=dr(te,w,!0,m)&&F}if(te=m.g=u,F=dr(te,w,!0,m)&&F,F=dr(te,w,!1,m)&&F,_)for(q=0;q<_.length;q++)te=m.g=_[q],F=dr(te,w,!1,m)&&F}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],w=0;w<_.length;w++)_t(_[w]);delete u.g[m],u.h--}}this.F=null},dt.prototype.K=function(u,m,_,w){return this.i.add(String(u),m,!1,_,w)},dt.prototype.L=function(u,m,_,w){return this.i.add(String(u),m,!0,_,w)};function dr(u,m,_,w){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,q=0;q<m.length;++q){var te=m[q];if(te&&!te.da&&te.capture==_){var je=te.listener,pt=te.ha||te.src;te.fa&&vs(u.i,te),F=je.call(pt,w)!==!1&&F}}return F&&!w.defaultPrevented}function Ho(u,m,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function jr(u){u.g=Ho(()=>{u.g=null,u.i&&(u.i=!1,jr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Vi extends G{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(u){G.call(this),this.h=u,this.g={}}O(Li,G);var Ko=[];function Go(u){Te(u.g,function(m,_){this.g.hasOwnProperty(_)&&cr(m)},u),u.g={}}Li.prototype.N=function(){Li.aa.N.call(this),Go(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qo=d.JSON.stringify,Yo=d.JSON.parse,Xo=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Oi(){}Oi.prototype.h=null;function Ss(u){return u.h||(u.h=u.i())}function Rs(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $n(){fe.call(this,"d")}O($n,fe);function As(){fe.call(this,"c")}O(As,fe);var qn={},Jo=null;function bi(){return Jo=Jo||new dt}qn.La="serverreachability";function Zo(u){fe.call(this,qn.La,u)}O(Zo,fe);function fr(u){const m=bi();ft(m,new Zo(m))}qn.STAT_EVENT="statevent";function ea(u,m){fe.call(this,qn.STAT_EVENT,u),this.stat=m}O(ea,fe);function rt(u){const m=bi();ft(m,new ea(m,u))}qn.Ma="timingevent";function Cs(u,m){fe.call(this,qn.Ma,u),this.size=m}O(Cs,fe);function wn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Mi(){this.g=!0}Mi.prototype.xa=function(){this.g=!1};function Fi(u,m,_,w,F,q){u.info(function(){if(u.g)if(q)for(var te="",je=q.split("&"),pt=0;pt<je.length;pt++){var Ve=je[pt].split("=");if(1<Ve.length){var vt=Ve[0];Ve=Ve[1];var ot=vt.split("_");te=2<=ot.length&&ot[1]=="type"?te+(vt+"="+Ve+"&"):te+(vt+"=redacted&")}}else te=null;else te=q;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+m+`
`+_+`
`+te})}function Ps(u,m,_,w,F,q,te){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+m+`
`+_+`
`+q+" "+te})}function Tn(u,m,_,w){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Gc(u,_)+(w?" "+w:"")})}function ta(u,m){u.info(function(){return"TIMEOUT: "+m})}Mi.prototype.info=function(){};function Gc(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var F=w[1];if(Array.isArray(F)&&!(1>F.length)){var q=F[0];if(q!="noop"&&q!="stop"&&q!="close")for(var te=1;te<F.length;te++)F[te]=""}}}}return Qo(_)}catch{return m}}var ks={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},In;function Ui(){}O(Ui,Oi),Ui.prototype.g=function(){return new XMLHttpRequest},Ui.prototype.i=function(){return{}},In=new Ui;function Sn(u,m,_,w){this.j=u,this.i=m,this.l=_,this.R=w||1,this.U=new Li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Il}function Il(){this.i=null,this.g="",this.h=!1}var na={},xs={};function Ns(u,m,_){u.L=1,u.v=Wr(rn(m)),u.m=_,u.P=!0,ra(u,null)}function ra(u,m){u.F=Date.now(),qe(u),u.A=rn(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Kr(_.i,"t",w),u.C=0,_=u.j.J,u.h=new Il,u.g=zl(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Vi(I(u.Y,u,u.g),u.O)),m=u.U,_=u.g,w=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Ko[0]=F.toString()),F=Ko);for(var q=0;q<F.length;q++){var te=Bo(_,F[q],w||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),fr(),Fi(u.i,u.u,u.A,u.l,u.R,u.m)}Sn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Kt(u)==3?m.j():this.Y(u)},Sn.prototype.Y=function(u){try{if(u==this.g)e:{const ot=Kt(this.g);var m=this.g.Ba();const pn=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||ua(this.g)))){this.J||ot!=4||m==7||(m==8||0>=pn?fr(3):fr(2)),ji(this);var _=this.g.Z();this.X=_;t:if(Sl(this)){var w=ua(this.g);u="";var F=w.length,q=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),zr(this);var te="";break t}this.h.i=new d.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,u+=this.h.i.decode(w[m],{stream:!(q&&m==F-1)});w.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=_==200,Ps(this.i,this.u,this.A,this.l,this.R,ot,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,pt=this.g;if((je=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(je)){var Ve=je;break t}}Ve=null}if(_=Ve)Tn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ia(this,_);else{this.o=!1,this.s=3,rt(12),dn(this),zr(this);break e}}if(this.P){_=!0;let on;for(;!this.J&&this.C<te.length;)if(on=Qc(this,te),on==xs){ot==4&&(this.s=4,rt(14),_=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if(on==na){this.s=4,rt(15),Tn(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}else Tn(this.i,this.l,on,null),ia(this,on);if(Sl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||te.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)Tn(this.i,this.l,te,"[Invalid Chunked Response]"),dn(this),zr(this);else if(0<te.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),ha(vt),vt.M=!0,rt(11))}}else Tn(this.i,this.l,te,null),ia(this,te);ot==4&&dn(this),this.o&&!this.J&&(ot==4?Bs(this.j,this):(this.o=!1,qe(this)))}else Ms(this.g),_==400&&0<te.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),dn(this),zr(this)}}}catch{}finally{}};function Sl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Qc(u,m){var _=u.C,w=m.indexOf(`
`,_);return w==-1?xs:(_=Number(m.substring(_,w)),isNaN(_)?na:(w+=1,w+_>m.length?xs:(m=m.slice(w,w+_),u.C=w+_,m)))}Sn.prototype.cancel=function(){this.J=!0,dn(this)};function qe(u){u.S=Date.now()+u.I,Rl(u,u.I)}function Rl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=wn(I(u.ba,u),m)}function ji(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Sn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ta(this.i,this.A),this.L!=2&&(fr(),rt(17)),dn(this),this.s=2,zr(this)):Rl(this,this.S-u)};function zr(u){u.j.G==0||u.J||Bs(u.j,u)}function dn(u){ji(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Go(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ia(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||zt(_.h,u))){if(!u.K&&zt(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)zs(_),kn(_);else break e;js(_),rt(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=wn(I(_.Za,_),6e3));if(1>=Cl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else _r(_,11)}else if((u.K||_.g==u)&&zs(_),!ne(m))for(F=_.Da.g.parse(m),m=0;m<F.length;m++){let Ve=F[m];if(_.T=Ve[0],Ve=Ve[1],_.G==2)if(Ve[0]=="c"){_.K=Ve[1],_.ia=Ve[2];const vt=Ve[3];vt!=null&&(_.la=vt,_.j.info("VER="+_.la));const ot=Ve[4];ot!=null&&(_.Aa=ot,_.j.info("SVER="+_.Aa));const pn=Ve[5];pn!=null&&typeof pn=="number"&&0<pn&&(w=1.5*pn,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const on=u.g;if(on){const Ki=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var q=w.h;q.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(sa(q,q.h),q.h=null))}if(w.D){const qs=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;qs&&(w.ya=qs,Be(w.I,w.D,qs))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var te=u;if(w.qa=jl(w,w.J?w.ia:null,w.W),te.K){Pl(w.h,te);var je=te,pt=w.L;pt&&(je.I=pt),je.B&&(ji(je),qe(je)),w.g=te}else Hi(w);0<_.i.length&&Gn(_)}else Ve[0]!="stop"&&Ve[0]!="close"||_r(_,7);else _.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?_r(_,7):Rt(_):Ve[0]!="noop"&&_.l&&_.l.ta(Ve),_.v=0)}}fr(4)}catch{}}var Al=class{constructor(u,m){this.g=u,this.map=m}};function zi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Cl(u){return u.h?1:u.g?u.g.size:0}function zt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function sa(u,m){u.g?u.g.add(m):u.h=m}function Pl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}zi.prototype.cancel=function(){if(this.i=kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function kl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return W(u.i)}function Ds(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,w=0;w<_;w++)m.push(u[w]);return m}m=[],_=0;for(w in u)m[_++]=u[w];return m}function Vs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const w in u)m[_++]=w;return m}}}function Br(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Vs(u),w=Ds(u),F=w.length,q=0;q<F;q++)m.call(void 0,w[q],_&&_[q],u)}var Bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yc(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),F=null;if(0<=w){var q=u[_].substring(0,w);F=u[_].substring(w+1)}else q=u[_];m(q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function pr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pr){this.h=u.h,$i(this,u.j),this.o=u.o,this.g=u.g,$r(this,u.s),this.l=u.l;var m=u.i,_=new Wn;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),qr(this,_),this.m=u.m}else u&&(m=String(u).match(Bi))?(this.h=!1,$i(this,m[1]||"",!0),this.o=xe(m[2]||""),this.g=xe(m[3]||"",!0),$r(this,m[4]),this.l=xe(m[5]||"",!0),qr(this,m[6]||"",!0),this.m=xe(m[7]||"")):(this.h=!1,this.i=new Wn(null,this.h))}pr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Hr(m,Ls,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Hr(m,Ls,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Hr(_,_.charAt(0)=="/"?Dl:Nl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Hr(_,oa)),u.join("")};function rn(u){return new pr(u)}function $i(u,m,_){u.j=_?xe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function $r(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function qr(u,m,_){m instanceof Wn?(u.i=m,Hn(u.i,u.h)):(_||(m=Hr(m,Vl)),u.i=new Wn(m,u.h))}function Be(u,m,_){u.i.set(m,_)}function Wr(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hr(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,xl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function xl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ls=/[#\/\?@]/g,Nl=/[#\?:]/g,Dl=/[#\?]/g,Vl=/[#\?@]/g,oa=/#/g;function Wn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function St(u){u.g||(u.g=new Map,u.h=0,u.i&&Yc(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Wn.prototype,r.add=function(u,m){St(this),this.i=null,u=fn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Rn(u,m){St(u),m=fn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function An(u,m){return St(u),m=fn(u,m),u.g.has(m)}r.forEach=function(u,m){St(this),this.g.forEach(function(_,w){_.forEach(function(F){u.call(m,F,w,this)},this)},this)},r.na=function(){St(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let w=0;w<m.length;w++){const F=u[w];for(let q=0;q<F.length;q++)_.push(m[w])}return _},r.V=function(u){St(this);let m=[];if(typeof u=="string")An(this,u)&&(m=m.concat(this.g.get(fn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return St(this),this.i=null,u=fn(this,u),An(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Kr(u,m,_){Rn(u,m),0<_.length&&(u.i=null,u.g.set(fn(u,m),W(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var w=m[_];const q=encodeURIComponent(String(w)),te=this.V(w);for(w=0;w<te.length;w++){var F=q;te[w]!==""&&(F+="="+encodeURIComponent(String(te[w]))),u.push(F)}}return this.i=u.join("&")};function fn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Hn(u,m){m&&!u.j&&(St(u),u.i=null,u.g.forEach(function(_,w){var F=w.toLowerCase();w!=F&&(Rn(this,w),Kr(this,F,_))},u)),u.j=m}function Xc(u,m){const _=new Mi;if(d.Image){const w=new Image;w.onload=x(Ht,_,"TestLoadImage: loaded",!0,m,w),w.onerror=x(Ht,_,"TestLoadImage: error",!1,m,w),w.onabort=x(Ht,_,"TestLoadImage: abort",!1,m,w),w.ontimeout=x(Ht,_,"TestLoadImage: timeout",!1,m,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else m(!1)}function Ll(u,m){const _=new Mi,w=new AbortController,F=setTimeout(()=>{w.abort(),Ht(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:w.signal}).then(q=>{clearTimeout(F),q.ok?Ht(_,"TestPingServer: ok",!0,m):Ht(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Ht(_,"TestPingServer: error",!1,m)})}function Ht(u,m,_,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(_)}catch{}}function Jc(){this.g=new Xo}function Ol(u,m,_){const w=_||"";try{Br(u,function(F,q){let te=F;y(F)&&(te=Qo(F)),m.push(w+q+"="+encodeURIComponent(te))})}catch(F){throw m.push(w+"type="+encodeURIComponent("_badmap")),F}}function mr(u){this.l=u.Ub||null,this.j=u.eb||!1}O(mr,Oi),mr.prototype.g=function(){return new qi(this.l,this.j)},mr.prototype.i=function(u){return function(){return u}}({});function qi(u,m){dt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(qi,dt),r=qi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Pn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function bl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Cn(this):Pn(this),this.readyState==3&&bl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Cn(this))},r.Qa=function(u){this.g&&(this.response=u,Cn(this))},r.ga=function(){this.g&&Cn(this)};function Cn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Pn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Pn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gr(u){let m="";return Te(u,function(_,w){m+=w,m+=":",m+=_,m+=`\r
`}),m}function Gr(u,m,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=gr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Be(u,m,_))}function Qe(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Qe,dt);var Zc=/^https?$/i,aa=["POST","PUT"];r=Qe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():In.g(),this.v=this.o?Ss(this.o):Ss(In),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){Wi(this,q);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)_.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const q of w.keys())_.set(q,w.get(q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),F=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(aa,m,void 0))||w||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,te]of _)this.g.setRequestHeader(q,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bs(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Wi(this,q)}};function Wi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Os(u),sn(u)}function Os(u){u.A||(u.A=!0,ft(u,"complete"),ft(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ft(this,"complete"),ft(this,"abort"),sn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sn(this,!0)),Qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?la(this):this.bb())},r.bb=function(){la(this)};function la(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Kt(u)!=4||u.Z()!=2)){if(u.u&&Kt(u)==4)Ho(u.Ea,0,u);else if(ft(u,"readystatechange"),Kt(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var w;if(w=te===0){var F=String(u.D).match(Bi)[1]||null;!F&&d.self&&d.self.location&&(F=d.self.location.protocol.slice(0,-1)),w=!Zc.test(F?F.toLowerCase():"")}_=w}if(_)ft(u,"complete"),ft(u,"success");else{u.m=6;try{var q=2<Kt(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Os(u)}}finally{sn(u)}}}}function sn(u,m){if(u.g){bs(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||ft(u,"ready");try{_.onreadystatechange=w}catch{}}}function bs(u){u.I&&(d.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Kt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Yo(m)}};function ua(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ms(u){const m={};u=(u.g&&2<=Kt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(ne(u[w]))continue;var _=L(u[w]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[F]||[];m[F]=q,q.push(_)}N(m,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ca(u){this.Aa=0,this.i=[],this.j=new Mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kn("baseRetryDelayMs",5e3,u),this.cb=Kn("retryDelaySeedMs",1e4,u),this.Wa=Kn("forwardChannelMaxRetries",2,u),this.wa=Kn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zi(u&&u.concurrentRequestLimit),this.Da=new Jc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ca.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,w){rt(0),this.W=u,this.H=m||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=jl(this,null,this.W),Gn(this)};function Rt(u){if(Fs(u),u.G==3){var m=u.U++,_=rn(u.I);if(Be(_,"SID",u.K),Be(_,"RID",m),Be(_,"TYPE","terminate"),yr(u,_),m=new Sn(u,u.j,m),m.L=2,m.v=Wr(rn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=zl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),qe(m)}Ul(u)}function kn(u){u.g&&(ha(u),u.g.cancel(),u.g=null)}function Fs(u){kn(u),u.u&&(d.clearTimeout(u.u),u.u=null),zs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Gn(u){if(!nn(u.h)&&!u.s){u.s=!0;var m=u.Ga;ze||se(),re||(ze(),re=!0),me.add(m,u),u.B=0}}function eh(u,m){return Cl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=wn(I(u.Ga,u,m),Fl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Sn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),k(q,this.S)):q=this.S),this.m!==null||this.O||(F.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Qr(this,F,m),_=rn(this.I),Be(_,"RID",u),Be(_,"CVER",22),this.D&&Be(_,"X-HTTP-Session-Id",this.D),yr(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(gr(q)))+"&"+m:this.m&&Gr(_,this.m,q)),sa(this.h,F),this.Ua&&Be(_,"TYPE","init"),this.P?(Be(_,"$req",m),Be(_,"SID","null"),F.T=!0,Ns(F,_,null)):Ns(F,_,m),this.G=2}}else this.G==3&&(u?Us(this,u):this.i.length==0||nn(this.h)||Us(this))};function Us(u,m){var _;m?_=m.l:_=u.U++;const w=rn(u.I);Be(w,"SID",u.K),Be(w,"RID",_),Be(w,"AID",u.T),yr(u,w),u.m&&u.o&&Gr(w,u.m,u.o),_=new Sn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Qr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sa(u.h,_),Ns(_,w,m)}function yr(u,m){u.H&&Te(u.H,function(_,w){Be(m,w,_)}),u.l&&Br({},function(_,w){Be(m,w,_)})}function Qr(u,m,_){_=Math.min(u.i.length,_);var w=u.l?I(u.l.Na,u.l,u):null;e:{var F=u.i;let q=-1;for(;;){const te=["count="+_];q==-1?0<_?(q=F[0].g,te.push("ofs="+q)):q=0:te.push("ofs="+q);let je=!0;for(let pt=0;pt<_;pt++){let Ve=F[pt].g;const vt=F[pt].map;if(Ve-=q,0>Ve)q=Math.max(0,F[pt].g-100),je=!1;else try{Ol(vt,te,"req"+Ve+"_")}catch{w&&w(vt)}}if(je){w=te.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,w}function Hi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ze||se(),re||(ze(),re=!0),me.add(m,u),u.v=0}}function js(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=wn(I(u.Fa,u),Fl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Ml(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=wn(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),kn(this),Ml(this))};function ha(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Ml(u){u.g=new Sn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=rn(u.qa);Be(m,"RID","rpc"),Be(m,"SID",u.K),Be(m,"AID",u.T),Be(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(m,"TO",u.ja),Be(m,"TYPE","xmlhttp"),yr(u,m),u.m&&u.o&&Gr(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Wr(rn(m)),_.m=null,_.P=!0,ra(_,u)}r.Za=function(){this.C!=null&&(this.C=null,kn(this),js(this),rt(19))};function zs(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Bs(u,m){var _=null;if(u.g==m){zs(u),ha(u),u.g=null;var w=2}else if(zt(u.h,m))_=m.D,Pl(u.h,m),w=1;else return;if(u.G!=0){if(m.o)if(w==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var F=u.B;w=bi(),ft(w,new Cs(w,_)),Gn(u)}else Hi(u);else if(F=m.s,F==3||F==0&&0<m.X||!(w==1&&eh(u,m)||w==2&&js(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),F){case 1:_r(u,5);break;case 4:_r(u,10);break;case 3:_r(u,6);break;default:_r(u,2)}}}function Fl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function _r(u,m){if(u.j.info("Error code "+m),m==2){var _=I(u.fb,u),w=u.Xa;const F=!w;w=new pr(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||$i(w,"https"),Wr(w),F?Xc(w.toString(),_):Ll(w.toString(),_)}else rt(2);u.G=0,u.l&&u.l.sa(m),Ul(u),Fs(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Ul(u){if(u.G=0,u.ka=[],u.l){const m=kl(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,W(u.i),u.i.length=0),u.l.ra()}}function jl(u,m,_){var w=_ instanceof pr?rn(_):new pr(_);if(w.g!="")m&&(w.g=m+"."+w.g),$r(w,w.s);else{var F=d.location;w=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var q=new pr(null);w&&$i(q,w),m&&(q.g=m),F&&$r(q,F),_&&(q.l=_),w=q}return _=u.D,m=u.ya,_&&m&&Be(w,_,m),Be(w,"VER",u.la),yr(u,w),w}function zl(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Qe(new mr({eb:_})):new Qe(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function da(){}r=da.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function $s(){}$s.prototype.g=function(u,m){return new Bt(u,m)};function Bt(u,m){dt.call(this),this.g=new ca(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ne(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ne(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Qn(this)}O(Bt,dt),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Rt(this.g)},Bt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Qo(u),u=_);m.i.push(new Al(m.Ya++,u)),m.G==3&&Gn(m)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Rt(this.g),delete this.g,Bt.aa.N.call(this)};function Bl(u){$n.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}O(Bl,$n);function $l(){As.call(this),this.status=1}O($l,As);function Qn(u){this.g=u}O(Qn,da),Qn.prototype.ua=function(){ft(this.g,"a")},Qn.prototype.ta=function(u){ft(this.g,new Bl(u))},Qn.prototype.sa=function(u){ft(this.g,new $l)},Qn.prototype.ra=function(){ft(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,_v=function(){return new $s},yv=function(){return bi()},gv=qn,ef={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,Xu=ks,Tl.COMPLETE="complete",mv=Tl,Rs.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",dt.prototype.listen=dt.prototype.K,$a=Rs,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,pv=Qe}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const gy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new vf("@firebase/firestore");function fo(){return fs.logLevel}function oe(r,...e){if(fs.logLevel<=Pe.DEBUG){const t=e.map(Ff);fs.debug(`Firestore (${Mo}): ${r}`,...t)}}function Lr(r,...e){if(fs.logLevel<=Pe.ERROR){const t=e.map(Ff);fs.error(`Firestore (${Mo}): ${r}`,...t)}}function So(r,...e){if(fs.logLevel<=Pe.WARN){const t=e.map(Ff);fs.warn(`Firestore (${Mo}): ${r}`,...t)}}function Ff(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r="Unexpected state"){const e=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: `+r;throw Lr(e),new Error(e)}function Ue(r,e){r||Ee()}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ft.UNAUTHENTICATED))}shutdown(){}}class TA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class IA{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new wi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new wi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string"),new vv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Ft(e)}}class SA{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class RA{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new SA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ue(this.o===void 0);const i=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string"),this.R=t.token,new AA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=PA(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Ne(r,e){return r<e?-1:r>e?1:0}function Ro(r,e,t){return r.length===e.length&&r.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new ct(0,0))}static max(){return new we(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(),i===void 0?i=e.length-t:i>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=tr.isNumericId(e),o=tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?tr.extractNumericId(e).compare(tr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ei.fromString(e.substring(4,e.length-2))}}class Ge extends tr{construct(e,t,i){return new Ge(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Ge(t)}static emptyPath(){return new Ge([])}}const kA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends tr{construct(e,t,i){return new kt(e,t,i)}static isValidIdentifier(e){return kA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ae(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(i+=d,o++):(l(),o++)}if(l(),h)throw new ae(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(t)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Ge.fromString(e))}static fromName(e){return new pe(Ge.fromString(e).popFirst(5))}static empty(){return new pe(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Ge(e.slice()))}}function xA(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=we.fromTimestamp(i===1e9?new ct(t+1,0):new ct(t,i));return new Si(o,pe.empty(),e)}function NA(r){return new Si(r.readTime,r.key,-1)}class Si{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Si(we.min(),pe.empty(),-1)}static max(){return new Si(we.max(),pe.empty(),-1)}}function DA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(r.documentKey,e.documentKey),t!==0?t:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==VA)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,i)=>{t(e)})}static reject(e){return new K((t,i)=>{i(e)})}static waitFor(e){return new K((t,i)=>{let o=0,l=0,h=!1;e.forEach(d=>{++o,d.next(()=>{++l,h&&l===o&&t()},p=>i(p))}),h=!0,l===o&&t()})}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next(o=>o?K.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new K((i,o)=>{const l=e.length,h=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(E=>{h[y]=E,++d,d===l&&i(h)},E=>o(E))}})}static doWhile(e,t){return new K((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function OA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Uo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Cc.oe=-1;function Pc(r){return r==null}function dc(r){return r===0&&1/r==-1/0}function bA(r){return typeof r=="number"&&Number.isInteger(r)&&!dc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=yy(e)),e=FA(r.get(t),e);return yy(e)}function FA(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function yy(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function xi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function wv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ju(this.root,e,this.comparator,!0)}}class ju{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Pt.RED,this.left=o??Pt.EMPTY,this.right=l??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Pt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vy(this.data.getIterator())}getIteratorFrom(e){return new vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yt(this.comparator);return t.data=e,t}}class vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new cn([])}unionWith(e){let t=new yt(kt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Tv("Invalid base64 string: "+l):l}}(e);return new xt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const UA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(r){if(Ue(!!r),typeof r=="string"){let e=0;const t=UA.exec(r);if(Ue(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:st(r.seconds),nanos:st(r.nanos)}}function st(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ai(r){return typeof r=="string"?xt.fromBase64String(r):xt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function kc(r){const e=r.mapValue.fields.__previous_value__;return Uf(e)?kc(e):e}function tl(r){const e=Ri(r.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,i,o,l,h,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class nl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu={mapValue:{}};function Ci(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Uf(r)?4:BA(r)?9007199254740991:zA(r)?10:11:Ee()}function lr(r,e){if(r===e)return!0;const t=Ci(r);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return tl(r).isEqual(tl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ri(o.timestampValue),d=Ri(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Ai(o.bytesValue).isEqual(Ai(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return st(o.geoPointValue.latitude)===st(l.geoPointValue.latitude)&&st(o.geoPointValue.longitude)===st(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return st(o.integerValue)===st(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=st(o.doubleValue),d=st(l.doubleValue);return h===d?dc(h)===dc(d):isNaN(h)&&isNaN(d)}return!1}(r,e);case 9:return Ro(r.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(_y(h)!==_y(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!lr(h[p],d[p])))return!1;return!0}(r,e);default:return Ee()}}function rl(r,e){return(r.values||[]).find(t=>lr(t,e))!==void 0}function Ao(r,e){if(r===e)return 0;const t=Ci(r),i=Ci(e);if(t!==i)return Ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return function(l,h){const d=st(l.integerValue||l.doubleValue),p=st(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(r,e);case 3:return Ey(r.timestampValue,e.timestampValue);case 4:return Ey(tl(r),tl(e));case 5:return Ne(r.stringValue,e.stringValue);case 6:return function(l,h){const d=Ai(l),p=Ai(h);return d.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const d=l.split("/"),p=h.split("/");for(let y=0;y<d.length&&y<p.length;y++){const E=Ne(d[y],p[y]);if(E!==0)return E}return Ne(d.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const d=Ne(st(l.latitude),st(h.latitude));return d!==0?d:Ne(st(l.longitude),st(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return wy(r.arrayValue,e.arrayValue);case 10:return function(l,h){var d,p,y,E;const T=l.fields||{},I=h.fields||{},x=(d=T.value)===null||d===void 0?void 0:d.arrayValue,O=(p=I.value)===null||p===void 0?void 0:p.arrayValue,W=Ne(((y=x==null?void 0:x.values)===null||y===void 0?void 0:y.length)||0,((E=O==null?void 0:O.values)===null||E===void 0?void 0:E.length)||0);return W!==0?W:wy(x,O)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===zu.mapValue&&h===zu.mapValue)return 0;if(l===zu.mapValue)return 1;if(h===zu.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=h.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const I=Ne(p[T],E[T]);if(I!==0)return I;const x=Ao(d[p[T]],y[E[T]]);if(x!==0)return x}return Ne(p.length,E.length)}(r.mapValue,e.mapValue);default:throw Ee()}}function Ey(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const t=Ri(r),i=Ri(e),o=Ne(t.seconds,i.seconds);return o!==0?o:Ne(t.nanos,i.nanos)}function wy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ao(t[o],i[o]);if(l)return l}return Ne(t.length,i.length)}function Co(r){return tf(r)}function tf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=Ri(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ai(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return pe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=tf(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${tf(t.fields[h])}`;return o+"}"}(r.mapValue):Ee()}function Ju(r){switch(Ci(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kc(r);return e?16+Ju(e):16;case 5:return 2*r.stringValue.length;case 6:return Ai(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+Ju(l),0)}(r.arrayValue);case 10:case 11:return function(i){let o=0;return xi(i.fields,(l,h)=>{o+=l.length+Ju(h)}),o}(r.mapValue);default:throw Ee()}}function Ty(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function nf(r){return!!r&&"integerValue"in r}function jf(r){return!!r&&"arrayValue"in r}function Iy(r){return!!r&&"nullValue"in r}function Sy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Zu(r){return!!r&&"mapValue"in r}function zA(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ga(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return xi(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ga(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ga(r.arrayValue.values[t]);return e}return Object.assign({},r)}function BA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Zu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(t)}setAll(e){let t=kt.emptyPath(),i={},o=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}h?i[d.lastSegment()]=Ga(h):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Zu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Zu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){xi(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new tn(Ga(this.value))}}function Iv(r){const e=[];return xi(r.fields,(t,i)=>{const o=new kt([t]);if(Zu(i)){const l=Iv(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,i,o,l,h,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new Ut(e,0,we.min(),we.min(),we.min(),tn.empty(),0)}static newFoundDocument(e,t,i,o){return new Ut(e,1,t,we.min(),i,o,0)}static newNoDocument(e,t){return new Ut(e,2,t,we.min(),we.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,we.min(),we.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t){this.position=e,this.inclusive=t}}function Ry(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=pe.comparator(pe.fromName(h.referenceValue),t.key):i=Ao(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ay(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!lr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t="asc"){this.field=e,this.dir=t}}function $A(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{}class ut extends Sv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new WA(e,t,i):t==="array-contains"?new GA(e,i):t==="in"?new QA(e,i):t==="not-in"?new YA(e,i):t==="array-contains-any"?new XA(e,i):new ut(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new HA(e,i):new KA(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ao(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Ao(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jn extends Sv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new jn(e,t)}matches(e){return Rv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rv(r){return r.op==="and"}function Av(r){return qA(r)&&Rv(r)}function qA(r){for(const e of r.filters)if(e instanceof jn)return!1;return!0}function rf(r){if(r instanceof ut)return r.field.canonicalString()+r.op.toString()+Co(r.value);if(Av(r))return r.filters.map(e=>rf(e)).join(",");{const e=r.filters.map(t=>rf(t)).join(",");return`${r.op}(${e})`}}function Cv(r,e){return r instanceof ut?function(i,o){return o instanceof ut&&i.op===o.op&&i.field.isEqual(o.field)&&lr(i.value,o.value)}(r,e):r instanceof jn?function(i,o){return o instanceof jn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,d)=>l&&Cv(h,o.filters[d]),!0):!1}(r,e):void Ee()}function Pv(r){return r instanceof ut?function(t){return`${t.field.canonicalString()} ${t.op} ${Co(t.value)}`}(r):r instanceof jn?function(t){return t.op.toString()+" {"+t.getFilters().map(Pv).join(" ,")+"}"}(r):"Filter"}class WA extends ut{constructor(e,t,i){super(e,t,i),this.key=pe.fromName(i.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class HA extends ut{constructor(e,t){super(e,"in",t),this.keys=kv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class KA extends ut{constructor(e,t){super(e,"not-in",t),this.keys=kv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>pe.fromName(i.referenceValue))}class GA extends ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jf(t)&&rl(t.arrayValue,this.value)}}class QA extends ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&rl(this.value.arrayValue,t)}}class YA extends ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!rl(this.value.arrayValue,t)}}class XA extends ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>rl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t=null,i=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.ue=null}}function Cy(r,e=null,t=[],i=[],o=null,l=null,h=null){return new JA(r,e,t,i,o,l,h)}function zf(r){const e=Ie(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>rf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Co(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Co(i)).join(",")),e.ue=t}return e.ue}function Bf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!$A(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Cv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ay(r.startAt,e.startAt)&&Ay(r.endAt,e.endAt)}function sf(r){return pe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t=null,i=[],o=[],l=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ZA(r,e,t,i,o,l,h,d){return new jo(r,e,t,i,o,l,h,d)}function xc(r){return new jo(r)}function Py(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function xv(r){return r.collectionGroup!==null}function Qa(r){const e=Ie(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new yt(kt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new il(l,i))}),t.has(kt.keyField().canonicalString())||e.ce.push(new il(kt.keyField(),i))}return e.ce}function sr(r){const e=Ie(r);return e.le||(e.le=eC(e,Qa(r))),e.le}function eC(r,e){if(r.limitType==="F")return Cy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new il(o.field,l)});const t=r.endAt?new fc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new fc(r.startAt.position,r.startAt.inclusive):null;return Cy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function of(r,e){const t=r.filters.concat([e]);return new jo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function af(r,e,t){return new jo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Nc(r,e){return Bf(sr(r),sr(e))&&r.limitType===e.limitType}function Nv(r){return`${zf(sr(r))}|lt:${r.limitType}`}function po(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>Pv(o)).join(", ")}]`),Pc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Co(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Co(o)).join(",")),`Target(${i})`}(sr(r))}; limitType=${r.limitType})`}function Dc(r,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):pe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,o){for(const l of Qa(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(h,d,p){const y=Ry(h,d,p);return h.inclusive?y<=0:y<0}(i.startAt,Qa(i),o)||i.endAt&&!function(h,d,p){const y=Ry(h,d,p);return h.inclusive?y>=0:y>0}(i.endAt,Qa(i),o))}(r,e)}function tC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Dv(r){return(e,t)=>{let i=!1;for(const o of Qa(r)){const l=nC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function nC(r,e,t){const i=r.field.isKeyField()?pe.comparator(e.key,t.key):function(l,h,d){const p=h.data.field(l),y=d.data.field(l);return p!==null&&y!==null?Ao(p,y):Ee()}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new et(pe.comparator);function Or(){return rC}const Vv=new et(pe.comparator);function qa(...r){let e=Vv;for(const t of r)e=e.insert(t.key,t);return e}function Lv(r){let e=Vv;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function us(){return Ya()}function Ov(){return Ya()}function Ya(){return new gs(r=>r.toString(),(r,e)=>r.isEqual(e))}const iC=new et(pe.comparator),sC=new yt(pe.comparator);function ke(...r){let e=sC;for(const t of r)e=e.add(t);return e}const oC=new yt(Ne);function aC(){return oC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function bv(r){return{integerValue:""+r}}function lC(r,e){return bA(e)?bv(e):$f(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function uC(r,e,t){return r instanceof pc?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Uf(l)&&(l=kc(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof sl?Fv(r,e):r instanceof ol?Uv(r,e):function(o,l){const h=Mv(o,l),d=ky(h)+ky(o.Pe);return nf(h)&&nf(o.Pe)?bv(d):$f(o.serializer,d)}(r,e)}function cC(r,e,t){return r instanceof sl?Fv(r,e):r instanceof ol?Uv(r,e):t}function Mv(r,e){return r instanceof mc?function(i){return nf(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class pc extends Vc{}class sl extends Vc{constructor(e){super(),this.elements=e}}function Fv(r,e){const t=jv(e);for(const i of r.elements)t.some(o=>lr(o,i))||t.push(i);return{arrayValue:{values:t}}}class ol extends Vc{constructor(e){super(),this.elements=e}}function Uv(r,e){let t=jv(e);for(const i of r.elements)t=t.filter(o=>!lr(o,i));return{arrayValue:{values:t}}}class mc extends Vc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ky(r){return st(r.integerValue||r.doubleValue)}function jv(r){return jf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function hC(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof sl&&o instanceof sl||i instanceof ol&&o instanceof ol?Ro(i.elements,o.elements,lr):i instanceof mc&&o instanceof mc?lr(i.Pe,o.Pe):i instanceof pc&&o instanceof pc}(r.transform,e.transform)}class dC{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ec(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Lc{}function zv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new qf(r.key,Mn.none()):new ml(r.key,r.data,Mn.none());{const t=r.data,i=tn.empty();let o=new yt(kt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ni(r.key,i,new cn(o.toArray()),Mn.none())}}function fC(r,e,t){r instanceof ml?function(o,l,h){const d=o.value.clone(),p=Ny(o.fieldTransforms,l,h.transformResults);d.setAll(p),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):r instanceof Ni?function(o,l,h){if(!ec(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=Ny(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(Bv(o)),p.setAll(d),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Xa(r,e,t,i){return r instanceof ml?function(l,h,d,p){if(!ec(l.precondition,h))return d;const y=l.value.clone(),E=Dy(l.fieldTransforms,p,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,i):r instanceof Ni?function(l,h,d,p){if(!ec(l.precondition,h))return d;const y=Dy(l.fieldTransforms,p,h),E=h.data;return E.setAll(Bv(l)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,i):function(l,h,d){return ec(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(r,e,t)}function pC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=Mv(i.transform,o||null);l!=null&&(t===null&&(t=tn.empty()),t.set(i.field,l))}return t||null}function xy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ro(i,o,(l,h)=>hC(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ml extends Lc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ni extends Lc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Bv(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function Ny(r,e,t){const i=new Map;Ue(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,d=e.data.field(l.field);i.set(l.field,cC(h,d,t[o]))}return i}function Dy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,uC(l,h,e))}return i}class qf extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mC extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&fC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Xa(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Xa(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Ov();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const p=zv(h,d);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(we.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,(t,i)=>xy(t,i))&&Ro(this.baseMutations,e.baseMutations,(t,i)=>xy(t,i))}}class Wf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ue(e.mutations.length===i.length);let o=function(){return iC}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Wf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Le;function vC(r){switch(r){default:return Ee();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function $v(r){if(r===void 0)return Lr("GRPC error has no .code"),Q.UNKNOWN;switch(r){case lt.OK:return Q.OK;case lt.CANCELLED:return Q.CANCELLED;case lt.UNKNOWN:return Q.UNKNOWN;case lt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case lt.INTERNAL:return Q.INTERNAL;case lt.UNAVAILABLE:return Q.UNAVAILABLE;case lt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case lt.NOT_FOUND:return Q.NOT_FOUND;case lt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case lt.ABORTED:return Q.ABORTED;case lt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case lt.DATA_LOSS:return Q.DATA_LOSS;default:return Ee()}}(Le=lt||(lt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new Ei([4294967295,4294967295],0);function Vy(r){const e=EC().encode(r),t=new fv;return t.update(e),new Uint8Array(t.digest())}function Ly(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ei([t,i],0),new Ei([o,l],0)]}class Hf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Wa(`Invalid padding: ${t}`);if(i<0)throw new Wa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ei.fromNumber(this.Te)}de(e,t,i){let o=e.add(t.multiply(Ei.fromNumber(i)));return o.compare(wC)===1&&(o=new Ei([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Vy(e),[i,o]=Ly(t);for(let l=0;l<this.hashCount;l++){const h=this.de(i,o,l);if(!this.Ee(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Hf(l,o,t);return i.forEach(d=>h.insert(d)),h}insert(e){if(this.Te===0)return;const t=Vy(e),[i,o]=Ly(t);for(let l=0;l<this.hashCount;l++){const h=this.de(i,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,gl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Oc(we.min(),o,new et(Ne),Or(),ke())}}class gl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new gl(i,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class qv{constructor(e,t){this.targetId=e,this.me=t}}class Wv{constructor(e,t,i=xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Oy{constructor(){this.fe=0,this.ge=by(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),t=ke(),i=ke();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ee()}}),new gl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=by()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class TC{constructor(e){this.Be=e,this.Le=new Map,this.ke=Or(),this.qe=Bu(),this.Qe=Bu(),this.Ke=new et(Ne)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(sf(l))if(i===0){const h=new pe(l.path);this.We(t,h,Ut.newNoDocument(h,we.min()))}else Ue(i===1);else{const h=this.Ze(t);if(h!==i){const d=this.Xe(e),p=d?this.et(d,e,h):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=Ai(i).toUint8Array()}catch(p){if(p instanceof Tv)return So("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Hf(h,o,l)}catch(p){return So(p instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Te===0?null:d}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Be.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.Be.nt(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((l,h)=>{const d=this.Ye(h);if(d){if(l.current&&sf(d.target)){const p=new pe(d.target.path);this.st(p).has(h)||this.ot(h,p)||this.We(h,p,Ut.newNoDocument(p,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let i=ke();this.Qe.forEach((l,h)=>{let d=!0;h.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new Oc(e,t,this.Ke,this.ke,i);return this.ke=Or(),this.qe=Bu(),this.Qe=Bu(),this.Ke=new et(Ne),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Oy,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new yt(Ne),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new yt(Ne),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Oy),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Bu(){return new et(pe.comparator)}function by(){return new et(pe.comparator)}const IC={asc:"ASCENDING",desc:"DESCENDING"},SC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RC={and:"AND",or:"OR"};class AC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lf(r,e){return r.useProto3Json||Pc(e)?e:{value:e}}function gc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function CC(r,e){return gc(r,e.toTimestamp())}function or(r){return Ue(!!r),we.fromTimestamp(function(t){const i=Ri(t);return new ct(i.seconds,i.nanos)}(r))}function Kf(r,e){return uf(r,e).canonicalString()}function uf(r,e){const t=function(o){return new Ge(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Kv(r){const e=Ge.fromString(r);return Ue(Jv(e)),e}function cf(r,e){return Kf(r.databaseId,e.path)}function Ld(r,e){const t=Kv(e);if(t.get(1)!==r.databaseId.projectId)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new pe(Qv(t))}function Gv(r,e){return Kf(r.databaseId,e)}function PC(r){const e=Kv(r);return e.length===4?Ge.emptyPath():Qv(e)}function hf(r){return new Ge(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Qv(r){return Ue(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function My(r,e,t){return{name:cf(r,e),fields:t.value.mapValue.fields}}function kC(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,E){return y.useProto3Json?(Ue(E===void 0||typeof E=="string"),xt.fromBase64String(E||"")):(Ue(E===void 0||E instanceof Buffer||E instanceof Uint8Array),xt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(y){const E=y.code===void 0?Q.UNKNOWN:$v(y.code);return new ae(E,y.message||"")}(h);t=new Wv(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Ld(r,i.document.name),l=or(i.document.updateTime),h=i.document.createTime?or(i.document.createTime):we.min(),d=new tn({mapValue:{fields:i.document.fields}}),p=Ut.newFoundDocument(o,l,h,d),y=i.targetIds||[],E=i.removedTargetIds||[];t=new tc(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Ld(r,i.document),l=i.readTime?or(i.readTime):we.min(),h=Ut.newNoDocument(o,l),d=i.removedTargetIds||[];t=new tc([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Ld(r,i.document),l=i.removedTargetIds||[];t=new tc([],l,o,null)}else{if(!("filter"in e))return Ee();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new _C(o,l),d=i.targetId;t=new qv(d,h)}}return t}function xC(r,e){let t;if(e instanceof ml)t={update:My(r,e.key,e.value)};else if(e instanceof qf)t={delete:cf(r,e.key)};else if(e instanceof Ni)t={update:My(r,e.key,e.data),updateMask:UC(e.fieldMask)};else{if(!(e instanceof mC))return Ee();t={verify:cf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const d=h.transform;if(d instanceof pc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof sl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ol)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof mc)return{fieldPath:h.field.canonicalString(),increment:d.Pe};throw Ee()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:CC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee()}(r,e.precondition)),t}function NC(r,e){return r&&r.length>0?(Ue(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?or(o.updateTime):or(l);return h.isEqual(we.min())&&(h=or(l)),new dC(h,o.transformResults||[])}(t,e))):[]}function DC(r,e){return{documents:[Gv(r,e.path)]}}function VC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Gv(r,o);const l=function(y){if(y.length!==0)return Xv(jn.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(E=>function(I){return{field:mo(I.field),direction:bC(I.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=lf(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function LC(r){let e=PC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ue(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(T){const I=Yv(T);return I instanceof jn&&Av(I)?I.getFilters():[I]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(I=>function(O){return new il(go(O.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(I))}(t.orderBy));let d=null;t.limit&&(d=function(T){let I;return I=typeof T=="object"?T.value:T,Pc(I)?null:I}(t.limit));let p=null;t.startAt&&(p=function(T){const I=!!T.before,x=T.values||[];return new fc(x,I)}(t.startAt));let y=null;return t.endAt&&(y=function(T){const I=!T.before,x=T.values||[];return new fc(x,I)}(t.endAt)),ZA(e,o,h,l,d,"F",p,y)}function OC(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Yv(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=go(t.unaryFilter.field);return ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=go(t.unaryFilter.field);return ut.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=go(t.unaryFilter.field);return ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=go(t.unaryFilter.field);return ut.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(r):r.fieldFilter!==void 0?function(t){return ut.create(go(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return jn.create(t.compositeFilter.filters.map(i=>Yv(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(r):Ee()}function bC(r){return IC[r]}function MC(r){return SC[r]}function FC(r){return RC[r]}function mo(r){return{fieldPath:r.canonicalString()}}function go(r){return kt.fromServerFormat(r.fieldPath)}function Xv(r){return r instanceof ut?function(t){if(t.op==="=="){if(Sy(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NAN"}};if(Iy(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sy(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NAN"}};if(Iy(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(t.field),op:MC(t.op),value:t.value}}}(r):r instanceof jn?function(t){const i=t.getFilters().map(o=>Xv(o));return i.length===1?i[0]:{compositeFilter:{op:FC(t.op),filters:i}}}(r):Ee()}function UC(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Jv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t,i,o,l=we.min(),h=we.min(),d=xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.ht=e}}function zC(r){const e=LC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.ln=new $C}addToCollectionParentIndex(e,t){return this.ln.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Si.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class $C{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new yt(Ge.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new yt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Po(0)}static Qn(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy([r,e],[t,i]){const o=Ne(r,t);return o===0?Ne(e,i):o}class qC{constructor(e){this.Gn=e,this.buffer=new yt(Uy),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Uy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Uo(t)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Fo(t)}await this.Yn(3e5)})}}class HC{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Cc.oe);const i=new qC(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Fy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fy):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,h,d,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,d=Date.now(),this.removeTargets(e,i,t))).next(T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),fo()<=Pe.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function KC(r,e){return new HC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.changes=new gs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Xa(i.mutation,o,cn.empty(),ct.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ke()){const o=us();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=qa();return l.forEach((d,p)=>{h=h.insert(d,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=us();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ke()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,i,o){let l=Or();const h=Ya(),d=function(){return Ya()}();return t.forEach((p,y)=>{const E=i.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Ni)?l=l.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),Xa(E.mutation,y,E.mutation.getFieldMask(),ct.now())):h.set(y.key,cn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,E)=>h.set(y,E)),t.forEach((y,E)=>{var T;return d.set(y,new QC(E,(T=h.get(y))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Ya();let o=new et((h,d)=>h-d),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let E=i.get(p)||cn.empty();E=d.applyToLocalView(y,E),i.set(p,E);const T=(o.get(d.batchId)||ke()).add(p);o=o.insert(d.batchId,T)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,E=p.value,T=Ov();E.forEach(I=>{if(!l.has(I)){const x=zv(t.get(I),i.get(I));x!==null&&T.set(I,x),l=l.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return K.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return pe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):K.resolve(us());let d=-1,p=l;return h.next(y=>K.forEach(y,(E,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(E)?K.resolve():this.remoteDocumentCache.getEntry(e,E).next(I=>{p=p.insert(E,I)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,ke())).next(E=>({batchId:d,changes:Lv(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(i=>{let o=qa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=qa();return this.indexManager.getCollectionParents(e,l).next(d=>K.forEach(d,p=>{const y=function(T,I){return new jo(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(E=>{E.forEach((T,I)=>{h=h.insert(T,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((p,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,Ut.newInvalidDocument(E)))});let d=qa();return h.forEach((p,y)=>{const E=l.get(p);E!==void 0&&Xa(E.mutation,y,cn.empty(),ct.now()),Dc(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return K.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:or(o.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:zC(o.bundledQuery),readTime:or(o.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.overlays=new et(pe.comparator),this.dr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=us();return K.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.dr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.dr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=us(),l=t.length+1,h=new pe(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new et((y,E)=>y-E);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let E=l.get(y.largestBatchId);E===null&&(E=us(),l=l.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=us(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=o)););return K.resolve(d)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.dr.get(o.largestBatchId).delete(i.key);this.dr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new yC(t,i));let l=this.dr.get(t);l===void 0&&(l=ke(),this.dr.set(t,l)),this.dr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this.Er=new yt(It.Ar),this.Rr=new yt(It.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const i=new It(e,t);this.Er=this.Er.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new It(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new pe(new Ge([])),i=new It(t,e),o=new It(t,e+1),l=[];return this.Rr.forEachInRange([i,o],h=>{this.gr(h),l.push(h.key)}),l}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new pe(new Ge([])),i=new It(t,e),o=new It(t,e+1);let l=ke();return this.Rr.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new It(e,0),i=this.Er.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class It{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return pe.comparator(e.key,t.key)||Ne(e.br,t.br)}static Vr(e,t){return Ne(e.br,t.br)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new yt(It.Ar)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new gC(l,t,i,o);this.mutationQueue.push(h);for(const d of o)this.vr=this.vr.add(new It(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],h=>{const d=this.Cr(h.br);l.push(d)}),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new yt(Ne);return t.forEach(o=>{const l=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,h],d=>{i=i.add(d.br)})}),K.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;pe.isDocumentKey(l)||(l=l.child(""));const h=new It(new pe(l),0);let d=new yt(Ne);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.br)),!0)},h),K.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ue(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return K.forEach(t.mutations,o=>{const l=new It(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Bn(e){}containsKey(e,t){const i=new It(t,0),o=this.vr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.Nr=e,this.docs=function(){return new et(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let i=Or();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Ut.newInvalidDocument(o))}),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Or();const h=t.path,d=new pe(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||DA(NA(E),i)<=0||(o.has(E.key)||Dc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ee()}Br(e,t){return K.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new nP(this)}getSize(e){return K.resolve(this.size)}}class nP extends GC{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),K.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.persistence=e,this.Lr=new gs(t=>zf(t),Bf),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.kr=0,this.qr=new Gf,this.targetCount=0,this.Qr=Po.qn()}forEachTarget(e,t){return this.Lr.forEach((i,o)=>t(o)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),K.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Un(t),K.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Lr.forEach((h,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Lr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),K.waitFor(l).next(()=>o)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.Lr.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Cc(0),this.Ur=!1,this.Ur=!0,this.Wr=new ZC,this.referenceDelegate=e(this),this.Gr=new rP(this),this.indexManager=new BC,this.remoteDocumentCache=function(o){return new tP(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new jC(t),this.jr=new XC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new eP(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){oe("MemoryPersistence","Starting transaction:",e);const o=new iP(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return K.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class iP extends LA{constructor(e){super(),this.currentSequenceNumber=e}}class Qf{constructor(e){this.persistence=e,this.Zr=new Gf,this.Xr=null}static ei(e){return new Qf(e)}get ti(){if(this.Xr)return this.Xr;throw Ee()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),K.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.ti,i=>{const o=pe.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,we.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return K.or([()=>K.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class yc{constructor(e,t){this.persistence=e,this.ri=new gs(i=>MA(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=KC(this,t)}static ei(e,t){return new yc(e,t)}Hr(){}Jr(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return K.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?K.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Br(e,h=>this.ir(e,h,t).next(d=>{d||(i++,l.removeEntry(h,we.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ju(e.data.value)),t}ir(e,t,i){return K.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=ke(),o=ke();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Yf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return _T()?8:OA(jt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new sP;return this.ts(e,t,h).next(d=>{if(l.result=d,this.Hi)return this.ns(e,t,h,d.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(fo()<=Pe.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),K.resolve()):(fo()<=Pe.DEBUG&&oe("QueryEngine","Query:",po(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(fo()<=Pe.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):K.resolve())}Xi(e,t){if(Py(t))return K.resolve(null);let i=sr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=af(t,null,"F"),i=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=ke(...l);return this.Zi.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.rs(t,d);return this.ss(t,y,h,p.readTime)?this.Xi(e,af(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,i,o){return Py(t)||o.isEqual(we.min())?K.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const h=this.rs(t,l);return this.ss(t,h,i,o)?K.resolve(null):(fo()<=Pe.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(t)),this.os(e,h,t,xA(o,-1)).next(d=>d))})}rs(e,t){let i=new yt(Dv(e));return t.forEach((o,l)=>{Dc(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return fo()<=Pe.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",po(t)),this.Zi.getDocumentsMatchingQuery(e,t,Si.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new et(Ne),this.cs=new gs(l=>zf(l),Bf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YC(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function lP(r,e,t,i){return new aP(r,e,t,i)}async function eE(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],d=[];let p=ke();for(const y of o){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of l){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ts:y,removedBatchIds:h,addedBatchIds:d}))})})}function uP(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,E){const T=y.batch,I=T.keys();let x=K.resolve();return I.forEach(O=>{x=x.next(()=>E.getEntry(p,O)).next(W=>{const U=y.docVersions.get(O);Ue(U!==null),W.version.compareTo(U)<0&&(T.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),E.addEntry(W)))})}),x.next(()=>d.mutationQueue.removeMutationBatch(p,T))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let p=ke();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function tE(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function cP(r,e){const t=Ie(r),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const d=[];e.targetChanges.forEach((E,T)=>{const I=o.get(T);if(!I)return;d.push(t.Gr.removeMatchingKeys(l,E.removedDocuments,T).next(()=>t.Gr.addMatchingKeys(l,E.addedDocuments,T)));let x=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?x=x.withResumeToken(xt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):E.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(E.resumeToken,i)),o=o.insert(T,x),function(W,U,H){return W.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(I,x,E)&&d.push(t.Gr.updateTargetData(l,x))});let p=Or(),y=ke();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),d.push(hP(l,h,e.documentUpdates).next(E=>{p=E.Is,y=E.ds})),!i.isEqual(we.min())){const E=t.Gr.getLastRemoteSnapshotVersion(l).next(T=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(E)}return K.waitFor(d).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function hP(r,e,t){let i=ke(),o=ke();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let h=Or();return t.forEach((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(we.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):oe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Is:h,ds:o}})}function dP(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function fP(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,K.resolve(o)):t.Gr.allocateTargetId(i).next(h=>(o=new gi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function df(r,e,t){const i=Ie(r),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Uo(h))throw h;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function jy(r,e,t){const i=Ie(r);let o=we.min(),l=ke();return i.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,E){const T=Ie(p),I=T.cs.get(E);return I!==void 0?K.resolve(T.us.get(I)):T.Gr.getTargetData(y,E)}(i,h,sr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(h,d.targetId).next(p=>{l=p})}).next(()=>i._s.getDocumentsMatchingQuery(h,e,t?o:we.min(),t?l:ke())).next(d=>(pP(i,tC(e),d),{documents:d,Es:l})))}function pP(r,e,t){let i=r.ls.get(e)||we.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.ls.set(e,i)}class zy{constructor(){this.activeTargetIds=aC()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mP{constructor(){this._o=new zy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new zy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function Od(){return $u===null?$u=function(){return 268435456+Math.round(2147483648*Math.random())}():$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class vP extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,h){const d=Od(),p=this.No(t,i.toUriEncodedString());oe("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(y,l,h),this.Lo(t,p,y,o).then(E=>(oe("RestConnection",`Received RPC '${t}' ${d}: `,E),E),E=>{throw So("RestConnection",`RPC '${t}' ${d} failed with error: `,E,"url: ",p,"request:",o),E})}ko(t,i,o,l,h,d){return this.Oo(t,i,o,l,h)}Bo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}No(t,i){const o=yP[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,i,o){const l=Od();return new Promise((h,d)=>{const p=new pv;p.setWithCredentials(!0),p.listenOnce(mv.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Xu.NO_ERROR:const E=p.getResponseJson();oe(Mt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case Xu.TIMEOUT:oe(Mt,`RPC '${e}' ${l} timed out`),d(new ae(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Xu.HTTP_ERROR:const T=p.getStatus();if(oe(Mt,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const x=I==null?void 0:I.error;if(x&&x.status&&x.message){const O=function(U){const H=U.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(H)>=0?H:Q.UNKNOWN}(x.status);d(new ae(O,x.message))}else d(new ae(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ae(Q.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{oe(Mt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);oe(Mt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,i,15)})}qo(e,t,i){const o=Od(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=_v(),d=yv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Bo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const E=l.join("");oe(Mt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=h.createWebChannel(E,p);let I=!1,x=!1;const O=new _P({Eo:U=>{x?oe(Mt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(I||(oe(Mt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),oe(Mt,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Ao:()=>T.close()}),W=(U,H,ne)=>{U.listen(H,Z=>{try{ne(Z)}catch(de){setTimeout(()=>{throw de},0)}})};return W(T,$a.EventType.OPEN,()=>{x||(oe(Mt,`RPC '${e}' stream ${o} transport opened.`),O.So())}),W(T,$a.EventType.CLOSE,()=>{x||(x=!0,oe(Mt,`RPC '${e}' stream ${o} transport closed`),O.Do())}),W(T,$a.EventType.ERROR,U=>{x||(x=!0,So(Mt,`RPC '${e}' stream ${o} transport errored:`,U),O.Do(new ae(Q.UNAVAILABLE,"The operation could not be completed")))}),W(T,$a.EventType.MESSAGE,U=>{var H;if(!x){const ne=U.data[0];Ue(!!ne);const Z=ne,de=(Z==null?void 0:Z.error)||((H=Z[0])===null||H===void 0?void 0:H.error);if(de){oe(Mt,`RPC '${e}' stream ${o} received error:`,de);const Se=de.status;let Te=function(A){const k=lt[A];if(k!==void 0)return $v(k)}(Se),N=de.message;Te===void 0&&(Te=Q.INTERNAL,N="Unknown error status: "+Se+" with message "+de.message),x=!0,O.Do(new ae(Te,N)),T.close()}else oe(Mt,`RPC '${e}' stream ${o} received:`,ne),O.vo(ne)}}),W(d,gv.STAT_EVENT,U=>{U.stat===ef.PROXY?oe(Mt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===ef.NOPROXY&&oe(Mt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{O.bo()},0),O}}function bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(r){return new AC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,t,i,o,l,h,d,p){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new nE(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new ae(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.d_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.d_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EP extends rE{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=kC(this.serializer,e),i=function(l){if(!("targetChange"in l))return we.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?we.min():h.readTime?or(h.readTime):we.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=hf(this.serializer),t.addTarget=function(l,h){let d;const p=h.target;if(d=sf(p)?{documents:DC(l,p)}:{query:VC(l,p).ct},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=Hv(l,h.resumeToken);const y=lf(l,h.expectedCount);y!==null&&(d.expectedCount=y)}else if(h.snapshotVersion.compareTo(we.min())>0){d.readTime=gc(l,h.snapshotVersion.toTimestamp());const y=lf(l,h.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const i=OC(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=hf(this.serializer),t.removeTarget=e,this.c_(t)}}class wP extends rE{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=NC(e.writeResults,e.commitTime),i=or(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=hf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>xC(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Oo(e,uf(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(Q.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.ko(e,uf(t,i),o,h,d,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(Q.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class IP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Lr(t),this.C_=!1):oe("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(h=>{i.enqueueAndForget(async()=>{ys(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Ie(p);y.k_.add(4),await yl(y),y.K_.set("Unknown"),y.k_.delete(4),await Mc(y)}(this))})}),this.K_=new IP(i,o)}}async function Mc(r){if(ys(r))for(const e of r.q_)await e(!0)}async function yl(r){for(const e of r.q_)await e(!1)}function iE(r,e){const t=Ie(r);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),ep(t)?Zf(t):zo(t).s_()&&Jf(t,e))}function Xf(r,e){const t=Ie(r),i=zo(t);t.L_.delete(e),i.s_()&&sE(t,e),t.L_.size===0&&(i.s_()?i.a_():ys(t)&&t.K_.set("Unknown"))}function Jf(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zo(r).V_(e)}function sE(r,e){r.U_.xe(e),zo(r).m_(e)}function Zf(r){r.U_=new TC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.L_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),zo(r).start(),r.K_.F_()}function ep(r){return ys(r)&&!zo(r).i_()&&r.L_.size>0}function ys(r){return Ie(r).k_.size===0}function oE(r){r.U_=void 0}async function RP(r){r.K_.set("Online")}async function AP(r){r.L_.forEach((e,t)=>{Jf(r,e)})}async function CP(r,e){oE(r),ep(r)?(r.K_.O_(e),Zf(r)):r.K_.set("Unknown")}async function PP(r,e,t){if(r.K_.set("Online"),e instanceof Wv&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const d of l.targetIds)o.L_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.L_.delete(d),o.U_.removeTarget(d))}(r,e)}catch(i){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _c(r,i)}else if(e instanceof tc?r.U_.$e(e):e instanceof qv?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(we.min()))try{const i=await tE(r.localStore);t.compareTo(i)>=0&&await function(l,h){const d=l.U_.it(h);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.L_.get(y);E&&l.L_.set(y,E.withResumeToken(p.resumeToken,h))}}),d.targetMismatches.forEach((p,y)=>{const E=l.L_.get(p);if(!E)return;l.L_.set(p,E.withResumeToken(xt.EMPTY_BYTE_STRING,E.snapshotVersion)),sE(l,p);const T=new gi(E.target,p,y,E.sequenceNumber);Jf(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(i){oe("RemoteStore","Failed to raise snapshot:",i),await _c(r,i)}}async function _c(r,e,t){if(!Uo(e))throw e;r.k_.add(1),await yl(r),r.K_.set("Offline"),t||(t=()=>tE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await Mc(r)})}function aE(r,e){return e().catch(t=>_c(r,t,e))}async function Fc(r){const e=Ie(r),t=Pi(e);let i=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;kP(e);)try{const o=await dP(e.localStore,i);if(o===null){e.B_.length===0&&t.a_();break}i=o.batchId,xP(e,o)}catch(o){await _c(e,o)}lE(e)&&uE(e)}function kP(r){return ys(r)&&r.B_.length<10}function xP(r,e){r.B_.push(e);const t=Pi(r);t.s_()&&t.f_&&t.g_(e.mutations)}function lE(r){return ys(r)&&!Pi(r).i_()&&r.B_.length>0}function uE(r){Pi(r).start()}async function NP(r){Pi(r).w_()}async function DP(r){const e=Pi(r);for(const t of r.B_)e.g_(t.mutations)}async function VP(r,e,t){const i=r.B_.shift(),o=Wf.from(i,e,t);await aE(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Fc(r)}async function LP(r,e){e&&Pi(r).f_&&await async function(i,o){if(function(h){return vC(h)&&h!==Q.ABORTED}(o.code)){const l=i.B_.shift();Pi(i).__(),await aE(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Fc(i)}}(r,e),lE(r)&&uE(r)}async function $y(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const i=ys(t);t.k_.add(3),await yl(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Mc(t)}async function OP(r,e){const t=Ie(r);e?(t.k_.delete(2),await Mc(t)):e||(t.k_.add(2),await yl(t),t.K_.set("Unknown"))}function zo(r){return r.W_||(r.W_=function(t,i,o){const l=Ie(t);return l.b_(),new EP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:RP.bind(null,r),mo:AP.bind(null,r),po:CP.bind(null,r),R_:PP.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),ep(r)?Zf(r):r.K_.set("Unknown")):(await r.W_.stop(),oE(r))})),r.W_}function Pi(r){return r.G_||(r.G_=function(t,i,o){const l=Ie(t);return l.b_(),new wP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:NP.bind(null,r),po:LP.bind(null,r),p_:DP.bind(null,r),y_:VP.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await Fc(r)):(await r.G_.stop(),r.B_.length>0&&(oe("RemoteStore",`Stopping write stream with ${r.B_.length} pending writes`),r.B_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,d=new tp(e,t,h,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function np(r,e){if(Lr("AsyncQueue",`${e}: ${r}`),Uo(r))return new ae(Q.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||pe.comparator(t.key,i.key):(t,i)=>pe.comparator(t.key,i.key),this.keyedMap=qa(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new wo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.z_=new et(pe.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Ee():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class ko{constructor(e,t,i,o,l,h,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new ko(e,t,wo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class MP{constructor(){this.queries=Wy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Ie(t),l=o.queries;o.queries=Wy(),l.forEach((h,d)=>{for(const p of d.J_)p.onError(i)})})(this,new ae(Q.ABORTED,"Firestore shutting down"))}}function Wy(){return new gs(r=>Nv(r),Nc)}async function cE(r,e){const t=Ie(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new bP,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=np(h,`Initialization of query '${po(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&rp(t)}async function hE(r,e){const t=Ie(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.J_.indexOf(e);h>=0&&(l.J_.splice(h,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function FP(r,e){const t=Ie(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.J_)d.ta(o)&&(i=!0);h.H_=o}}i&&rp(t)}function UP(r,e,t){const i=Ie(r),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function rp(r){r.X_.forEach(e=>{e.next()})}var ff,Hy;(Hy=ff||(ff={})).na="default",Hy.Cache="cache";class dE{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ko(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.key=e}}class pE{constructor(e){this.key=e}}class jP{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ke(),this.mutatedKeys=ke(),this.Va=Dv(e),this.ma=new wo(this.Va)}get fa(){return this.Ea}ga(e,t){const i=t?t.pa:new qy,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,T)=>{const I=o.get(E),x=Dc(this.query,T)?T:null,O=!!I&&this.mutatedKeys.has(I.key),W=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let U=!1;I&&x?I.data.isEqual(x.data)?O!==W&&(i.track({type:3,doc:x}),U=!0):this.ya(I,x)||(i.track({type:2,doc:x}),U=!0,(p&&this.Va(x,p)>0||y&&this.Va(x,y)<0)&&(d=!0)):!I&&x?(i.track({type:0,doc:x}),U=!0):I&&!x&&(i.track({type:1,doc:I}),U=!0,(p||y)&&(d=!0)),U&&(x?(h=h.add(x),l=W?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{ma:h,pa:i,ss:d,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((E,T)=>function(x,O){const W=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return W(x)-W(O)}(E.type,T.type)||this.Va(E.doc,T.doc)),this.wa(i),o=o!=null&&o;const d=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,h.length!==0||y?{snapshot:new ko(this.query,e.ma,l,h,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new qy,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ke(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new pE(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new fE(i))}),t}va(e){this.Ea=e.Es,this.Ra=ke();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return ko.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class zP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class BP{constructor(e){this.key=e,this.Fa=!1}}class $P{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new gs(d=>Nv(d),Nc),this.Oa=new Map,this.Na=new Set,this.Ba=new et(pe.comparator),this.La=new Map,this.ka=new Gf,this.qa={},this.Qa=new Map,this.Ka=Po.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function qP(r,e,t=!0){const i=EE(r);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await mE(i,e,t,!0),o}async function WP(r,e){const t=EE(r);await mE(t,e,!0,!1)}async function mE(r,e,t,i){const o=await fP(r.localStore,sr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await HP(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&iE(r.remoteStore,o),d}async function HP(r,e,t,i,o){r.Ua=(T,I,x)=>async function(W,U,H,ne){let Z=U.view.ga(H);Z.ss&&(Z=await jy(W.localStore,U.query,!1).then(({documents:N})=>U.view.ga(N,Z)));const de=ne&&ne.targetChanges.get(U.targetId),Se=ne&&ne.targetMismatches.get(U.targetId)!=null,Te=U.view.applyChanges(Z,W.isPrimaryClient,de,Se);return Gy(W,U.targetId,Te.ba),Te.snapshot}(r,T,I,x);const l=await jy(r.localStore,e,!0),h=new jP(e,l.Es),d=h.ga(l.documents),p=gl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=h.applyChanges(d,r.isPrimaryClient,p);Gy(r,t,y.ba);const E=new zP(e,t,h);return r.xa.set(e,E),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),y.snapshot}async function KP(r,e,t){const i=Ie(r),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(h=>!Nc(h,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await df(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Xf(i.remoteStore,o.targetId),pf(i,o.targetId)}).catch(Fo)):(pf(i,o.targetId),await df(i.localStore,o.targetId,!0))}async function GP(r,e){const t=Ie(r),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xf(t.remoteStore,i.targetId))}async function QP(r,e,t){const i=nk(r);try{const o=await function(h,d){const p=Ie(h),y=ct.now(),E=d.reduce((x,O)=>x.add(O.key),ke());let T,I;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>{let O=Or(),W=ke();return p.hs.getEntries(x,E).next(U=>{O=U,O.forEach((H,ne)=>{ne.isValidDocument()||(W=W.add(H))})}).next(()=>p.localDocuments.getOverlayedDocuments(x,O)).next(U=>{T=U;const H=[];for(const ne of d){const Z=pC(ne,T.get(ne.key).overlayedDocument);Z!=null&&H.push(new Ni(ne.key,Z,Iv(Z.value.mapValue),Mn.exists(!0)))}return p.mutationQueue.addMutationBatch(x,y,H,d)}).next(U=>{I=U;const H=U.applyToLocalDocumentSet(T,W);return p.documentOverlayCache.saveOverlays(x,U.batchId,H)})}).then(()=>({batchId:I.batchId,changes:Lv(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,d,p){let y=h.qa[h.currentUser.toKey()];y||(y=new et(Ne)),y=y.insert(d,p),h.qa[h.currentUser.toKey()]=y}(i,o.batchId,t),await _l(i,o.changes),await Fc(i.remoteStore)}catch(o){const l=np(o,"Failed to persist write");t.reject(l)}}async function gE(r,e){const t=Ie(r);try{const i=await cP(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.La.get(l);h&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Fa=!0:o.modifiedDocuments.size>0?Ue(h.Fa):o.removedDocuments.size>0&&(Ue(h.Fa),h.Fa=!1))}),await _l(t,i,e)}catch(i){await Fo(i)}}function Ky(r,e,t){const i=Ie(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,h)=>{const d=h.view.ea(e);d.snapshot&&o.push(d.snapshot)}),function(h,d){const p=Ie(h);p.onlineState=d;let y=!1;p.queries.forEach((E,T)=>{for(const I of T.J_)I.ea(d)&&(y=!0)}),y&&rp(p)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YP(r,e,t){const i=Ie(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.La.get(e),l=o&&o.key;if(l){let h=new et(pe.comparator);h=h.insert(l,Ut.newNoDocument(l,we.min()));const d=ke().add(l),p=new Oc(we.min(),new Map,new et(Ne),h,d);await gE(i,p),i.Ba=i.Ba.remove(l),i.La.delete(e),ip(i)}else await df(i.localStore,e,!1).then(()=>pf(i,e,t)).catch(Fo)}async function XP(r,e){const t=Ie(r),i=e.batch.batchId;try{const o=await uP(t.localStore,e);_E(t,i,null),yE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await _l(t,o)}catch(o){await Fo(o)}}async function JP(r,e,t){const i=Ie(r);try{const o=await function(h,d){const p=Ie(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,d).next(T=>(Ue(T!==null),E=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(i.localStore,e);_E(i,e,t),yE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await _l(i,o)}catch(o){await Fo(o)}}function yE(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function _E(r,e,t){const i=Ie(r);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function pf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Oa.get(e))r.xa.delete(i),t&&r.Ma.Wa(i,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(i=>{r.ka.containsKey(i)||vE(r,i)})}function vE(r,e){r.Na.delete(e.path.canonicalString());const t=r.Ba.get(e);t!==null&&(Xf(r.remoteStore,t),r.Ba=r.Ba.remove(e),r.La.delete(t),ip(r))}function Gy(r,e,t){for(const i of t)i instanceof fE?(r.ka.addReference(i.key,e),ZP(r,i)):i instanceof pE?(oe("SyncEngine","Document no longer in limbo: "+i.key),r.ka.removeReference(i.key,e),r.ka.containsKey(i.key)||vE(r,i.key)):Ee()}function ZP(r,e){const t=e.key,i=t.path.canonicalString();r.Ba.get(t)||r.Na.has(i)||(oe("SyncEngine","New document in limbo: "+t),r.Na.add(i),ip(r))}function ip(r){for(;r.Na.size>0&&r.Ba.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new pe(Ge.fromString(e)),i=r.Ka.next();r.La.set(i,new BP(t)),r.Ba=r.Ba.insert(t,i),iE(r.remoteStore,new gi(sr(xc(t.path)),i,"TargetPurposeLimboResolution",Cc.oe))}}async function _l(r,e,t){const i=Ie(r),o=[],l=[],h=[];i.xa.isEmpty()||(i.xa.forEach((d,p)=>{h.push(i.Ua(p,e,t).then(y=>{var E;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Yf.zi(p.targetId,y);l.push(T)}}))}),await Promise.all(h),i.Ma.R_(o),await async function(p,y){const E=Ie(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>K.forEach(y,I=>K.forEach(I.Wi,x=>E.persistence.referenceDelegate.addReference(T,I.targetId,x)).next(()=>K.forEach(I.Gi,x=>E.persistence.referenceDelegate.removeReference(T,I.targetId,x)))))}catch(T){if(!Uo(T))throw T;oe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const I=T.targetId;if(!T.fromCache){const x=E.us.get(I),O=x.snapshotVersion,W=x.withLastLimboFreeSnapshotVersion(O);E.us=E.us.insert(I,W)}}}(i.localStore,l))}async function ek(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const i=await eE(t.localStore,e);t.currentUser=e,function(l,h){l.Qa.forEach(d=>{d.forEach(p=>{p.reject(new ae(Q.CANCELLED,h))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await _l(t,i.Ts)}}function tk(r,e){const t=Ie(r),i=t.La.get(e);if(i&&i.Fa)return ke().add(i.key);{let o=ke();const l=t.Oa.get(e);if(!l)return o;for(const h of l){const d=t.xa.get(h);o=o.unionWith(d.view.fa)}return o}}function EE(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=gE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YP.bind(null,e),e.Ma.R_=FP.bind(null,e.eventManager),e.Ma.Wa=UP.bind(null,e.eventManager),e}function nk(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JP.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return lP(this.persistence,new oP,e.initialUser,this.serializer)}ja(e){return new Zv(Qf.ei,this.serializer)}za(e){return new mP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class rk extends vc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ue(this.persistence.referenceDelegate instanceof yc);const i=this.persistence.referenceDelegate.garbageCollector;return new WC(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new Zv(i=>yc.ei(i,t),this.serializer)}}class mf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ky(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ek.bind(null,this.syncEngine),await OP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MP}()}createDatastore(e){const t=bc(e.databaseInfo.databaseId),i=function(l){return new vP(l)}(e.databaseInfo);return function(l,h,d,p){return new TP(l,h,d,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,d){return new SP(i,o,l,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Ky(this.syncEngine,t,0),function(){return By.p()?new By:new gP}())}createSyncEngine(e,t){return function(o,l,h,d,p,y,E){const T=new $P(o,l,h,d,p,y);return E&&(T.$a=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ie(o);oe("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await yl(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}mf.provider={build:()=>new mf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=Ev.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{oe("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(oe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=np(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Md(r,e){r.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await eE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Qy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await sk(r);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>$y(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>$y(e.remoteStore,o)),r._onlineComponents=e}async function sk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Md(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;So("Error using user provided cache. Falling back to memory cache: "+t),await Md(r,new vc)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await Md(r,new rk(void 0));return r._offlineComponents}async function TE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await Qy(r,r._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await Qy(r,new mf))),r._onlineComponents}function ok(r){return TE(r).then(e=>e.syncEngine)}async function gf(r){const e=await TE(r),t=e.eventManager;return t.onListen=qP.bind(null,e.syncEngine),t.onUnlisten=KP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GP.bind(null,e.syncEngine),t}function ak(r,e,t={}){const i=new wi;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,d,p,y){const E=new wE({next:I=>{E.eu(),h.enqueueAndForget(()=>hE(l,T));const x=I.docs.has(d);!x&&I.fromCache?y.reject(new ae(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&I.fromCache&&p&&p.source==="server"?y.reject(new ae(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),T=new dE(xc(d.path),E,{includeMetadataChanges:!0,ua:!0});return cE(l,T)}(await gf(r),r.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(r,e,t){if(!t)throw new ae(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function lk(r,e,t,i){if(e===!0&&i===!0)throw new ae(Q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Xy(r){if(!pe.isDocumentKey(r))throw new ae(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Jy(r){if(pe.isDocumentKey(r))throw new ae(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Uc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee()}function ar(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ae(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uc(r);throw new ae(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zy(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wA;switch(i.type){case"firstParty":return new RA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Yy.get(t);i&&(oe("ComponentProvider","Removing Datastore"),Yy.delete(t),i.terminate())}(this),Promise.resolve()}}function uk(r,e,t,i={}){var o;const l=(r=ar(r,jc))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=Ft.MOCK_USER;else{d=hT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ae(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ft(y)}r._authCredentials=new TA(new vv(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class Wt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class Ti extends _s{constructor(e,t,i){super(e,t,xc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new pe(e))}withConverter(e){return new Ti(this.firestore,e,this._path)}}function RE(r,e,...t){if(r=ht(r),SE("collection","path",e),r instanceof jc){const i=Ge.fromString(e,...t);return Jy(i),new Ti(r,null,i)}{if(!(r instanceof Wt||r instanceof Ti))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ge.fromString(e,...t));return Jy(i),new Ti(r.firestore,null,i)}}function zc(r,e,...t){if(r=ht(r),arguments.length===1&&(e=Ev.newId()),SE("doc","path",e),r instanceof jc){const i=Ge.fromString(e,...t);return Xy(i),new Wt(r,null,new pe(i))}{if(!(r instanceof Wt||r instanceof Ti))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ge.fromString(e,...t));return Xy(i),new Wt(r.firestore,r instanceof Ti?r.converter:null,new pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new nE(this,"async_queue_retry"),this.fu=()=>{const i=bd();i&&oe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=bd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=bd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new wi;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Uo(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(i);throw Lr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=tp.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.Eu.push(o),o}pu(){this.Au&&Ee()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function t_(r){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class ps extends jc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new e_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e_(e),this._firestoreClient=void 0,await e}}}function ck(r,e){const t=typeof r=="object"?r:m_(),i=typeof r=="string"?r:"(default)",o=wf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=uT("firestore");l&&uk(o,...l)}return o}function sp(r){if(r._terminated)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||hk(r),r._firestoreClient}function hk(r){var e,t,i;const o=r._freezeSettings(),l=function(d,p,y,E){return new jA(d,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,IE(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new ik(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xo(xt.fromBase64String(e))}catch(t){throw new ae(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xo(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=/^__.*__$/;class fk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new ml(e,this.data,t,this.fieldTransforms)}}class AE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class up{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new up(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Bu(e),o}Lu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Ec(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(CE(this.Mu)&&dk.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class pk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||bc(e)}$u(e,t,i,o=!1){return new up({Mu:e,methodName:t,Ku:i,path:kt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cp(r){const e=r._freezeSettings(),t=bc(r._databaseId);return new pk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function mk(r,e,t,i,o,l={}){const h=r.$u(l.merge||l.mergeFields?2:0,e,t,o);hp("Data must be an object, but it was:",h,i);const d=PE(i,h);let p,y;if(l.merge)p=new cn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const I=yf(e,T,t);if(!h.contains(I))throw new ae(Q.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);xE(E,I)||E.push(I)}p=new cn(E),y=h.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=h.fieldTransforms;return new fk(new tn(d),p,y)}class $c extends op{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $c}}function gk(r,e,t,i){const o=r.$u(1,e,t);hp("Data must be an object, but it was:",o,i);const l=[],h=tn.empty();xi(i,(p,y)=>{const E=dp(e,p,t);y=ht(y);const T=o.Lu(E);if(y instanceof $c)l.push(E);else{const I=vl(y,T);I!=null&&(l.push(E),h.set(E,I))}});const d=new cn(l);return new AE(h,d,o.fieldTransforms)}function yk(r,e,t,i,o,l){const h=r.$u(1,e,t),d=[yf(e,i,t)],p=[o];if(l.length%2!=0)throw new ae(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)d.push(yf(e,l[I])),p.push(l[I+1]);const y=[],E=tn.empty();for(let I=d.length-1;I>=0;--I)if(!xE(y,d[I])){const x=d[I];let O=p[I];O=ht(O);const W=h.Lu(x);if(O instanceof $c)y.push(x);else{const U=vl(O,W);U!=null&&(y.push(x),E.set(x,U))}}const T=new cn(y);return new AE(E,T,h.fieldTransforms)}function _k(r,e,t,i=!1){return vl(t,r.$u(i?4:3,e))}function vl(r,e){if(kE(r=ht(r)))return hp("Unsupported field value:",e,r),PE(r,e);if(r instanceof op)return function(i,o){if(!CE(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const d of i){let p=vl(d,o.ku(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(r,e)}return function(i,o){if((i=ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return lC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ct.fromDate(i);return{timestampValue:gc(o.serializer,l)}}if(i instanceof ct){const l=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gc(o.serializer,l)}}if(i instanceof ap)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xo)return{bytesValue:Hv(o.serializer,i._byteString)};if(i instanceof Wt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Kf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof lp)return function(h,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(p=>{if(typeof p!="number")throw d.qu("VectorValues must only contain numeric values.");return $f(d.serializer,p)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${Uc(i)}`)}(r,e)}function PE(r,e){const t={};return wv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(r,(i,o)=>{const l=vl(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function kE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ct||r instanceof ap||r instanceof xo||r instanceof Wt||r instanceof op||r instanceof lp)}function hp(r,e,t){if(!kE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Uc(t);throw i==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+i)}}function yf(r,e,t){if((e=ht(e))instanceof Bc)return e._internalPath;if(typeof e=="string")return dp(r,e);throw Ec("Field path arguments must be of type string or ",r,!1,void 0,t)}const vk=new RegExp("[~\\*/\\[\\]]");function dp(r,e,t){if(e.search(vk)>=0)throw Ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Bc(...e.split("."))._internalPath}catch{throw Ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ec(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new ae(Q.INVALID_ARGUMENT,d+r+p)}function xE(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ek(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ek extends NE{data(){return super.data()}}function qc(r,e){return typeof e=="string"?dp(r,e):e instanceof Bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ae(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fp{}class DE extends fp{}function Fd(r,e,...t){let i=[];e instanceof fp&&i.push(e),i=i.concat(t),function(l){const h=l.filter(p=>p instanceof pp).length,d=l.filter(p=>p instanceof Wc).length;if(h>1||h>0&&d>0)throw new ae(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)r=o._apply(r);return r}class Wc extends DE{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Wc(e,t,i)}_apply(e){const t=this._parse(e);return VE(e._query,t),new _s(e.firestore,e.converter,of(e._query,t))}_parse(e){const t=cp(e.firestore);return function(l,h,d,p,y,E,T){let I;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){i_(T,E);const x=[];for(const O of T)x.push(r_(p,l,O));I={arrayValue:{values:x}}}else I=r_(p,l,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||i_(T,E),I=_k(d,h,T,E==="in"||E==="not-in");return ut.create(y,E,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function n_(r,e,t){const i=e,o=qc("where",r);return Wc._create(o,i,t)}class pp extends fp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pp(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const d=l.getFlattenedFilters();for(const p of d)VE(h,p),h=of(h,p)}(e._query,t),new _s(e.firestore,e.converter,of(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mp extends DE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mp(e,t)}_apply(e){const t=function(o,l,h){if(o.startAt!==null)throw new ae(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new il(l,h)}(e._query,this._field,this._direction);return new _s(e.firestore,e.converter,function(o,l){const h=o.explicitOrderBy.concat([l]);return new jo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Ud(r,e="asc"){const t=e,i=qc("orderBy",r);return mp._create(i,t)}function r_(r,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new ae(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xv(e)&&t.indexOf("/")!==-1)throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ge.fromString(t));if(!pe.isDocumentKey(i))throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ty(r,new pe(i))}if(t instanceof Wt)return Ty(r,t._key);throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(t)}.`)}function i_(r,e){if(!Array.isArray(r)||r.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VE(r,e){const t=function(o,l){for(const h of o)for(const d of h.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Tk{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return xi(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>st(h.doubleValue));return new lp(l)}convertGeoPoint(e){return new ap(st(e.latitude),st(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=kc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const t=Ri(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ge.fromString(e);Ue(Jv(i));const o=new nl(i.get(1),i.get(3)),l=new pe(i.popFirst(5));return o.isEqual(t)||Lr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(r,e,t){let i;return i=r?r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class LE extends NE{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(qc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class nc extends LE{data(e={}){return super.data(e)}}class Sk{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ha(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new nc(this._firestore,this._userDataWriter,i.key,i,new Ha(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const p=new nc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ha(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new nc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ha(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return d.type!==0&&(y=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),E=h.indexOf(d.doc.key)),{type:Rk(d.type),doc:p,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Rk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(r){r=ar(r,Wt);const e=ar(r.firestore,ps);return ak(sp(e),r._key).then(t=>bE(e,r,t))}class OE extends Tk{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function Ck(r,e,t,...i){r=ar(r,Wt);const o=ar(r.firestore,ps),l=cp(o);let h;return h=typeof(e=ht(e))=="string"||e instanceof Bc?yk(l,"updateDoc",r._key,e,t,i):gk(l,"updateDoc",r._key,e),gp(o,[h.toMutation(r._key,Mn.exists(!0))])}function Pk(r){return gp(ar(r.firestore,ps),[new qf(r._key,Mn.none())])}function kk(r,e){const t=ar(r.firestore,ps),i=zc(r),o=Ik(r.converter,e);return gp(t,[mk(cp(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Mn.exists(!1))]).then(()=>i)}function xk(r,...e){var t,i,o;r=ht(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||t_(e[h])||(l=e[h],h++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(t_(e[h])){const T=e[h];e[h]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[h+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[h+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,y,E;if(r instanceof Wt)y=ar(r.firestore,ps),E=xc(r._key.path),p={next:T=>{e[h]&&e[h](bE(y,r,T))},error:e[h+1],complete:e[h+2]};else{const T=ar(r,_s);y=ar(T.firestore,ps),E=T._query;const I=new OE(y);p={next:x=>{e[h]&&e[h](new Sk(y,I,T,x))},error:e[h+1],complete:e[h+2]},wk(r._query)}return function(I,x,O,W){const U=new wE(W),H=new dE(x,U,O);return I.asyncQueue.enqueueAndForget(async()=>cE(await gf(I),H)),()=>{U.eu(),I.asyncQueue.enqueueAndForget(async()=>hE(await gf(I),H))}}(sp(y),E,d,p)}function gp(r,e){return function(i,o){const l=new wi;return i.asyncQueue.enqueueAndForget(async()=>QP(await ok(i),o,l)),l.promise}(sp(r),e)}function bE(r,e,t){const i=t.docs.get(e._key),o=new OE(r);return new LE(r,o,e._key,i,new Ha(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Mo=o})(No),To(new cs("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),d=new ps(new IA(i.getProvider("auth-internal")),new CA(i.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ae(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(y.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),vi(gy,"4.7.6",e),vi(gy,"4.7.6","esm2017")})();const Nk={apiKey:"AIzaSyCJ2S3Bhm3RGPnsmYANVq1X5GwlQBsYiH4",authDomain:"miniblog-27cdc.firebaseapp.com",projectId:"miniblog-27cdc",storageBucket:"miniblog-27cdc.firebasestorage.app",messagingSenderId:"157644126164",appId:"1:157644126164:web:6f42615bf43ae18bb14841"},ME=p_(Nk),El=ck(ME),Hc=()=>{const[r,e]=z.useState(null),[t,i]=z.useState(null),[o,l]=z.useState(!1),h=QR(ME),d=async E=>{i(!0),e(null);try{const{user:T}=await NS(h,E.email,E.password);return await LS(T,{displayName:E.displayName}),i(!1),T}catch(T){console.log(T.message),console.log(typeof T.message);let I;T.message.includes("Password")?I="A senha precisa conter pelo menos 6 caracteres.":T.message.includes("email-already")?I="E-mail j castrado":I="Ocorreu um erro, por favor tente mais tarde.",i(!1),e(I)}},p=()=>{FS(h)},y=async E=>{i(!0),e(!1);try{await DS(h,E.email,E.password),i(!1)}catch(T){console.log(T.message);let I;T.message.includes("auth/invalid-credential")?I="Usurio ou senha incorretos":I="Ocorreu um erro, por favor tente mais tarde.",e(I),i(!1)}};return z.useEffect(()=>()=>l(!0),[]),{auth:h,createUser:d,error:r,loading:t,logout:p,login:y}},FE=z.createContext(),Dk=({children:r,value:e})=>D.jsx(FE.Provider,{value:e,children:r}),Kc=()=>z.useContext(FE);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UE=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=z.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...d},p)=>z.createElement("svg",{ref:p,...Lk,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:UE("lucide",o),...d},[...h.map(([y,E])=>z.createElement(y,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=(r,e)=>{const t=z.forwardRef(({className:i,...o},l)=>z.createElement(Ok,{ref:l,iconNode:e,className:UE(`lucide-${Vk(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mk=yp("Eye",bk);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Uk=yp("Menu",Fk);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jE=yp("X",jk),zk="_navbar_1g6ow_1",Bk="_navContent_1g6ow_13",$k="_brand_1g6ow_31",qk="_links_list_1g6ow_53",Wk="_logoutButton_1g6ow_103",Hk="_menuToggle_1g6ow_139",Kk="_open_1g6ow_191",os={navbar:zk,navContent:Bk,brand:$k,links_list:qk,logoutButton:Wk,menuToggle:Hk,open:Kk},Gk=()=>{const{user:r}=Kc(),{logout:e}=Hc(),[t,i]=z.useState(!1);return D.jsx("nav",{className:os.navbar,children:D.jsxs("div",{className:os.navContent,children:[D.jsxs(bn,{to:"/",className:os.brand,children:["Mini ",D.jsx("span",{children:"Blog"})]}),D.jsx("button",{className:os.menuToggle,onClick:()=>i(!t),children:t?D.jsx(jE,{size:24}):D.jsx(Uk,{size:24})}),D.jsxs("ul",{className:`${os.links_list} ${t?os.open:""}`,children:[D.jsx("li",{children:D.jsx(hi,{to:"/",onClick:()=>i(!1),children:"Home"})}),!r&&D.jsxs(D.Fragment,{children:[D.jsx("li",{children:D.jsx(hi,{to:"/login",onClick:()=>i(!1),children:"Entrar"})}),D.jsx("li",{children:D.jsx(hi,{to:"/register",onClick:()=>i(!1),children:"Cadastrar"})}),D.jsx("li",{children:D.jsx(hi,{to:"/about",onClick:()=>i(!1),children:"Sobre"})})]}),r&&D.jsxs(D.Fragment,{children:[D.jsx("li",{children:D.jsx(hi,{to:"/posts/create",onClick:()=>i(!1),children:"Novo post"})}),D.jsx("li",{children:D.jsx(hi,{to:"/dashboard",onClick:()=>i(!1),children:"Dashboard"})}),D.jsx("li",{children:D.jsx(hi,{to:"/about",onClick:()=>i(!1),children:"Sobre"})}),D.jsx("li",{children:D.jsx("button",{className:os.logoutButton,onClick:()=>{e(),i(!1)},children:"Sair"})})]})]})]})})},Qk="_footer_1efoe_1",Yk={footer:Qk},Xk=()=>D.jsxs("div",{className:Yk.footer,children:[D.jsx("h3",{children:"Escreva sobre o que voc tem interesse!"}),D.jsx("p",{children:"Mini Blog  2025"})]}),_p=(r,e=null,t=null)=>{const[i,o]=z.useState(null),[l,h]=z.useState(null),[d,p]=z.useState(!1),[y,E]=z.useState(!1);return z.useEffect(()=>{(async()=>{if(y)return;p(!0);const I=await RE(El,r);try{let x;e?x=await Fd(I,n_("tags","array-contains",e),Ud("createdAt","desc")):t?x=await Fd(I,n_("uid","==",t),Ud("createdAt","desc")):x=await Fd(I,Ud("createdAt","desc")),await xk(x,O=>{o(O.docs.map(W=>({id:W.id,...W.data()})))}),p(!1)}catch(x){console.log(x),h(x.message),p(!1)}})()},[r,e,t,y]),z.useEffect(()=>()=>E(!0),[]),{documents:i,loading:d,error:l}},Jk="_home_1lxwz_1",Zk="_search_form_1lxwz_27",e1="_posts_container_1lxwz_55",t1="_noposts_1lxwz_71",n1="_search_btn_1lxwz_105",ja={home:Jk,search_form:Zk,posts_container:e1,noposts:t1,search_btn:n1},r1="_post_detail_1hvz9_1",i1="_tags_1hvz9_53",s1="_createdby_1hvz9_77",jd={post_detail:r1,tags:i1,createdby:s1},zE=({post:r})=>D.jsxs("div",{className:jd.post_detail,children:[D.jsx("img",{src:r.image,alt:r.title}),D.jsx("h2",{children:r.title}),D.jsx("p",{className:jd.createdby,children:r.createdBy}),D.jsx("div",{className:jd.tags,children:r.tags.map(e=>D.jsxs("p",{children:[D.jsx("span",{children:"#"}),e]},e))}),D.jsx(bn,{to:`/posts/${r.id}`,className:"btn btn-outline",children:"Ler"})]}),o1=()=>{const[r,e]=z.useState(""),{documents:t,loading:i}=_p("posts"),o=bo(),l=h=>{if(h.preventDefault(),r)return o(`/search?q=${r}`)};return D.jsxs("div",{className:ja.home,children:[D.jsx("h1",{children:"Veja os nossos posts mais recentes"}),D.jsxs("form",{className:ja.search_form,onSubmit:l,children:[D.jsx("input",{type:"text",placeholder:"Ou busque por tags...",value:r,onChange:h=>e(h.target.value)}),D.jsx("button",{className:`btn btn-dark ${ja.search_btn}`,children:"Pesquisar"})]}),D.jsxs("div",{className:ja.posts_container,children:[i&&D.jsx("p",{children:"Carregando..."}),t&&t.map(h=>D.jsx(zE,{post:h},h.id)),t&&t.length===0&&D.jsxs("div",{className:ja.noposts,children:[D.jsx("p",{children:"Nenhum post foi criado at o momento..."}),D.jsx(bn,{to:"/posts/create",className:"btn",children:"Criar primeiro post"})]})]})]})},a1="_about_17u3a_1",l1="_about_btn_17u3a_33",s_={about:a1,about_btn:l1},u1=()=>D.jsxs("div",{className:s_.about,children:[D.jsxs("h2",{children:["Sobre o Mini ",D.jsx("span",{children:"Blog"})]}),D.jsx("p",{children:"Este projeto consiste em um blog feito com React no front-end e Firebase no back-end"}),D.jsx(bn,{to:"/posts/create",className:`btn ${s_.about_btn}`,children:"Crie um post"})]}),c1="_login_a2niw_1",h1={login:c1},d1=()=>{const[r,e]=z.useState(""),[t,i]=z.useState(""),[o,l]=z.useState(""),{login:h,error:d,loading:p}=Hc(),y=async E=>{E.preventDefault(),l(""),await h({email:r,password:t})};return z.useEffect(()=>{d&&l(d)},[d]),D.jsxs("div",{className:h1.login,children:[D.jsx("h1",{children:"Entrar"}),D.jsx("p",{children:"Faa o login para poder utilizar o sistema"}),D.jsxs("form",{onSubmit:y,children:[D.jsxs("label",{children:[D.jsx("span",{children:"Email: "}),D.jsx("input",{type:"email",name:"email",required:!0,placeholder:"E-mail do usurio",value:r,onChange:E=>e(E.target.value)})]}),D.jsxs("label",{children:[D.jsx("span",{children:"Senha: "}),D.jsx("input",{type:"password",name:"password",required:!0,placeholder:"Insira sua senha",value:t,onChange:E=>i(E.target.value)})]}),!p&&D.jsx("button",{className:"btn",children:"Entrar"}),p&&D.jsx("button",{className:"btn",disabled:!0,children:"Aguarde..."}),o&&D.jsx("p",{className:"error",children:o})]})]})},f1="_register_1hohz_1",p1={register:f1},m1=()=>{const[r,e]=z.useState(""),[t,i]=z.useState(""),[o,l]=z.useState(""),[h,d]=z.useState(""),[p,y]=z.useState(""),{createUser:E,error:T,loading:I}=Hc(),x=async O=>{O.preventDefault(),y("");const W={displayName:r,email:t,password:o};if(o!==h){y("As senhas precisam ser iguais!");return}await E(W)};return z.useEffect(()=>{T&&y(T)},[T]),D.jsxs("div",{className:p1.register,children:[D.jsx("h1",{children:"Castre-se para postar"}),D.jsx("p",{children:"Crie seu usurio e compartilhe suas histrias"}),D.jsxs("form",{onSubmit:x,children:[D.jsxs("label",{children:[D.jsx("span",{children:"Nome: "}),D.jsx("input",{type:"text",name:"displayName",required:!0,placeholder:"Nome do usurio",value:r,onChange:O=>e(O.target.value)})]}),D.jsxs("label",{children:[D.jsx("span",{children:"Email: "}),D.jsx("input",{type:"email",name:"email",required:!0,placeholder:"E-mail do usurio",value:t,onChange:O=>i(O.target.value)})]}),D.jsxs("label",{children:[D.jsx("span",{children:"Senha: "}),D.jsx("input",{type:"password",name:"password",required:!0,placeholder:"Insira sua senha",value:o,onChange:O=>l(O.target.value)})]}),D.jsxs("label",{children:[D.jsx("span",{children:"Confirmao de senha: "}),D.jsx("input",{type:"password",name:"confirmPassword",required:!0,placeholder:"Confirme sua senha",value:h,onChange:O=>d(O.target.value)})]}),!I&&D.jsx("button",{className:"btn",children:"Entrar"}),I&&D.jsx("button",{className:"btn",disabled:!0,children:"Aguarde..."}),p&&D.jsx("p",{className:"error",children:p})]})]})},g1={loading:!1,error:null},y1=(r,e)=>{switch(e.type){case"LOADING":return{loading:!0,error:null};case"INSERTED_DOC":return{loading:!1,error:null};case"ERROR":return{loading:!1,error:e.payload};default:return r}},_1=r=>{const[e,t]=z.useReducer(y1,g1),[i,o]=z.useState(!1),l=d=>{i||t(d)},h=async d=>{l({type:"LOADING"});try{const p={...d,createdAt:ct.now()},y=await kk(RE(El,r),p);l({type:"INSERTED_DOC",payload:y})}catch(p){l({type:"ERROR",payload:p.message})}};return z.useEffect(()=>()=>o(!0),[]),{insertDocument:h,response:e}},v1="_overlay_1v4qn_1",E1="_image_preview_modal_1v4qn_27",w1="_modal_header_1v4qn_55",T1="_modal_title_1v4qn_71",I1="_close_button_1v4qn_81",S1="_preview_image_1v4qn_99",ho={overlay:v1,image_preview_modal:E1,modal_header:w1,modal_title:T1,close_button:I1,preview_image:S1},R1=({closePreviewModal:r,image:e})=>D.jsx("div",{className:ho.overlay,onClick:r,children:D.jsxs("div",{className:ho.image_preview_modal,onClick:t=>t.stopPropagation(),children:[D.jsxs("header",{className:ho.modal_header,children:[D.jsx("h3",{className:ho.modal_title,children:"Preview da imagem"}),D.jsx("button",{onClick:r,className:ho.close_button,"aria-label":"Fechar pr-visualizao",children:D.jsx(jE,{})})]}),D.jsx("img",{src:e,alt:"Pr-visualizao da imagem selecionada",className:ho.preview_image})]})}),A1="_post_form_1dmmv_1",C1="_image_input_container_1dmmv_75",P1="_preview_icon_1dmmv_89",zd={post_form:A1,image_input_container:C1,preview_icon:P1},BE=({handleSubmit:r,postData:e,setPostData:t,response:i,buttonText:o})=>{const[l,h]=z.useState(!1),d=()=>{h(!0)},p=()=>{h(!1)};return D.jsxs(D.Fragment,{children:[D.jsxs("form",{onSubmit:!e.formError&&r,className:zd.post_form,children:[D.jsxs("label",{children:["Ttulo",D.jsx("input",{type:"text",name:"title",required:!0,placeholder:"Pense num bom ttulo...",value:e.title,onChange:y=>t({...e,title:y.target.value})})]}),D.jsxs("div",{className:zd.image_input_container,children:[D.jsxs("label",{children:["URL da imagem",D.jsx("input",{type:"text",name:"image",required:!0,placeholder:"Insira uma imagem para o post",value:e.image,onChange:y=>t({...e,image:y.target.value})})]}),e.image&&D.jsx(Mk,{onClick:d,className:zd.preview_icon,"aria-label":"Visualizar imagem"})]}),D.jsxs("label",{children:["Contedo",D.jsx("textarea",{name:"body",required:!0,placeholder:"Escreva o contedo do post",value:e.body,onChange:y=>t({...e,body:y.target.value})})]}),D.jsxs("label",{children:["Tags",D.jsx("input",{id:"tags",type:"text",name:"tags",required:!0,placeholder:"Insira tags separadas por vrgula",value:e.tags,onChange:y=>t({...e,tags:y.target.value})})]}),D.jsx("button",{type:"submit",className:"btn",disabled:i.loading,children:i.loading?"Aguarde...":o}),i.error&&D.jsx("p",{className:"error","aria-live":"polite",children:i.error}),e.formError&&D.jsx("p",{className:"error","aria-live":"polite",children:e.formError})]}),l&&e.image&&D.jsx(R1,{closePreviewModal:p,image:e.image})]})},k1="_create_post_1e3ep_1",x1={create_post:k1},N1=()=>{const[r,e]=z.useState({title:"",image:"",body:"",tags:"",formError:""}),{insertDocument:t,response:i}=_1("posts"),{user:o}=Kc(),l=bo(),h=d=>{d.preventDefault(),e({...r,formError:""});try{new URL(r.image)}catch{e({...r,formError:"A imagem precisa ser uma URL."});return}const p=r.tags.split(",").map(y=>y.trim().toLowerCase());if(!r.title||!r.image||!r.tags||!r.body){e({...r,formError:"Preencha todos os campos!"});return}t({title:r.title,image:r.image,body:r.body,tags:p,uid:o.uid,createdBy:o.displayName}),l("/")};return D.jsxs("div",{className:x1.create_post,children:[D.jsx("h2",{children:"Criar post"}),D.jsx("p",{children:"Escreva sobre qualquer assunto e compartilhe conhecimento!"}),D.jsx(BE,{handleSubmit:h,postData:r,setPostData:e,response:i,buttonText:"Cadastrar"})]})},D1={loading:!1,error:null},V1=(r,e)=>{switch(e.type){case"LOADING":return{loading:!0,error:null};case"DELETED_DOC":return{loading:!1,error:null};case"ERROR":return{loading:!1,error:e.payload};default:return r}},L1=r=>{const[e,t]=z.useReducer(V1,D1),[i,o]=z.useState(!1),l=d=>{i||t(d)},h=async d=>{l({type:"LOADING"});try{const p=await Pk(zc(El,r,d));l({type:"DELETED_DOC",payload:p})}catch(p){l({type:"ERROR",payload:p.message})}};return z.useEffect(()=>()=>o(!0),[]),{deleteDocument:h,response:e}},O1="_dashboard_11g2d_1",b1="_noposts_11g2d_39",M1="_table_container_11g2d_65",F1="_post_header_11g2d_75",U1="_post_row_11g2d_95",j1="_actions_11g2d_127",z1="_post_title_11g2d_169",as={dashboard:O1,noposts:b1,table_container:M1,post_header:F1,post_row:U1,actions:j1,post_title:z1},B1=()=>{const{user:r}=Kc(),e=r.uid,{documents:t}=_p("posts",null,e),{deleteDocument:i}=L1("posts");return D.jsxs("div",{className:as.dashboard,children:[D.jsx("h2",{children:"Dashboard"}),D.jsx("p",{children:"Gerencie os seus posts"}),t&&t.length===0?D.jsxs("div",{className:as.noposts,children:[D.jsx("p",{children:"Nenhum post foi criado at o momento..."}),D.jsx(bn,{to:"/posts/create",className:"btn",children:"Criar primeiro post"})]}):D.jsx(D.Fragment,{children:D.jsxs("div",{className:as.table_container,children:[D.jsxs("div",{className:as.post_header,children:[D.jsx("span",{children:"Ttulo"}),D.jsx("span",{children:"Aes"})]}),t&&t.map(o=>D.jsxs("div",{className:as.post_row,children:[D.jsx("p",{className:as.post_title,children:o.title}),D.jsxs("div",{className:as.actions,children:[D.jsx(bn,{to:`/posts/${o.id}`,className:"btn btn-outline",children:"Ver"}),D.jsx(bn,{to:`/posts/edit/${o.id}`,className:"btn btn-outline",children:"Editar"}),D.jsx("button",{className:"btn btn-outline btn-danger",onClick:()=>i(o.id),children:"Excluir"})]})]},o.id))]})})]})};function $1(){const{search:r}=Fr();return z.useMemo(()=>new URLSearchParams(r),[r])}const q1="_search_container_1oit7_1",W1="_posts_container_1oit7_17",H1="_noposts_1oit7_65",Bd={search_container:q1,posts_container:W1,noposts:H1},K1=()=>{const e=$1().get("q"),{documents:t}=_p("posts",e);return D.jsxs("div",{className:Bd.search_container,children:[D.jsx("h1",{children:"Filtro de posts"}),D.jsxs("div",{className:Bd.posts_container,children:[t&&t.length===0&&D.jsx("div",{className:Bd.noposts,children:D.jsxs("p",{children:["No encontramos nenhum post a partir da busca:"," ",D.jsx("span",{children:e})]})}),t&&D.jsx(D.Fragment,{children:t.map(i=>D.jsx(zE,{post:i},i.id))}),D.jsx(bn,{to:"/",className:"btn btn-dark",children:"Voltar"})]})]})},$E=(r,e)=>{const[t,i]=z.useState(null),[o,l]=z.useState(null),[h,d]=z.useState(!1),[p,y]=z.useState(!1);return z.useEffect(()=>{(async()=>{if(!p){d(!0);try{const T=await zc(El,r,e),I=await Ak(T);i(I.data()),d(!1)}catch(T){console.log(T),l(T.message),d(!1)}}})()},[r,e,p]),z.useEffect(()=>()=>y(!0),[]),{document:t,loading:h,error:o}},G1="_post_container_ni3nq_1",Q1="_post_image_ni3nq_25",Y1="_post_body_ni3nq_53",X1="_tags_ni3nq_77",qu={post_container:G1,post_image:Q1,post_body:Y1,tags:X1},J1=()=>{const{id:r}=ov(),{document:e,loading:t}=$E("posts",r),i=bo(),o=l=>i(`/search?q=${l}`);return D.jsxs("div",{className:qu.post_container,children:[t&&D.jsx("p",{children:"Carregando post..."}),e&&D.jsxs(D.Fragment,{children:[D.jsx("img",{src:e.image,alt:e.title,className:qu.post_image}),D.jsx("h1",{children:e.title}),D.jsx("p",{className:qu.post_body,children:e.body}),D.jsx("h3",{children:"Este post trata sobre:"}),D.jsx("div",{className:qu.tags,children:e.tags.map(l=>D.jsxs("p",{onClick:()=>o(l),children:[D.jsx("span",{children:"#"}),l]},l))}),D.jsx(bn,{to:"/",className:"btn btn-dark",children:"Voltar"})]})]})},Z1={loading:!1,error:null},ex=(r,e)=>{switch(e.type){case"LOADING":return{loading:!0,error:null};case"UPDATED_DOC":return{loading:!1,error:null};case"ERROR":return{loading:!1,error:e.payload};default:return r}},tx=r=>{const[e,t]=z.useReducer(ex,Z1),[i,o]=z.useState(!1),l=d=>{i||t(d)},h=async(d,p)=>{l({type:"LOADING"});try{const y=await zc(El,r,d),E=await Ck(y,p);l({type:"INSERTED_DOC",payload:E})}catch(y){l({type:"ERROR",payload:y.message})}};return z.useEffect(()=>()=>o(!0),[]),{updateDocument:h,response:e}},nx="_edit_post_12vt6_1",rx={edit_post:nx},ix=()=>{const{id:r}=ov(),{document:e}=$E("posts",r),{updateDocument:t,response:i}=tx("posts"),{user:o}=Kc(),l=bo(),[h,d]=z.useState({title:"",image:"",body:"",tags:"",formError:""});z.useEffect(()=>{e&&d({title:e.title,image:e.image,body:e.body,tags:e.tags.join(", "),formError:""})},[e]);const p=y=>{y.preventDefault(),d({...h,formError:""});try{new URL(h.image)}catch{d({...h,formError:"A imagem precisa ser uma URL."});return}const E=h.tags.split(",").map(T=>T.trim().toLowerCase());if(!h.title||!h.image||!h.tags||!h.body){d({...h,formError:"Preencha todos os campos!"});return}t(r,{title:h.title,image:h.image,body:h.body,tags:E,uid:o.uid,createdBy:o.displayName}),l("/")};return D.jsx("div",{className:rx.edit_post,children:e&&D.jsxs(D.Fragment,{children:[D.jsxs("h2",{children:["Editando post: ",e.title]}),D.jsx("p",{children:"Altere os dados do post como desejar"}),D.jsx(BE,{handleSubmit:p,postData:h,setPostData:d,response:i,buttonText:"Salvar alteraes"})]})})};function sx(){const[r,e]=z.useState(void 0),{auth:t}=Hc(),i=r===void 0;return z.useEffect(()=>{MS(t,o=>{e(o)})},[t]),i?D.jsx("p",{children:"Carregando..."}):D.jsx("div",{className:"App",children:D.jsx(Dk,{value:{user:r},children:D.jsxs(cA,{basename:"/Mini-Blog",children:[D.jsx(Gk,{}),D.jsx("div",{className:"container",children:D.jsxs(j0,{children:[D.jsx(er,{path:"/",element:D.jsx(o1,{})}),D.jsx(er,{path:"/about",element:D.jsx(u1,{})}),D.jsx(er,{path:"/search",element:D.jsx(K1,{})}),D.jsx(er,{path:"/posts/:id",element:D.jsx(J1,{})}),D.jsx(er,{path:"/login",element:r?D.jsx(Fa,{to:"/"}):D.jsx(d1,{})}),D.jsx(er,{path:"/register",element:r?D.jsx(Fa,{to:"/"}):D.jsx(m1,{})}),D.jsx(er,{path:"/posts/edit/:id",element:r?D.jsx(ix,{}):D.jsx(Fa,{to:"/login"})}),D.jsx(er,{path:"/posts/create",element:r?D.jsx(N1,{}):D.jsx(Fa,{to:"/login"})}),D.jsx(er,{path:"/dashboard",element:r?D.jsx(B1,{}):D.jsx(Fa,{to:"/login"})})]})}),D.jsx(Xk,{})]})})})}tT.createRoot(document.getElementById("root")).render(D.jsx(z.StrictMode,{children:D.jsx(sx,{})}));
